{"version":3,"file":"global-b99bb08b.js","sources":["../../../.svelte-kit/adapter-node/chunks/global.js"],"sourcesContent":["import { e as error } from \"./index.js\";\nconst GLOBAL_GAMES_KEY = Symbol.for(\"game.games\");\nconst getGames = () => {\n  let games = globalThis[GLOBAL_GAMES_KEY];\n  if (!games) {\n    games = {};\n    globalThis[GLOBAL_GAMES_KEY] = games;\n  }\n  return games;\n};\nconst addGame = (game) => {\n  const games = getGames();\n  games[game.id] = game;\n};\nconst deleteGame = (gameId) => {\n  const games = getGames();\n  const game = games[gameId];\n  if (!game) {\n    console.warn(`Tried to delete game ${gameId} but it did not exist`);\n    return;\n  }\n  game.machine.stop();\n  delete games[gameId];\n  console.info(`Deleted game ${gameId}`);\n};\nfunction getGame(gameIdOrLocals) {\n  return typeof gameIdOrLocals === \"string\" ? findGame(gameIdOrLocals) : getGameFromLocals(gameIdOrLocals);\n}\nconst findGame = (gameId) => getGames()[gameId];\nconst getGameFromLocals = (locals) => {\n  const game = locals.game;\n  if (!game)\n    throw error(500, \"No game found in locals\");\n  return game;\n};\nexport {\n  getGames as a,\n  addGame as b,\n  deleteGame as d,\n  getGame as g\n};\n"],"names":[],"mappings":";;AACA,MAAM,gBAAgB,GAAG,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;AAC7C,MAAC,QAAQ,GAAG,MAAM;AACvB,EAAE,IAAI,KAAK,GAAG,UAAU,CAAC,gBAAgB,CAAC,CAAC;AAC3C,EAAE,IAAI,CAAC,KAAK,EAAE;AACd,IAAI,KAAK,GAAG,EAAE,CAAC;AACf,IAAI,UAAU,CAAC,gBAAgB,CAAC,GAAG,KAAK,CAAC;AACzC,GAAG;AACH,EAAE,OAAO,KAAK,CAAC;AACf,EAAE;AACG,MAAC,OAAO,GAAG,CAAC,IAAI,KAAK;AAC1B,EAAE,MAAM,KAAK,GAAG,QAAQ,EAAE,CAAC;AAC3B,EAAE,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;AACxB,EAAE;AACG,MAAC,UAAU,GAAG,CAAC,MAAM,KAAK;AAC/B,EAAE,MAAM,KAAK,GAAG,QAAQ,EAAE,CAAC;AAC3B,EAAE,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC;AAC7B,EAAE,IAAI,CAAC,IAAI,EAAE;AACb,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC,qBAAqB,EAAE,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC;AACxE,IAAI,OAAO;AACX,GAAG;AACH,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;AACtB,EAAE,OAAO,KAAK,CAAC,MAAM,CAAC,CAAC;AACvB,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;AACzC,EAAE;AACF,SAAS,OAAO,CAAC,cAAc,EAAE;AACjC,EAAE,OAAO,OAAO,cAAc,KAAK,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,GAAG,iBAAiB,CAAC,cAAc,CAAC,CAAC;AAC3G,CAAC;AACD,MAAM,QAAQ,GAAG,CAAC,MAAM,KAAK,QAAQ,EAAE,CAAC,MAAM,CAAC,CAAC;AAChD,MAAM,iBAAiB,GAAG,CAAC,MAAM,KAAK;AACtC,EAAE,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;AAC3B,EAAE,IAAI,CAAC,IAAI;AACX,IAAI,MAAM,KAAK,CAAC,GAAG,EAAE,yBAAyB,CAAC,CAAC;AAChD,EAAE,OAAO,IAAI,CAAC;AACd,CAAC;;;;"}