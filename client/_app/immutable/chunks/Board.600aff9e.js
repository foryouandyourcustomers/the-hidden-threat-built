import{s as R,v as W,e as H,a as V,c as I,b as y,l as oe,g as P,f as k,m as z,i as L,h as S,w as q,x as A,y as T,O as N,D,L as U,P as ne,H as j,r as le,k as ie,K as re,M as ae}from"./scheduler.036a2d74.js";import{S as X,i as Y,t as w,b as C,c as J,a as Q,m as Z,g as fe,e as de,d as $}from"./index.e2632973.js";import{r as x}from"./index.07541d6e.js";import{g as ue}from"./game-context.fd63b07d.js";import{F as ce}from"./FooterNav.5db6a55f.js";function _e(t,s){return t===s}const he=(t,s,e=_e)=>{let n,o=s(t.getSnapshot());return x(o,g=>{const f=a=>{const c=s(a);e(o,c)||(o=c,g(c))};return f(t.getSnapshot()),n=t.subscribe(f),()=>{n.unsubscribe()}})},ee=(t,s)=>{const e=s.users.find(n=>n.id===t);if(!e)throw new Error(`The user with id ${t} was not found.`);return e},Ie=(t,s)=>ee(t,s).isAdmin,me=t=>ee(t.userId,t);function ge(t){let s,e,n="The hidden threat",o,i;const g=t[1].default,f=W(g,t,t[0],null);return{c(){s=H("div"),e=H("div"),e.textContent=n,o=V(),f&&f.c(),this.h()},l(a){s=I(a,"DIV",{class:!0});var c=y(s);e=I(c,"DIV",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-xbe4by"&&(e.textContent=n),o=P(c),f&&f.l(c),c.forEach(k),this.h()},h(){z(e,"class","title svelte-17fjqxi"),z(s,"class","header svelte-17fjqxi")},m(a,c){L(a,s,c),S(s,e),S(s,o),f&&f.m(s,null),i=!0},p(a,[c]){f&&f.p&&(!i||c&1)&&q(f,g,a,a[0],i?T(g,a[0],c,null):A(a[0]),null)},i(a){i||(w(f,a),i=!0)},o(a){C(f,a),i=!1},d(a){a&&k(s),f&&f.d(a)}}}function ve(t,s,e){let{$$slots:n={},$$scope:o}=s;return t.$$set=i=>{"$$scope"in i&&e(0,o=i.$$scope)},[o,n]}class pe extends X{constructor(s){super(),Y(this,s,ve,ge,R,{})}}const we=t=>({}),G=t=>({}),be=t=>({}),K=t=>({});function Ce(t){let s;const e=t[14].header,n=W(e,t,t[18],K);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,i){n&&n.m(o,i),s=!0},p(o,i){n&&n.p&&(!s||i&262144)&&q(n,e,o,o[18],s?T(e,o[18],i,be):A(o[18]),K)},i(o){s||(w(n,o),s=!0)},o(o){C(n,o),s=!1},d(o){n&&n.d(o)}}}function O(t){let s,e,n;return e=new ce({}),{c(){s=H("div"),J(e.$$.fragment),this.h()},l(o){s=I(o,"DIV",{class:!0});var i=y(s);Q(e.$$.fragment,i),i.forEach(k),this.h()},h(){z(s,"class","footer svelte-1giett1")},m(o,i){L(o,s,i),Z(e,s,null),n=!0},i(o){n||(w(e.$$.fragment,o),n=!0)},o(o){C(e.$$.fragment,o),n=!1},d(o){o&&k(s),$(e)}}}function ke(t){let s,e,n,o,i,g,f,a,c,m,B,b;N(t[15]),n=new pe({props:{$$slots:{default:[Ce]},$$scope:{ctx:t}}});const p=t[14].default,_=W(p,t,t[18],null),M=t[14].overlays,h=W(M,t,t[18],G);let r=t[1]&&O();return{c(){s=H("div"),e=H("div"),J(n.$$.fragment),o=V(),i=H("div"),_&&_.c(),g=V(),h&&h.c(),f=V(),r&&r.c(),this.h()},l(l){s=I(l,"DIV",{class:!0});var d=y(s);e=I(d,"DIV",{class:!0});var v=y(e);Q(n.$$.fragment,v),o=P(v),i=I(v,"DIV",{class:!0});var E=y(i);_&&_.l(E),E.forEach(k),g=P(v),h&&h.l(v),f=P(v),r&&r.l(v),v.forEach(k),d.forEach(k),this.h()},h(){z(i,"class","content svelte-1giett1"),D(i,"padded",t[2]),z(e,"class",a="board "+(t[9]?`side-${t[9]}`:"")+" svelte-1giett1"),N(()=>t[17].call(e)),D(e,"backdrop",t[0]),D(e,"with-footer",t[1]),z(s,"class","board-wrapper svelte-1giett1"),U(s,"--board-scale",t[8])},m(l,d){L(l,s,d),S(s,e),Z(n,e,null),S(e,o),S(e,i),_&&_.m(i,null),S(e,g),h&&h.m(e,null),S(e,f),r&&r.m(e,null),t[16](e),c=ne(e,t[17].bind(e)),m=!0,B||(b=[j(window,"resize",t[12]),j(window,"resize",t[15]),j(e,"mousemove",t[11])],B=!0)},p(l,[d]){const v={};d&262144&&(v.$$scope={dirty:d,ctx:l}),n.$set(v),_&&_.p&&(!m||d&262144)&&q(_,p,l,l[18],m?T(p,l[18],d,null):A(l[18]),null),(!m||d&4)&&D(i,"padded",l[2]),h&&h.p&&(!m||d&262144)&&q(h,M,l,l[18],m?T(M,l[18],d,we):A(l[18]),G),l[1]?r?d&2&&w(r,1):(r=O(),r.c(),w(r,1),r.m(e,null)):r&&(fe(),C(r,1,1,()=>{r=null}),de()),(!m||d&512&&a!==(a="board "+(l[9]?`side-${l[9]}`:"")+" svelte-1giett1"))&&z(e,"class",a),(!m||d&513)&&D(e,"backdrop",l[0]),(!m||d&514)&&D(e,"with-footer",l[1]),d&256&&U(s,"--board-scale",l[8])},i(l){m||(w(n.$$.fragment,l),w(_,l),w(h,l),w(r),m=!0)},o(l){C(n.$$.fragment,l),C(_,l),C(h,l),C(r),m=!1},d(l){l&&k(s),$(n),_&&_.d(l),h&&h.d(l),r&&r.d(),t[16](null),c(),B=!1,le(b)}}}function Me(t,s,e){let n,{$$slots:o={},$$scope:i}=s,{reportMousePosition:g=void 0}=s,{showBackdrop:f=!1}=s,{showFooter:a=!1}=s,{paddedContent:c=!1}=s;const m=ue(),B=m?he(m.machine.service,({context:u})=>{const F=me(u);if(F.isAdmin)return F.side}):x(void 0);ie(t,B,u=>e(9,n=u));let b,p=1,_=1,M=1,h=1,r=1;const l=u=>{if(!g)return;const F=(u.clientX-b.offsetLeft)/p,se=(u.clientY-b.offsetTop)/_;g([(F-(1-r)/2)/r,(se-(1-r)/2)/r])},d=()=>{e(8,r=Math.min(M/(p+20),h/(_+20))),r>=1.3?e(8,r=1.3):e(8,r=Math.min(r,1))};re(d);function v(){e(6,M=window.innerWidth),e(7,h=window.innerHeight)}function E(u){ae[u?"unshift":"push"](()=>{b=u,e(3,b)})}function te(){p=this.clientWidth,_=this.clientHeight,e(4,p),e(5,_)}return t.$$set=u=>{"reportMousePosition"in u&&e(13,g=u.reportMousePosition),"showBackdrop"in u&&e(0,f=u.showBackdrop),"showFooter"in u&&e(1,a=u.showFooter),"paddedContent"in u&&e(2,c=u.paddedContent),"$$scope"in u&&e(18,i=u.$$scope)},[f,a,c,b,p,_,M,h,r,n,B,l,d,g,o,v,E,te,i]}class ye extends X{constructor(s){super(),Y(this,s,Me,ke,R,{reportMousePosition:13,showBackdrop:0,showFooter:1,paddedContent:2})}}export{ye as B,he as a,ee as b,me as g,Ie as u};
