import{ac as N,a3 as tt,ab as rt,s as Ve,F as ve,x as nt,e as X,a as J,I as Te,c as Q,b as he,g as G,f as P,ad as Fe,D as Ne,m as ne,i as O,h as H,H as at,y as st,z as it,A as ot,ae as Pe,k as ke,a9 as ut,t as fe,d as ce,j as lt,n as wt,q as $t,af as Je,l as Et,ag as St}from"./scheduler.9575fd4f.js";import{S as Be,i as He,t as Y,b as K,c as ie,a as oe,m as ue,d as le}from"./index.ae3d3fc3.js";import{B as kt}from"./Board.1f0dfd3a.js";import{P as Ge,A as At,B as Tt}from"./Paragraph.f42cea57.js";import{g as ft,H as Ye}from"./Heading.db207678.js";import{j as xe,k as Ft}from"./singletons.21883f10.js";import{d as we,w as W}from"./index.a8ce1c85.js";import{U as ct,N as Nt,P as Pt,a as Mt,b as dt,H as jt,p as mt}from"./parse.7d180a0f.js";import{p as Ee}from"./stores.e048043f.js";const It=!0;class Ce extends Error{constructor(e,r){super(e),this.name="DevalueError",this.path=r.join("")}}function Ke(t){return Object(t)!==t}const Ot=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ut(t){const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===Ot}function Ct(t){return Object.prototype.toString.call(t).slice(8,-1)}function Lt(t){switch(t){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return t<" "?`\\u${t.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}function _e(t){let e="",r=0;const n=t.length;for(let s=0;s<n;s+=1){const i=t[s],a=Lt(i);a&&(e+=t.slice(r,s)+a,r=s+1)}return`"${r===0?t:e+t.slice(r)}"`}function pt(t,e){const r=[],n=new Map,s=[];for(const d in e)s.push({key:d,fn:e[d]});const i=[];let a=0;function u(d){if(typeof d=="function")throw new Ce("Cannot stringify a function",i);if(n.has(d))return n.get(d);if(d===void 0)return ct;if(Number.isNaN(d))return Nt;if(d===1/0)return Pt;if(d===-1/0)return Mt;if(d===0&&1/d<0)return dt;const w=a++;n.set(d,w);for(const{key:c,fn:m}of s){const g=m(d);if(g)return r[w]=`["${c}",${u(g)}]`,w}let p="";if(Ke(d))p=Le(d);else switch(Ct(d)){case"Number":case"String":case"Boolean":p=`["Object",${Le(d)}]`;break;case"BigInt":p=`["BigInt",${d}]`;break;case"Date":p=`["Date","${d.toISOString()}"]`;break;case"RegExp":const{source:m,flags:g}=d;p=g?`["RegExp",${_e(m)},"${g}"]`:`["RegExp",${_e(m)}]`;break;case"Array":p="[";for(let l=0;l<d.length;l+=1)l>0&&(p+=","),l in d?(i.push(`[${l}]`),p+=u(d[l]),i.pop()):p+=jt;p+="]";break;case"Set":p='["Set"';for(const l of d)p+=`,${u(l)}`;p+="]";break;case"Map":p='["Map"';for(const[l,f]of d)i.push(`.get(${Ke(l)?Le(l):"..."})`),p+=`,${u(l)},${u(f)}`;p+="]";break;default:if(!Ut(d))throw new Ce("Cannot stringify arbitrary non-POJOs",i);if(Object.getOwnPropertySymbols(d).length>0)throw new Ce("Cannot stringify POJOs with symbolic keys",i);if(Object.getPrototypeOf(d)===null){p='["null"';for(const l in d)i.push(`.${l}`),p+=`,${_e(l)},${u(d[l])}`,i.pop();p+="]"}else{p="{";let l=!1;for(const f in d)l&&(p+=","),l=!0,i.push(`.${f}`),p+=`${_e(f)}:${u(d[f])}`,i.pop();p+="}"}}return r[w]=p,w}const h=u(t);return h<0?`${h}`:`[${r.join(",")}]`}function Le(t){const e=typeof t;return e==="string"?_e(t):t instanceof String?_e(t.toString()):t===void 0?ct.toString():t===0&&1/t<0?dt.toString():e==="bigint"?`["BigInt","${t}"]`:String(t)}const ht=It,bt=xe("invalidate_all"),Dt=xe("before_navigate"),Rt=xe("after_navigate");function Me(t){return t.toString().split(/[[\].]+/).filter(e=>e)}function Vt(t){return t.reduce((e,r)=>(typeof r=="number"||!isNaN(parseInt(String(r),10))?e+=`[${String(r)}]`:e?e+=`.${String(r)}`:e+=String(r),e),"")}class V extends Error{constructor(e){super(e),Object.setPrototypeOf(this,V.prototype)}}function je(t,e,r){return t[e]=r,"skip"}function Ze(t,e){return e.value!==void 0&&typeof e.value!="object"&&e.path.length<t.length}function Bt(t,e,r={}){r.modifier||(r.modifier=s=>Ze(e,s)?void 0:s.value);const n=x(t,e,r.modifier);if(n)return r.value===void 0||r.value(n.value)?n:void 0}function x(t,e,r){if(!e.length)return;const n=[e[0]];let s=t;for(;n.length<e.length;){const a=n[n.length-1],u=r?r({parent:s,key:String(a),value:s[a],path:n.map(h=>String(h)),isLeaf:!1,set:h=>je(s,a,h)}):s[a];if(u===void 0)return;s=u,n.push(e[n.length])}const i=e[e.length-1];return{parent:s,key:String(i),value:s[i],path:e.map(a=>String(a)),isLeaf:!0,set:a=>je(s,i,a)}}function z(t,e,r=[]){for(const n in t){const s=t[n],i=s===null||typeof s!="object",a={parent:t,key:n,value:s,path:r.map(String).concat([n]),isLeaf:i,set:h=>je(t,n,h)},u=e(a);if(u==="abort")return u;if(u==="skip")continue;if(!i){const h=z(s,e,a.path);if(h==="abort")return h}}}async function Ht(t,e,r=[]){for(const n in t){const s=t[n],i=s===null||typeof s!="object",a={parent:t,key:n,value:s,path:r.map(String).concat([n]),isLeaf:i,set:h=>je(t,n,h)},u=await e(a);if(u==="abort")return u;if(u==="skip")break;if(!i){const h=z(s,e,a.path);if(h==="abort")return h}}}function xt(t,e){return t===e||t.size===e.size&&[...t].every(r=>e.has(r))}function Zt(t,e){const r=new Map;function n(s,i){const a=x(i,s.path);function u(){r.set(s.path.join(" "),s.path)}s.isLeaf?a?(s.value instanceof Date&&a.value instanceof Date&&s.value.getTime()!=a.value.getTime()||s.value!==a.value)&&u():u():a&&s.value instanceof Set&&a.value instanceof Set&&!xt(s.value,a.value)&&u()}return z(t,s=>n(s,e)),z(e,s=>n(s,t)),Array.from(r.values())}function be(t,e,r){for(const n of e){const s=x(t,n,({parent:i,key:a,value:u})=>((u===void 0||typeof u!="object")&&(i[a]={}),i[a]));s&&(s.parent[s.key]=r)}}function gt(t,e){const n=Me(e).filter(s=>isNaN(parseInt(String(s)))).join(".");return{path:e,value:ye(t.form,e),errors:ye(t.errors,e),constraints:ye(t.constraints,n)}}function ye(t,e){const r=Me(e),n=we(t,s=>{const i=x(s,r);return i==null?void 0:i.value});return{subscribe(...s){const i=n.subscribe(...s);return()=>{i()}},update(s){t.update(i=>{const a=x(i,r);return a&&(a.parent[a.key]=s(a.value)),i})},set(s){t.update(i=>{const a=x(i,r);return a&&(a.parent[a.key]=s),i})}}}function pe(t){return"structuredClone"in globalThis?structuredClone(t):mt(pt(t))}function qt(t){const e=t;let r=!0,n=!1,s=!1,i=!1,a,u;for(;r;)t._def.typeName=="ZodNullable"?(n=!0,t=t.unwrap()):t._def.typeName=="ZodDefault"?(i=!0,u=t._def.defaultValue(),t=t._def.innerType):t._def.typeName=="ZodOptional"?(s=!0,t=t.unwrap()):t._def.typeName=="ZodEffects"?(a||(a=t),t=t._def.schema):t._def.typeName=="ZodPipeline"?t=t._def.out:r=!1;return{zodType:t,originalType:e,isNullable:n,isOptional:s,hasDefault:i,defaultValue:u,effects:a}}const De=new WeakMap;function qe(t){return De.has(t)||De.set(t,$e(t)),De.get(t)}function $e(t){const e=qt(t).zodType;if(e._def.typeName=="ZodObject")return Object.fromEntries(Object.entries(e.shape).map(([r,n])=>[r,$e(n)]).filter(r=>r[1]!==void 0));if(e._def.typeName=="ZodArray")return $e(e._def.type)??{};if(e._def.typeName=="ZodRecord")return $e(e._def.valueType)??{};if(e._def.typeName=="ZodUnion")return e._def.options.reduce((n,s)=>{const i=$e(s);return i&&(n={...n??{},...i}),n},void 0)}function Ie(t,e,r=!0){const n={},s=Object.entries(t);if("_errors"in t&&t._errors.length){if(!e||!r)return t._errors;n._errors=t._errors}for(const[i,a]of s.filter(([u])=>u!=="_errors")){const u=!isNaN(parseInt(i,10));n[i]=Ie(a,e?u?e:e[i]:void 0,!!(e!=null&&e[i]))}return n}function Wt(t){return _t(t,[])}function _t(t,e){return Object.entries(t).filter(([,n])=>n!==void 0).flatMap(([n,s])=>{if(Array.isArray(s)&&s.length>0){const i=e.concat([n]);return{path:Vt(i),messages:s}}else return _t(t[n],e.concat([n]))})}function yt(t,e){t.update(r=>(z(r,n=>{if(!(n.path.length==1&&n.path[0]=="_errors"&&!e.clearFormLevelErrors)&&Array.isArray(n.value))return n.set(void 0)}),e.undefinePath&&be(r,[e.undefinePath],void 0),r))}async function vt(t,e,r,n,s){return Jt(t.validators,e,r,n,s)}async function Jt(t,e,r,n,s){if(t){let i,a={};if("safeParseAsync"in t){const u=t,h=await u.safeParseAsync(e);i=h.success,h.success||(a=Ie(h.error.format(),qe(u)))}else{i=!0;const u=t,h=[];await Ht(e,async({value:d,path:w})=>{const p=w.filter(m=>isNaN(parseInt(m))),c=x(u,p);if(typeof(c==null?void 0:c.value)=="function"){const m=c.value;if(Array.isArray(d))for(const g in d){const l=await m(d[g]);l&&(i=!1,h.push({path:w.concat([g]),errors:typeof l=="string"?[l]:l??void 0}))}else{const g=await m(d);g&&(i=!1,h.push({path:w,errors:typeof g=="string"?[g]:g??void 0}))}}});for(const{path:d,errors:w}of h){const p=x(a,d,({parent:c,key:m,value:g})=>(g===void 0&&(c[m]={}),c[m]));if(p){const{parent:c,key:m}=p;c[m]=w}}}if(!i)return{valid:!1,posted:s,errors:a,data:e,constraints:n,message:void 0,id:r}}return{valid:!0,posted:s,errors:{},data:e,constraints:n,message:void 0,id:r}}async function Gt(t,e,r){if(typeof t.validators!="object"||!("safeParseAsync"in t.validators))return;const n=t.validators,s=await n.safeParseAsync(e);if(s.success)r.update(i=>(z(i,a=>{if(a.key=="_errors")return a.set(void 0)}),i));else{const i=Ie(s.error.format(),qe(n));r.update(a=>(z(a,u=>{if(u.key=="_errors")return u.set(void 0)}),z(i,u=>{if(u.key=="_errors")return be(a,[u.path],u.value)}),a))}}async function Re(t,e,r,n,s,i={}){function a(){yt(n,{undefinePath:t,clearFormLevelErrors:!0})}function u(d){return typeof d=="string"&&(d=[d]),(i.update===!0||i.update=="errors")&&n.update(w=>{const p=x(w,t,c=>{if(Ze(t,c))throw new V("Errors can only be added to form fields, not to arrays or objects in the schema. Path: "+c.path.slice(0,-1));return c.value===void 0?(c.parent[c.key]={},c.parent[c.key]):c.value});if(!p)throw new V("Error path could not be created: "+t);return p.parent[p.key]=d??void 0,w}),d??void 0}const h=await Yt(t,e.validators,r,n,s,i);if(h.validated)if(h.validated==="all"&&!h.errors)a();else return u(h.errors);else if(h.validated===!1&&e.defaultValidator=="clear")return u(void 0);return h.errors}async function Yt(t,e,r,n,s,i={}){i.update===void 0&&(i.update=!0),i.taint===void 0&&(i.taint=!1),typeof i.errors=="string"&&(i.errors=[i.errors]);const a={value:i.value,shouldUpdate:!0,currentData:void 0,validationPath:t.filter(c=>isNaN(parseInt(c)))};async function u(){return{validated:!1,errors:void 0}}function h(c,m){if(m===void 0)return!1;const g=x(m,c);return g?g.value===!0:!1}function d(c){n.update(c)}function w(){n.update(c=>(z(c,m=>{if(m.key=="_errors")return m.set(void 0)}),c))}function p(c,m){return Ie(c.format(),qe(m))}if("value"in i)i.update===!0||i.update==="value"?r.update(c=>(be(c,[t],a.value),a.currentData=c),{taint:i.taint}):a.shouldUpdate=!1;else{a.currentData=N(r);const c=x(a.currentData,t);a.value=c==null?void 0:c.value}if(typeof e!="object")return u();if("safeParseAsync"in e){a.shouldUpdate||(a.currentData=pe(a.currentData??N(r)),be(a.currentData,[t],a.value));const c=await e.safeParseAsync(a.currentData);if(c.success)return w(),{validated:!0,errors:void 0};{const m=p(c.error,e);if(i.update===!0||i.update=="errors"){const l=N(s);d(f=>(z(f,b=>{if(b.key=="_errors")return b.set(void 0)}),z(m,b=>{if(b.key=="_errors")return be(f,[b.path],b.value);if(Array.isArray(b.value))return h(b.path,l)&&be(f,[b.path],b.value),"skip"}),f))}const g=x(m,t);return{validated:!0,errors:i.errors??(g==null?void 0:g.value)}}}else{const c=x(e,a.validationPath);if(c){if(c.value===void 0)return u();{const m=await c.value(a.value);return{validated:!0,errors:m&&(i.errors??m)}}}else throw new V("No Superforms validator found: "+t)}}function Ae(t){return Ft.apply_action(t)}function Kt(t){const e=JSON.parse(t);return e.data&&(e.data=mt(e.data)),e}function Xe(t){return HTMLElement.prototype.cloneNode.call(t)}function Xt(t,e=()=>{}){const r=async({action:s,result:i,reset:a})=>{i.type==="success"&&(a!==!1&&HTMLFormElement.prototype.reset.call(t),await bt()),(location.origin+location.pathname===s.origin+s.pathname||i.type==="redirect"||i.type==="error")&&Ae(i)};async function n(s){var g,l,f,b;if(((g=s.submitter)!=null&&g.hasAttribute("formmethod")?s.submitter.formMethod:Xe(t).method)!=="post")return;s.preventDefault();const a=new URL((l=s.submitter)!=null&&l.hasAttribute("formaction")?s.submitter.formAction:Xe(t).action),u=new FormData(t),h=(f=s.submitter)==null?void 0:f.getAttribute("name");h&&u.append(h,((b=s.submitter)==null?void 0:b.getAttribute("value"))??"");const d=new AbortController;let w=!1;const c=await e({action:a,cancel:()=>w=!0,controller:d,get data(){return u},formData:u,get form(){return t},formElement:t,submitter:s.submitter})??r;if(w)return;let m;try{const T=await fetch(a,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:u,signal:d.signal});m=Kt(await T.text()),m.type==="error"&&(m.status=T.status)}catch(T){if((T==null?void 0:T.name)==="AbortError")return;m={type:"error",error:T}}c({action:a,get data(){return u},formData:u,get form(){return t},formElement:t,update:T=>r({action:a,result:m,reset:T==null?void 0:T.reset}),result:m})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",n),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",n)}}}const Qt=(t,e=0)=>{const r=t.getBoundingClientRect();return r.top>=e&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth)},zt=(t,e=1.125,r="smooth")=>{const i=t.getBoundingClientRect().top+window.pageYOffset-window.innerHeight/(2*e);window.scrollTo({left:0,top:i,behavior:r})};var R;(function(t){t[t.Idle=0]="Idle",t[t.Submitting=1]="Submitting",t[t.Delayed=2]="Delayed",t[t.Timeout=3]="Timeout"})(R||(R={}));function Qe(t){!t.flashMessage||!ht||We(t)&&(document.cookie=`flash=; Max-Age=0; Path=${t.flashMessage.cookiePath??"/"};`)}function We(t){return!t.flashMessage||!ht?!1:t.syncFlashMessage}function er(t,e,r,n,s,i,a,u,h,d,w,p,c,m,g,l,f){d();const b=s;async function T(v){await Re(v,a,u,b,m)}function ae(v){return v&&(v instanceof HTMLSelectElement||v instanceof HTMLInputElement&&v.type=="radio")}async function se(v){if(!(a.validationMethod=="oninput"||a.validationMethod=="submit-only")){ae(v.target)&&await new Promise(U=>setTimeout(U,0));for(const U of N(g))T(U);g.set([])}}t.addEventListener("focusout",se);const Z=new Set;function y(v){const U=v.target;a.selectErrorText&&U.select()}function A(v){v.querySelectorAll("input").forEach(U=>{U.addEventListener("invalid",y)})}function C(v){v.querySelectorAll("input").forEach(U=>U.removeEventListener("invalid",y))}Rt(v=>{v.type=="goto"&&B.completed(!0)}),tt(()=>{Z.forEach(v=>C(v)),Z.clear(),t.removeEventListener("focusout",se),B.completed(!0)});function ee(v){function U(){if(a.selectErrorText){const M=de();M&&v!==M&&(C(M),Z.delete(M)),Z.has(v)||(A(v),Z.add(v))}te=v}let te;function de(){return te}function ge(M){return typeof a.autoFocusOnError=="boolean"?a.autoFocusOnError:!/iPhone|iPad|iPod|Android/i.test(M)}const me=async()=>{if(a.scrollToError=="off")return;const M=a.errorSelector;if(!M)return;await rt();let F;if(F=te.querySelector(M),!F)return;F=F.querySelector(M)??F;const $=a.stickyNavbar?document.querySelector(a.stickyNavbar):null;if(typeof a.scrollToError!="string"?F.scrollIntoView(a.scrollToError):Qt(F,($==null?void 0:$.offsetHeight)??0)||zt(F,void 0,a.scrollToError),!ge(navigator.userAgent))return;let k;if(k=F,["INPUT","SELECT","BUTTON","TEXTAREA"].includes(k.tagName)||(k=k.querySelector('input:not([type="hidden"]):not(.flatpickr-input), select, textarea')),k)try{k.focus({preventScroll:!0}),a.selectErrorText&&k.tagName=="INPUT"&&k.select()}catch{}};U();{let M=R.Idle,F,$;const k=D=>{M=D,e.set(M>=R.Submitting),r.set(M>=R.Delayed),n.set(M>=R.Timeout)};return{submitting:()=>{U(),k(M!=R.Delayed?R.Submitting:R.Delayed),F&&clearTimeout(F),$&&clearTimeout($),F=window.setTimeout(()=>{M==R.Submitting&&k(R.Delayed)},a.delayMs),$=window.setTimeout(()=>{M==R.Delayed&&k(R.Timeout)},a.timeoutMs)},completed:D=>{F&&clearTimeout(F),$&&clearTimeout($),F=$=0,k(R.Idle),D||setTimeout(me)},scrollToFirstError:()=>setTimeout(me),isSubmitting:()=>M===R.Submitting||M===R.Delayed}}}const B=ee(t);let L;return Xt(t,async v=>{var M;const U=v.cancel;let te=!1;function de(){return te=!0,U()}if(v.cancel=de,B.isSubmitting()&&a.multipleSubmits=="prevent")de();else{B.isSubmitting()&&a.multipleSubmits=="abort"&&L&&L.abort(),L=v.controller;for(const F of w.onSubmit)await F(v)}if(te)a.flashMessage&&Qe(a);else{const F=await vt(a,N(u),N(p),N(c),N(f));if(!F.valid){de();const $={type:"failure",status:(typeof a.SPA=="boolean"||(M=a.SPA)==null?void 0:M.failStatus)??400,data:{form:F}};setTimeout(()=>me({result:$}),0)}if(!te){switch(a.clearOnSubmit){case"errors-and-message":b.clear(),h.set(void 0);break;case"errors":b.clear();break;case"message":h.set(void 0);break}a.flashMessage&&(a.clearOnSubmit=="errors-and-message"||a.clearOnSubmit=="message")&&We(a)&&a.flashMessage.module.getFlash(Ee).set(void 0),B.submitting();const $="formData"in v?v.formData:v.data;if(a.SPA){de();const D={type:"success",status:200,data:{form:{valid:!0,posted:!0,errors:{},data:N(u),constraints:N(c),message:void 0,id:N(p)}}};setTimeout(()=>me({result:D}),0)}else if(a.dataType==="json"){const k=N(u),D=ge(pt(k),a.jsonChunkSize??5e5);for(const j of D)$.append("__superform_json",j);Object.keys(k).forEach(j=>{typeof $.get(j)=="string"&&$.delete(j)})}if(!a.SPA&&!$.has("__superform_id")){const k=N(p);k!==void 0&&$.set("__superform_id",k)}}}function ge(F,$){const k=Math.ceil(F.length/$),D=new Array(k);for(let j=0,q=0;j<k;++j,q+=$)D[j]=F.substring(q,q+$);return D}async function me(F){const $=F.result;L=null;let k=!1;const D={result:$,formEl:t,cancel:()=>k=!0};for(const j of w.onResult)await j(D);if(!k){if(($.type==="success"||$.type=="failure")&&$.data){const j=l($.data);if(!j.length)throw new V("No form data returned from ActionResult. Make sure you return { form } in the form actions.");for(const q of j){if(q.id!==N(p))continue;const Oe={form:q,formEl:t,cancel:()=>k=!0};for(const Se of w.onUpdate)await Se(Oe)}}if(!k){if($.type!=="error")$.type==="success"&&a.invalidateAll&&await bt(),a.applyAction?await Ae($):await i($);else{if(a.applyAction)if(a.onError=="apply")await Ae($);else{const j={type:"failure",status:Math.floor($.status||500),data:$};await Ae(j)}if(a.onError!=="apply"){const j={result:$,message:h};for(const q of w.onError)q!=="apply"&&await q(j)}}a.flashMessage&&$.type=="error"&&a.flashMessage.onError&&await a.flashMessage.onError({result:$,message:a.flashMessage.module.getFlash(Ee)})}}k&&a.flashMessage&&Qe(a),(k||$.type!="redirect")&&B.completed(k)}return me})}new TextEncoder;const tr={applyAction:!0,invalidateAll:!0,resetForm:!1,autoFocusOnError:"detect",scrollToError:"smooth",errorSelector:'[aria-invalid="true"],[data-invalid]',selectErrorText:!1,stickyNavbar:void 0,taintedMessage:"Do you want to leave this page? Changes you made may not be saved.",onSubmit:void 0,onResult:void 0,onUpdate:void 0,onUpdated:void 0,onError:t=>{console.warn("Unhandled Superform error, use onError event to handle it:",t.result.error)},dataType:"form",validators:void 0,defaultValidator:"keep",clearOnSubmit:"errors-and-message",delayMs:500,timeoutMs:8e3,multipleSubmits:"prevent",validation:void 0,SPA:void 0,validateMethod:"auto"};function rr(t,e={}){var Se;e={...tr,...e},e.SPA&&e.validators===void 0&&console.warn("No validators set for Superform in SPA mode. Add them to the validators option, or set it to false to disable this warning.");let r=e.id;!t||c(t)===!1?(((Se=e.warnings)==null?void 0:Se.noValidationAndConstraints)!==!1&&console.warn((t?"Form data sent directly to superForm instead of through superValidate. No initial data validation is made. ":"No form data sent to superForm, schema type safety cannot be guaranteed. ")+"Also, no constraints will exist for the form. Set the warnings.noValidationAndConstraints option to false to disable this warning."),t={valid:!1,posted:!1,errors:{},data:t??{},constraints:{}}):r===void 0&&(r=t.id);const n=N(Ee).form;if(n&&typeof n=="object"){for(const o of p(n).reverse())if(o.id===r){const _=t;t=o,t.valid&&e.resetForm&&(e.resetForm===!0||e.resetForm())&&(t=pe(_),t.message=o.message);break}}const s=t,i=pe(s);if(typeof i.valid!="boolean")throw new V("A non-validation object was passed to superForm. Check what's passed to its first parameter.");const a=W(s.errors),u=W(r),h={taintedMessage:e.taintedMessage,taintedFormState:pe(i.data)};function d(o=8){return Math.random().toString(36).substring(2,o+2)}function w(o){h.taintedFormState=pe(o)}function p(o){var E;const _=Object.values(o).filter(S=>c(S)!==!1);if(_.length>1&&((E=e.warnings)==null?void 0:E.duplicateId)!==!1){const S=new Set;for(const I of _)S.has(I.id)?console.warn(`Duplicate form id found: "${I.id}". Multiple forms will receive the same data. Use the id option to differentiate between them, or if this is intended, set warnings.duplicateId option to false to disable this message.`):S.add(I.id)}return _}function c(o){return!o||typeof o!="object"||!("valid"in o&&"errors"in o&&typeof o.valid=="boolean")?!1:"id"in o&&typeof o.id=="string"?o.id:void 0}function m(){e.taintedMessage=h.taintedMessage,r===void 0&&u.set(d())}function g(o){const _=W(o);return{subscribe:_.subscribe,set:(E,S={})=>(ge(E,h.taintedFormState,S.taint??!0),h.taintedFormState=pe(E),_.set(E)),update:(E,S={})=>_.update(I=>{const re=E(I);return ge(re,h.taintedFormState,S.taint??!0),h.taintedFormState=pe(I),re})}}const l=[u.subscribe(o=>r=o)];function f(o){l.push(o)}function b(){l.forEach(o=>o())}const T=g(s.data);function ae(o,_){if(!(!_||typeof _!="object")){if(Array.isArray(_))_.length>0&&ae(o,_[0]);else if(!(_ instanceof Date))throw new V(`Object found in form field "${o}". Set options.dataType = 'json' and use:enhance to use nested data structures.`)}}async function se(o,_){o.valid&&_&&e.resetForm&&(e.resetForm===!0||e.resetForm())?Z(o.message):D(o,_),j.onUpdated.length&&await rt();for(const E of j.onUpdated)E({form:o})}function Z(o,_,E){const S=pe(i);S.data={...S.data,..._},E!==void 0&&(S.id=E),D(S,!0,o)}const y=async(o,_)=>{if(o.type=="error")throw new V(`ActionResult of type "${o.type}" cannot be passed to update function.`);if(o.type=="redirect"){e.resetForm&&(e.resetForm===!0||e.resetForm())&&Z();return}if(typeof o.data!="object")throw new V("Non-object validation data returned from ActionResult.");const E=p(o.data);if(!E.length)throw new V("No form data returned from ActionResult. Make sure you return { form } in the form actions.");for(const S of E)S.id===r&&await se(S,_??(o.status>=200&&o.status<300))},A=W([]),C=W(s.message),ee=W(s.constraints),B=W(!1),L={subscribe:a.subscribe,set:a.set,update:a.update,clear:()=>yt(a,{undefinePath:null,clearFormLevelErrors:!0})},v=W();function U(){return N(v)}function te(o){if(o===null)throw new V("$tainted store contained null");if(typeof o=="object"){for(const _ of Object.values(o))if(te(_))return!0}return o===!0}async function de(o,_){if(e.validationMethod=="onblur"||e.validationMethod=="submit-only")return!1;let E=e.validationMethod==="oninput";if(!E){const S=N(L),I=S?Bt(S,o,{modifier:Ue=>{if(Ze(o,Ue))throw new V("Errors can only be added to form fields, not to arrays or objects in the schema. Path: "+Ue.path.slice(0,-1));return Ue.value}}):void 0;E=!!(I&&I.key in I.parent)}return E?(await Re(o,e,T,L,v,{taint:_}),!0):!1}async function ge(o,_,E){if(E===!1)return;if(E==="untaint-all"){v.set(void 0);return}let S=Zt(o,_);if(typeof E=="object"&&(typeof E.fields=="string"&&(E.fields=[E.fields]),S=E.fields.map(I=>Me(I)),E=!0),E===!0&&A.set(S),S.length){v.update(re=>(re||(re={}),be(re,S,E===!0?!0:void 0),re));let I=!1;for(const re of S)I=I||await de(re,E);I||await Gt(e,N(T),L)}}function me(o,_){v.set(o),w(_)}const M=W(!1),F=W(!1),$=W(!1),k=we(L,o=>o?Wt(o):[]);if(e.taintedMessage=void 0,tt(()=>{b();for(const o of Object.values(j))o.length=0}),e.dataType!=="json")for(const[o,_]of Object.entries(s.data))ae(o,_);function D(o,_,E){if(_&&me(typeof _=="boolean"?void 0:_,o.data),E=E??o.message,T.set(o.data,{taint:!1}),C.set(E),L.set(o.errors),u.set(o.id),B.set(o.posted),e.flashMessage&&We(e)){const S=e.flashMessage.module.getFlash(Ee);E&&N(S)===void 0&&S.set(E)}}const j={onSubmit:e.onSubmit?[e.onSubmit]:[],onResult:e.onResult?[e.onResult]:[],onUpdate:e.onUpdate?[e.onUpdate]:[],onUpdated:e.onUpdated?[e.onUpdated]:[],onError:e.onError?[e.onError]:[]};Dt(o=>{if(e.taintedMessage&&!N(M)){const _=U();_&&te(_)&&!window.confirm(e.taintedMessage)&&o.cancel()}}),f(Ee.subscribe(async o=>{if(!e.applyAction)return;function _(S){throw new V(`No form data found in ${S}. Make sure you return { form } in form actions and load functions.`)}const E=o.status>=200&&o.status<300;if(o.form&&typeof o.form=="object"){if(o.form.type=="error")return;const S=p(o.form);S.length||_("$page.form (ActionData)");for(const I of S)I.id===r&&await se(I,E)}else if(o.data&&typeof o.data=="object"){const S=p(o.data);for(const I of S)I.id===r&&D(I,E)}}));const q=Object.fromEntries(Object.keys(i.data).map(o=>[o,{name:o,value:ye(T,o),errors:ye(L,o),constraints:ye(ee,o)}]));function Oe(o,_){return o===void 0?vt(e,N(T),r,N(ee),!1):Re(Me(o),e,T,L,v,_)}return{form:T,formId:u,errors:L,message:C,constraints:ee,fields:q,tainted:v,submitting:we(M,o=>o),delayed:we(F,o=>o),timeout:we($,o=>o),options:e,capture:function(){return{valid:i.valid,posted:N(B),errors:N(L),data:N(T),constraints:N(ee),message:N(C),id:r,tainted:N(v)}},restore:function(o){return D(o,o.tainted??!0)},validate:Oe,enhance:(o,_)=>{if(_){if(_.onError){if(e.onError==="apply")throw new V('options.onError is set to "apply", cannot add any onError events.');if(_.onError==="apply")throw new V('Cannot add "apply" as onError event in use:enhance.');j.onError.push(_.onError)}_.onResult&&j.onResult.push(_.onResult),_.onSubmit&&j.onSubmit.push(_.onSubmit),_.onUpdate&&j.onUpdate.push(_.onUpdate),_.onUpdated&&j.onUpdated.push(_.onUpdated)}return er(o,M,F,$,L,y,e,T,C,m,j,u,ee,v,A,p,B)},allErrors:k,posted:B,reset:o=>Z(o!=null&&o.keepMessage?N(C):void 0,o==null?void 0:o.data,o==null?void 0:o.id)}}function ze(t){let e,r;return{c(){e=X("span"),r=fe(t[3]),this.h()},l(n){e=Q(n,"SPAN",{class:!0});var s=he(e);r=ce(s,t[3]),s.forEach(P),this.h()},h(){ne(e,"class","invalid svelte-1ch2xak")},m(n,s){O(n,e,s),H(e,r)},p(n,s){s&8&&lt(r,n[3])},d(n){n&&P(e)}}}function nr(t){let e,r,n,s,i,a,u,h,d,w=[{type:"checkbox"},{name:t[0]},{__value:"true"},t[5]],p={};for(let l=0;l<w.length;l+=1)p=ve(p,w[l]);const c=t[8].default,m=nt(c,t,t[7],null);let g=t[3]&&ze(t);return{c(){e=X("label"),r=X("input"),n=J(),s=X("span"),m&&m.c(),i=J(),g&&g.c(),a=Te(),this.h()},l(l){e=Q(l,"LABEL",{class:!0});var f=he(e);r=Q(f,"INPUT",{type:!0,name:!0}),n=G(f),s=Q(f,"SPAN",{class:!0});var b=he(s);m&&m.l(b),b.forEach(P),f.forEach(P),i=G(l),g&&g.l(l),a=Te(),this.h()},h(){Fe(r,p),Ne(r,"svelte-1ch2xak",!0),ne(s,"class","display-name"),ne(e,"class","svelte-1ch2xak")},m(l,f){O(l,e,f),H(e,r),r.autofocus&&r.focus(),r.checked=t[2],H(e,n),H(e,s),m&&m.m(s,null),O(l,i,f),g&&g.m(l,f),O(l,a,f),u=!0,h||(d=at(r,"change",t[9]),h=!0)},p(l,[f]){Fe(r,p=ft(w,[{type:"checkbox"},(!u||f&1)&&{name:l[0]},{__value:"true"},f&32&&l[5]])),f&4&&(r.checked=l[2]),Ne(r,"svelte-1ch2xak",!0),m&&m.p&&(!u||f&128)&&st(m,c,l,l[7],u?ot(c,l[7],f,null):it(l[7]),null),l[3]?g?g.p(l,f):(g=ze(l),g.c(),g.m(a.parentNode,a)):g&&(g.d(1),g=null)},i(l){u||(Y(m,l),u=!0)},o(l){K(m,l),u=!1},d(l){l&&(P(e),P(i),P(a)),m&&m.d(l),g&&g.d(l),h=!1,d()}}}function ar(t,e,r){let n;const s=["form","field"];let i=Pe(e,s),a,u=wt,h=()=>(u(),u=$t(n,b=>r(2,a=b)),n),d;t.$$.on_destroy.push(()=>u());let{$$slots:w={},$$scope:p}=e,{form:c}=e,{field:m}=e;const{value:g,errors:l}=gt(c,m);ke(t,l,b=>r(3,d=b));function f(){a=this.checked,n.set(a)}return t.$$set=b=>{e=ve(ve({},e),ut(b)),r(5,i=Pe(e,s)),"form"in b&&r(6,c=b.form),"field"in b&&r(0,m=b.field),"$$scope"in b&&r(7,p=b.$$scope)},h(r(1,n=g)),[m,n,a,d,l,i,c,p,w,f]}class sr extends Be{constructor(e){super(),He(this,e,ar,nr,Ve,{form:6,field:0})}}function et(t){let e,r;return{c(){e=X("span"),r=fe(t[1]),this.h()},l(n){e=Q(n,"SPAN",{class:!0});var s=he(e);r=ce(s,t[1]),s.forEach(P),this.h()},h(){ne(e,"class","invalid svelte-hpvgb9")},m(n,s){O(n,e,s),H(e,r)},p(n,s){s&2&&lt(r,n[1])},d(n){n&&P(e)}}}function ir(t){let e,r,n,s,i,a,u,h,d,w;const p=t[10].default,c=nt(p,t,t[9],null);let m=[{name:t[0]},{type:"text"},{"aria-invalid":i=t[1]?"true":void 0},t[2],t[7]],g={};for(let f=0;f<m.length;f+=1)g=ve(g,m[f]);let l=t[1]&&et(t);return{c(){e=X("label"),r=X("span"),c&&c.c(),n=J(),s=X("input"),a=J(),l&&l.c(),u=Te(),this.h()},l(f){e=Q(f,"LABEL",{class:!0});var b=he(e);r=Q(b,"SPAN",{class:!0});var T=he(r);c&&c.l(T),T.forEach(P),n=G(b),s=Q(b,"INPUT",{name:!0,type:!0,"aria-invalid":!0}),b.forEach(P),a=G(f),l&&l.l(f),u=Te(),this.h()},h(){ne(r,"class","display-name"),Fe(s,g),Ne(s,"svelte-hpvgb9",!0),ne(e,"class","svelte-hpvgb9")},m(f,b){O(f,e,b),H(e,r),c&&c.m(r,null),H(e,n),H(e,s),s.autofocus&&s.focus(),Je(s,t[3]),O(f,a,b),l&&l.m(f,b),O(f,u,b),h=!0,d||(w=at(s,"input",t[11]),d=!0)},p(f,[b]){c&&c.p&&(!h||b&512)&&st(c,p,f,f[9],h?ot(p,f[9],b,null):it(f[9]),null),Fe(s,g=ft(m,[(!h||b&1)&&{name:f[0]},{type:"text"},(!h||b&2&&i!==(i=f[1]?"true":void 0))&&{"aria-invalid":i},b&4&&f[2],b&128&&f[7]])),b&8&&s.value!==f[3]&&Je(s,f[3]),Ne(s,"svelte-hpvgb9",!0),f[1]?l?l.p(f,b):(l=et(f),l.c(),l.m(u.parentNode,u)):l&&(l.d(1),l=null)},i(f){h||(Y(c,f),h=!0)},o(f){K(c,f),h=!1},d(f){f&&(P(e),P(a),P(u)),c&&c.d(f),l&&l.d(f),d=!1,w()}}}function or(t,e,r){const n=["form","field"];let s=Pe(e,n),i,a,u,{$$slots:h={},$$scope:d}=e,{form:w}=e,{field:p}=e;const{value:c,errors:m,constraints:g}=gt(w,p);ke(t,c,f=>r(3,u=f)),ke(t,m,f=>r(1,i=f)),ke(t,g,f=>r(2,a=f));function l(){u=this.value,c.set(u)}return t.$$set=f=>{e=ve(ve({},e),ut(f)),r(7,s=Pe(e,n)),"form"in f&&r(8,w=f.form),"field"in f&&r(0,p=f.field),"$$scope"in f&&r(9,d=f.$$scope)},[p,i,a,u,c,m,g,s,w,d,h,l]}class ur extends Be{constructor(e){super(),He(this,e,or,ir,Ve,{form:8,field:0})}}function lr(t){let e;return{c(){e=fe("Username vergeben")},l(r){e=ce(r,"Username vergeben")},m(r,n){O(r,e,n)},d(r){r&&P(e)}}}function fr(t){let e;return{c(){e=fe("Schritt 1 von 3")},l(r){e=ce(r,"Schritt 1 von 3")},m(r,n){O(r,e,n)},d(r){r&&P(e)}}}function cr(t){let e;return{c(){e=fe(`Willkommen zum Online-Spiel The Hidden Threat*. Gleich geht es los. Nach der Vergabe des
    Usernamen werden Sie in die Lobby geleitet.`)},l(r){e=ce(r,`Willkommen zum Online-Spiel The Hidden Threat*. Gleich geht es los. Nach der Vergabe des
    Usernamen werden Sie in die Lobby geleitet.`)},m(r,n){O(r,e,n)},d(r){r&&P(e)}}}function dr(t){let e;return{c(){e=fe("Dein Username")},l(r){e=ce(r,"Dein Username")},m(r,n){O(r,e,n)},d(r){r&&P(e)}}}function mr(t){let e;return{c(){e=fe("Bitte gib Dir einen Username mit maximal 20 Buchstaben.")},l(r){e=ce(r,"Bitte gib Dir einen Username mit maximal 20 Buchstaben.")},m(r,n){O(r,e,n)},d(r){r&&P(e)}}}function pr(t){let e;return{c(){e=fe(`Hiermit stimme ich der Speicherung meiner eingegebenen Daten zu und bestätige dass ich
      mindestens 18 Jahre alt bin.*`)},l(r){e=ce(r,`Hiermit stimme ich der Speicherung meiner eingegebenen Daten zu und bestätige dass ich
      mindestens 18 Jahre alt bin.*`)},m(r,n){O(r,e,n)},d(r){r&&P(e)}}}function hr(t){let e;return{c(){e=fe("Bestätigen und weiter")},l(r){e=ce(r,"Bestätigen und weiter")},m(r,n){O(r,e,n)},d(r){r&&P(e)}}}function br(t){let e,r;return e=new Tt({props:{type:"submit",primary:!0,$$slots:{default:[hr]},$$scope:{ctx:t}}}),{c(){ie(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,s){ue(e,n,s),r=!0},p(n,s){const i={};s&4&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){r||(Y(e.$$.fragment,n),r=!0)},o(n){K(e.$$.fragment,n),r=!1},d(n){le(e,n)}}}function gr(t){let e,r,n,s,i,a,u,h,d,w,p,c,m,g,l,f,b,T='* Weitere Informationen zum Spiel sind auf unserer <a href="/">Website</a> zufinden.',ae,se,Z;return e=new Ye({props:{separator:!0,$$slots:{info:[fr],default:[lr]},$$scope:{ctx:t}}}),n=new Ge({props:{$$slots:{default:[cr]},$$scope:{ctx:t}}}),u=new Ye({props:{centered:!0,$$slots:{default:[dr]},$$scope:{ctx:t}}}),d=new Ge({props:{$$slots:{default:[mr]},$$scope:{ctx:t}}}),p=new ur({props:{form:t[0],field:"userName",placeholder:"z.B. Vor-und Nachname, Spitzname, Initalen, etc."}}),m=new sr({props:{form:t[0],field:"acceptedTos",$$slots:{default:[pr]},$$scope:{ctx:t}}}),l=new At({props:{$$slots:{default:[br]},$$scope:{ctx:t}}}),{c(){ie(e.$$.fragment),r=J(),ie(n.$$.fragment),s=J(),i=X("form"),a=X("div"),ie(u.$$.fragment),h=J(),ie(d.$$.fragment),w=J(),ie(p.$$.fragment),c=J(),ie(m.$$.fragment),g=J(),ie(l.$$.fragment),f=J(),b=X("p"),b.innerHTML=T,this.h()},l(y){oe(e.$$.fragment,y),r=G(y),oe(n.$$.fragment,y),s=G(y),i=Q(y,"FORM",{method:!0,class:!0});var A=he(i);a=Q(A,"DIV",{class:!0});var C=he(a);oe(u.$$.fragment,C),h=G(C),oe(d.$$.fragment,C),w=G(C),oe(p.$$.fragment,C),C.forEach(P),c=G(A),oe(m.$$.fragment,A),g=G(A),oe(l.$$.fragment,A),A.forEach(P),f=G(y),b=Q(y,"P",{class:!0,"data-svelte-h":!0}),Et(b)!=="svelte-1iim19c"&&(b.innerHTML=T),this.h()},h(){ne(a,"class","field svelte-vvzfxb"),ne(i,"method","post"),ne(i,"class","svelte-vvzfxb"),ne(b,"class","more-info text-sm svelte-vvzfxb")},m(y,A){ue(e,y,A),O(y,r,A),ue(n,y,A),O(y,s,A),O(y,i,A),H(i,a),ue(u,a,null),H(a,h),ue(d,a,null),H(a,w),ue(p,a,null),H(i,c),ue(m,i,null),H(i,g),ue(l,i,null),O(y,f,A),O(y,b,A),ae=!0,se||(Z=St(t[0].enhance(i)),se=!0)},p(y,A){const C={};A&4&&(C.$$scope={dirty:A,ctx:y}),e.$set(C);const ee={};A&4&&(ee.$$scope={dirty:A,ctx:y}),n.$set(ee);const B={};A&4&&(B.$$scope={dirty:A,ctx:y}),u.$set(B);const L={};A&4&&(L.$$scope={dirty:A,ctx:y}),d.$set(L);const v={};A&4&&(v.$$scope={dirty:A,ctx:y}),m.$set(v);const U={};A&4&&(U.$$scope={dirty:A,ctx:y}),l.$set(U)},i(y){ae||(Y(e.$$.fragment,y),Y(n.$$.fragment,y),Y(u.$$.fragment,y),Y(d.$$.fragment,y),Y(p.$$.fragment,y),Y(m.$$.fragment,y),Y(l.$$.fragment,y),ae=!0)},o(y){K(e.$$.fragment,y),K(n.$$.fragment,y),K(u.$$.fragment,y),K(d.$$.fragment,y),K(p.$$.fragment,y),K(m.$$.fragment,y),K(l.$$.fragment,y),ae=!1},d(y){y&&(P(r),P(s),P(i),P(f),P(b)),le(e,y),le(n,y),le(u),le(d),le(p),le(m),le(l),se=!1,Z()}}}function _r(t){let e,r;return e=new kt({props:{paddedContent:!0,showFooter:!0,$$slots:{default:[gr]},$$scope:{ctx:t}}}),{c(){ie(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,s){ue(e,n,s),r=!0},p(n,[s]){const i={};s&4&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){r||(Y(e.$$.fragment,n),r=!0)},o(n){K(e.$$.fragment,n),r=!1},d(n){le(e,n)}}}function yr(t,e,r){let{data:n}=e;const s=rr(n);return t.$$set=i=>{"data"in i&&r(1,n=i.data)},[s,n]}class Nr extends Be{constructor(e){super(),He(this,e,yr,_r,Ve,{data:1})}}export{Nr as U};
