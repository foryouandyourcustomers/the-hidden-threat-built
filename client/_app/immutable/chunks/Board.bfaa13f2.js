import{s as R,v as A,e as S,a as y,c as B,b as F,l as Z,g as V,f as H,m as z,i as W,h as C,w as P,x as T,y as j,O as N,D as I,L as U,P as ne,H as q,r as le,k as re,K as ie,M as ae}from"./scheduler.036a2d74.js";import{S as X,i as Y,t as M,b as k,c as J,a as Q,m as $,g as fe,e as de,d as x}from"./index.e2632973.js";import{r as ee}from"./index.07541d6e.js";import{g as ue}from"./game-context.fd63b07d.js";import{F as ce}from"./FooterNav.5db6a55f.js";function _e(s,t){return s===t}const he=(s,t,e=_e)=>{let n,o=t(s.getSnapshot());return ee(o,p=>{const v=m=>{const g=t(m);e(o,g)||(o=g,p(g))};return v(s.getSnapshot()),n=s.subscribe(v),()=>{n.unsubscribe()}})},te=(s,t)=>{const e=t.users.find(n=>n.id===s);if(!e)throw new Error(`The user with id ${s} was not found.`);return e},Ie=(s,t)=>te(s,t).isAdmin,me=s=>te(s.userId,s);function pe(s){let t,e,n='<svg width="346" height="53" viewBox="0 0 346 53" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M45 0H0l54 53-9-53Z" fill="#F03A50"></path><path d="M45 0h33L54 53 45 0Z" fill="#A40224"></path><path d="M346 38 330 0H78L54 53l292-15Z" fill="#D32746"></path></svg>',o,r,p="The hidden threat",v,m;const g=s[1].default,a=A(g,s,s[0],null);return{c(){t=S("div"),e=S("div"),e.innerHTML=n,o=y(),r=S("div"),r.textContent=p,v=y(),a&&a.c(),this.h()},l(f){t=B(f,"DIV",{class:!0});var d=F(t);e=B(d,"DIV",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-17ojy9"&&(e.innerHTML=n),o=V(d),r=B(d,"DIV",{class:!0,"data-svelte-h":!0}),Z(r)!=="svelte-xbe4by"&&(r.textContent=p),v=V(d),a&&a.l(d),d.forEach(H),this.h()},h(){z(e,"class","backdrop svelte-qfojfz"),z(r,"class","title svelte-qfojfz"),z(t,"class","header svelte-qfojfz")},m(f,d){W(f,t,d),C(t,e),C(t,o),C(t,r),C(t,v),a&&a.m(t,null),m=!0},p(f,[d]){a&&a.p&&(!m||d&1)&&P(a,g,f,f[0],m?j(g,f[0],d,null):T(f[0]),null)},i(f){m||(M(a,f),m=!0)},o(f){k(a,f),m=!1},d(f){f&&H(t),a&&a.d(f)}}}function ve(s,t,e){let{$$slots:n={},$$scope:o}=t;return s.$$set=r=>{"$$scope"in r&&e(0,o=r.$$scope)},[o,n]}class ge extends X{constructor(t){super(),Y(this,t,ve,pe,R,{})}}const we=s=>({}),G=s=>({}),be=s=>({}),K=s=>({});function Me(s){let t;const e=s[14].header,n=A(e,s,s[18],K);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,r){n&&n.m(o,r),t=!0},p(o,r){n&&n.p&&(!t||r&262144)&&P(n,e,o,o[18],t?j(e,o[18],r,be):T(o[18]),K)},i(o){t||(M(n,o),t=!0)},o(o){k(n,o),t=!1},d(o){n&&n.d(o)}}}function O(s){let t,e,n;return e=new ce({}),{c(){t=S("div"),J(e.$$.fragment),this.h()},l(o){t=B(o,"DIV",{class:!0});var r=F(t);Q(e.$$.fragment,r),r.forEach(H),this.h()},h(){z(t,"class","footer svelte-18ll0tp")},m(o,r){W(o,t,r),$(e,t,null),n=!0},i(o){n||(M(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){o&&H(t),x(e)}}}function Ce(s){let t,e,n,o,r,p,v,m,g,a,f,d;N(s[15]),n=new ge({props:{$$slots:{default:[Me]},$$scope:{ctx:s}}});const b=s[14].default,_=A(b,s,s[18],null),D=s[14].overlays,h=A(D,s,s[18],G);let i=s[1]&&O();return{c(){t=S("div"),e=S("div"),J(n.$$.fragment),o=y(),r=S("div"),_&&_.c(),p=y(),h&&h.c(),v=y(),i&&i.c(),this.h()},l(l){t=B(l,"DIV",{class:!0});var u=F(t);e=B(u,"DIV",{class:!0});var w=F(e);Q(n.$$.fragment,w),o=V(w),r=B(w,"DIV",{class:!0});var E=F(r);_&&_.l(E),E.forEach(H),p=V(w),h&&h.l(w),v=V(w),i&&i.l(w),w.forEach(H),u.forEach(H),this.h()},h(){z(r,"class","content svelte-18ll0tp"),I(r,"padded",s[2]),z(e,"class",m="board "+(s[9]?`side-${s[9]}`:"")+" svelte-18ll0tp"),N(()=>s[17].call(e)),I(e,"backdrop",s[0]),I(e,"with-footer",s[1]),z(t,"class","board-wrapper svelte-18ll0tp"),U(t,"--board-scale",s[8])},m(l,u){W(l,t,u),C(t,e),$(n,e,null),C(e,o),C(e,r),_&&_.m(r,null),C(e,p),h&&h.m(e,null),C(e,v),i&&i.m(e,null),s[16](e),g=ne(e,s[17].bind(e)),a=!0,f||(d=[q(window,"resize",s[12]),q(window,"resize",s[15]),q(e,"mousemove",s[11])],f=!0)},p(l,[u]){const w={};u&262144&&(w.$$scope={dirty:u,ctx:l}),n.$set(w),_&&_.p&&(!a||u&262144)&&P(_,b,l,l[18],a?j(b,l[18],u,null):T(l[18]),null),(!a||u&4)&&I(r,"padded",l[2]),h&&h.p&&(!a||u&262144)&&P(h,D,l,l[18],a?j(D,l[18],u,we):T(l[18]),G),l[1]?i?u&2&&M(i,1):(i=O(),i.c(),M(i,1),i.m(e,null)):i&&(fe(),k(i,1,1,()=>{i=null}),de()),(!a||u&512&&m!==(m="board "+(l[9]?`side-${l[9]}`:"")+" svelte-18ll0tp"))&&z(e,"class",m),(!a||u&513)&&I(e,"backdrop",l[0]),(!a||u&514)&&I(e,"with-footer",l[1]),u&256&&U(t,"--board-scale",l[8])},i(l){a||(M(n.$$.fragment,l),M(_,l),M(h,l),M(i),a=!0)},o(l){k(n.$$.fragment,l),k(_,l),k(h,l),k(i),a=!1},d(l){l&&H(t),x(n),_&&_.d(l),h&&h.d(l),i&&i.d(),s[16](null),g(),f=!1,le(d)}}}function ke(s,t,e){let n,{$$slots:o={},$$scope:r}=t,{reportMousePosition:p=void 0}=t,{showBackdrop:v=!1}=t,{showFooter:m=!1}=t,{paddedContent:g=!1}=t;const a=ue(),f=a?he(a.machine.service,({context:c})=>{const L=me(c);if(L.isAdmin)return L.side}):ee(void 0);re(s,f,c=>e(9,n=c));let d,b=1,_=1,D=1,h=1,i=1;const l=c=>{if(!p)return;const L=(c.clientX-d.offsetLeft)/b,oe=(c.clientY-d.offsetTop)/_;p([(L-(1-i)/2)/i,(oe-(1-i)/2)/i])},u=()=>{e(8,i=Math.min(D/(b+20),h/(_+20))),i>=1.3?e(8,i=1.3):e(8,i=Math.min(i,1))};ie(u);function w(){e(6,D=window.innerWidth),e(7,h=window.innerHeight)}function E(c){ae[c?"unshift":"push"](()=>{d=c,e(3,d)})}function se(){b=this.clientWidth,_=this.clientHeight,e(4,b),e(5,_)}return s.$$set=c=>{"reportMousePosition"in c&&e(13,p=c.reportMousePosition),"showBackdrop"in c&&e(0,v=c.showBackdrop),"showFooter"in c&&e(1,m=c.showFooter),"paddedContent"in c&&e(2,g=c.paddedContent),"$$scope"in c&&e(18,r=c.$$scope)},[v,m,g,d,b,_,D,h,i,n,f,l,u,p,o,w,E,se,r]}class ye extends X{constructor(t){super(),Y(this,t,ke,Ce,R,{reportMousePosition:13,showBackdrop:0,showFooter:1,paddedContent:2})}}export{ye as B,he as a,te as b,me as g,Ie as u};
