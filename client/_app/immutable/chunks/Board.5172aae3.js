import{$,a0 as x,s as Y,v as D,e as M,a as A,c as S,b as E,l as ee,g as T,f as b,m as C,i as J,h as k,w as V,x as P,y as W,N as j,B as I,I as G,a1 as se,a2 as q,r as te,k as ne,H as oe,J as ae}from"./scheduler.6b9f5a51.js";import{S as K,i as L,t as y,b as B,c as le,a as ie,m as re,d as de}from"./index.994f439d.js";import{r as R}from"./index.39a8c634.js";function fe(e,t){return e===t}const ue=(e,t,s=fe)=>{let o,a=t(e.getSnapshot());return R(a,h=>{const r=d=>{const l=t(d);s(a,l)||(a=l,h(l))};return r(e.getSnapshot()),o=e.subscribe(r),()=>{o.unsubscribe()}})},X={},ye=e=>{$(X,e)},ce=()=>x(X),F=(e,t)=>{const s=t.users.find(o=>o.id===e);if(!s)throw new Error(`The user with id ${e} was not found.`);return s},Be=(e,t)=>F(e,t).isAdmin,_e=e=>F(e.userId,e);function he(e){let t,s,o="The hidden threat",a,i;const h=e[1].default,r=D(h,e,e[0],null);return{c(){t=M("div"),s=M("div"),s.textContent=o,a=A(),r&&r.c(),this.h()},l(d){t=S(d,"DIV",{class:!0});var l=E(t);s=S(l,"DIV",{class:!0,"data-svelte-h":!0}),ee(s)!=="svelte-xbe4by"&&(s.textContent=o),a=T(l),r&&r.l(l),l.forEach(b),this.h()},h(){C(s,"class","title svelte-17fjqxi"),C(t,"class","header svelte-17fjqxi")},m(d,l){J(d,t,l),k(t,s),k(t,a),r&&r.m(t,null),i=!0},p(d,[l]){r&&r.p&&(!i||l&1)&&V(r,h,d,d[0],i?W(h,d[0],l,null):P(d[0]),null)},i(d){i||(y(r,d),i=!0)},o(d){B(r,d),i=!1},d(d){d&&b(t),r&&r.d(d)}}}function me(e,t,s){let{$$slots:o={},$$scope:a}=t;return e.$$set=i=>{"$$scope"in i&&s(0,a=i.$$scope)},[a,o]}class ve extends K{constructor(t){super(),L(this,t,me,he,Y,{})}}const pe=e=>({}),N=e=>({}),ge=e=>({}),U=e=>({});function we(e){let t;const s=e[13].header,o=D(s,e,e[17],U);return{c(){o&&o.c()},l(a){o&&o.l(a)},m(a,i){o&&o.m(a,i),t=!0},p(a,i){o&&o.p&&(!t||i&131072)&&V(o,s,a,a[17],t?W(s,a[17],i,ge):P(a[17]),U)},i(a){t||(y(o,a),t=!0)},o(a){B(o,a),t=!1},d(a){o&&o.d(a)}}}function be(e){let t,s,o,a,i,h,r,d,l,w,p;j(e[14]),o=new ve({props:{$$slots:{default:[we]},$$scope:{ctx:e}}});const v=e[13].default,f=D(v,e,e[17],null),g=e[13].overlays,c=D(g,e,e[17],N);return{c(){t=M("div"),s=M("div"),le(o.$$.fragment),a=A(),i=M("div"),f&&f.c(),h=A(),c&&c.c(),this.h()},l(n){t=S(n,"DIV",{class:!0});var _=E(t);s=S(_,"DIV",{class:!0});var m=E(s);ie(o.$$.fragment,m),a=T(m),i=S(m,"DIV",{class:!0});var z=E(i);f&&f.l(z),z.forEach(b),h=T(m),c&&c.l(m),m.forEach(b),_.forEach(b),this.h()},h(){C(i,"class","content svelte-ovklwv"),I(i,"padded",e[1]),C(s,"class",r="board "+(e[8]?`side-${e[8]}`:"")+" svelte-ovklwv"),j(()=>e[16].call(s)),I(s,"backdrop",e[0]),C(t,"class","board-wrapper svelte-ovklwv"),G(t,"--board-scale",e[7])},m(n,_){J(n,t,_),k(t,s),re(o,s,null),k(s,a),k(s,i),f&&f.m(i,null),k(s,h),c&&c.m(s,null),e[15](s),d=se(s,e[16].bind(s)),l=!0,w||(p=[q(window,"resize",e[11]),q(window,"resize",e[14]),q(s,"mousemove",e[10])],w=!0)},p(n,[_]){const m={};_&131072&&(m.$$scope={dirty:_,ctx:n}),o.$set(m),f&&f.p&&(!l||_&131072)&&V(f,v,n,n[17],l?W(v,n[17],_,null):P(n[17]),null),(!l||_&2)&&I(i,"padded",n[1]),c&&c.p&&(!l||_&131072)&&V(c,g,n,n[17],l?W(g,n[17],_,pe):P(n[17]),N),(!l||_&256&&r!==(r="board "+(n[8]?`side-${n[8]}`:"")+" svelte-ovklwv"))&&C(s,"class",r),(!l||_&257)&&I(s,"backdrop",n[0]),_&128&&G(t,"--board-scale",n[7])},i(n){l||(y(o.$$.fragment,n),y(f,n),y(c,n),l=!0)},o(n){B(o.$$.fragment,n),B(f,n),B(c,n),l=!1},d(n){n&&b(t),de(o),f&&f.d(n),c&&c.d(n),e[15](null),d(),w=!1,te(p)}}}function Ce(e,t,s){let o,{$$slots:a={},$$scope:i}=t,{reportMousePosition:h=void 0}=t,{showBackdrop:r=!1}=t,{paddedContent:d=!1}=t;const l=ce(),w=l?ue(l.machine.service,({context:u})=>{const H=_e(u);if(H.isAdmin)return H.side}):R(void 0);ne(e,w,u=>s(8,o=u));let p,v=1,f=1,g=1,c=1,n=1;const _=u=>{if(!h)return;const H=(u.clientX-p.offsetLeft)/v,Z=(u.clientY-p.offsetTop)/f;h([(H-(1-n)/2)/n,(Z-(1-n)/2)/n])},m=()=>{s(7,n=Math.min(g/(v+20),c/(f+20))),n>=1.3?s(7,n=1.3):s(7,n=Math.min(n,1))};oe(m);function z(){s(5,g=window.innerWidth),s(6,c=window.innerHeight)}function O(u){ae[u?"unshift":"push"](()=>{p=u,s(2,p)})}function Q(){v=this.clientWidth,f=this.clientHeight,s(3,v),s(4,f)}return e.$$set=u=>{"reportMousePosition"in u&&s(12,h=u.reportMousePosition),"showBackdrop"in u&&s(0,r=u.showBackdrop),"paddedContent"in u&&s(1,d=u.paddedContent),"$$scope"in u&&s(17,i=u.$$scope)},[r,d,p,v,f,g,c,n,o,w,_,m,h,a,z,O,Q,i]}class ze extends K{constructor(t){super(),L(this,t,Ce,be,Y,{reportMousePosition:12,showBackdrop:0,paddedContent:1})}}export{ze as B,ce as a,ue as b,F as c,_e as g,ye as s,Be as u};
