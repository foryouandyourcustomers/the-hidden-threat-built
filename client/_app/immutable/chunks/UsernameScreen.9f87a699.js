import{ac as F,a3 as rt,ab as nt,s as Ve,F as ve,x as at,e as se,a as Y,I as Ne,c as ie,b as me,g as K,f as P,ad as Te,D as Fe,m as fe,i as O,h as H,H as st,y as it,z as ot,A as ut,ae as Pe,k as ke,a9 as ft,t as oe,d as ue,j as lt,n as $t,q as Et,af as Je,ag as St}from"./scheduler.9575fd4f.js";import{S as Be,i as He,t as Z,b as q,c as te,a as re,m as ne,d as ae}from"./index.ae3d3fc3.js";import{B as kt}from"./Board.0410d1d0.js";import{P as Ge,A as At,B as Ye}from"./Paragraph.11b24d6f.js";import{g as ct,H as Ke}from"./Heading.db207678.js";import{j as xe,k as Nt}from"./singletons.271b7eb9.js";import{d as we,w as G}from"./index.a8ce1c85.js";import{U as dt,N as Tt,P as Ft,a as Pt,b as mt,H as Mt,p as pt}from"./parse.7d180a0f.js";import{p as Ee}from"./stores.f41d12d8.js";const jt=!0;class Ce extends Error{constructor(e,r){super(e),this.name="DevalueError",this.path=r.join("")}}function Xe(t){return Object(t)!==t}const It=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ot(t){const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===It}function Ut(t){return Object.prototype.toString.call(t).slice(8,-1)}function Ct(t){switch(t){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return t<" "?`\\u${t.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}function ge(t){let e="",r=0;const a=t.length;for(let s=0;s<a;s+=1){const i=t[s],n=Ct(i);n&&(e+=t.slice(r,s)+n,r=s+1)}return`"${r===0?t:e+t.slice(r)}"`}function ht(t,e){const r=[],a=new Map,s=[];for(const d in e)s.push({key:d,fn:e[d]});const i=[];let n=0;function u(d){if(typeof d=="function")throw new Ce("Cannot stringify a function",i);if(a.has(d))return a.get(d);if(d===void 0)return dt;if(Number.isNaN(d))return Tt;if(d===1/0)return Ft;if(d===-1/0)return Pt;if(d===0&&1/d<0)return mt;const y=n++;a.set(d,y);for(const{key:c,fn:m}of s){const b=m(d);if(b)return r[y]=`["${c}",${u(b)}]`,y}let h="";if(Xe(d))h=De(d);else switch(Ut(d)){case"Number":case"String":case"Boolean":h=`["Object",${De(d)}]`;break;case"BigInt":h=`["BigInt",${d}]`;break;case"Date":h=`["Date","${d.toISOString()}"]`;break;case"RegExp":const{source:m,flags:b}=d;h=b?`["RegExp",${ge(m)},"${b}"]`:`["RegExp",${ge(m)}]`;break;case"Array":h="[";for(let f=0;f<d.length;f+=1)f>0&&(h+=","),f in d?(i.push(`[${f}]`),h+=u(d[f]),i.pop()):h+=Mt;h+="]";break;case"Set":h='["Set"';for(const f of d)h+=`,${u(f)}`;h+="]";break;case"Map":h='["Map"';for(const[f,l]of d)i.push(`.get(${Xe(f)?De(f):"..."})`),h+=`,${u(f)},${u(l)}`;h+="]";break;default:if(!Ot(d))throw new Ce("Cannot stringify arbitrary non-POJOs",i);if(Object.getOwnPropertySymbols(d).length>0)throw new Ce("Cannot stringify POJOs with symbolic keys",i);if(Object.getPrototypeOf(d)===null){h='["null"';for(const f in d)i.push(`.${f}`),h+=`,${ge(f)},${u(d[f])}`,i.pop();h+="]"}else{h="{";let f=!1;for(const l in d)f&&(h+=","),f=!0,i.push(`.${l}`),h+=`${ge(l)}:${u(d[l])}`,i.pop();h+="}"}}return r[y]=h,y}const p=u(t);return p<0?`${p}`:`[${r.join(",")}]`}function De(t){const e=typeof t;return e==="string"?ge(t):t instanceof String?ge(t.toString()):t===void 0?dt.toString():t===0&&1/t<0?mt.toString():e==="bigint"?`["BigInt","${t}"]`:String(t)}const bt=jt,_t=xe("invalidate_all"),Dt=xe("before_navigate"),Lt=xe("after_navigate");function Me(t){return t.toString().split(/[[\].]+/).filter(e=>e)}function Rt(t){return t.reduce((e,r)=>(typeof r=="number"||!isNaN(parseInt(String(r),10))?e+=`[${String(r)}]`:e?e+=`.${String(r)}`:e+=String(r),e),"")}class R extends Error{constructor(e){super(e),Object.setPrototypeOf(this,R.prototype)}}function je(t,e,r){return t[e]=r,"skip"}function Ze(t,e){return e.value!==void 0&&typeof e.value!="object"&&e.path.length<t.length}function Vt(t,e,r={}){r.modifier||(r.modifier=s=>Ze(e,s)?void 0:s.value);const a=x(t,e,r.modifier);if(a)return r.value===void 0||r.value(a.value)?a:void 0}function x(t,e,r){if(!e.length)return;const a=[e[0]];let s=t;for(;a.length<e.length;){const n=a[a.length-1],u=r?r({parent:s,key:String(n),value:s[n],path:a.map(p=>String(p)),isLeaf:!1,set:p=>je(s,n,p)}):s[n];if(u===void 0)return;s=u,a.push(e[a.length])}const i=e[e.length-1];return{parent:s,key:String(i),value:s[i],path:e.map(n=>String(n)),isLeaf:!0,set:n=>je(s,i,n)}}function X(t,e,r=[]){for(const a in t){const s=t[a],i=s===null||typeof s!="object",n={parent:t,key:a,value:s,path:r.map(String).concat([a]),isLeaf:i,set:p=>je(t,a,p)},u=e(n);if(u==="abort")return u;if(u==="skip")continue;if(!i){const p=X(s,e,n.path);if(p==="abort")return p}}}async function Bt(t,e,r=[]){for(const a in t){const s=t[a],i=s===null||typeof s!="object",n={parent:t,key:a,value:s,path:r.map(String).concat([a]),isLeaf:i,set:p=>je(t,a,p)},u=await e(n);if(u==="abort")return u;if(u==="skip")break;if(!i){const p=X(s,e,n.path);if(p==="abort")return p}}}function Ht(t,e){return t===e||t.size===e.size&&[...t].every(r=>e.has(r))}function xt(t,e){const r=new Map;function a(s,i){const n=x(i,s.path);function u(){r.set(s.path.join(" "),s.path)}s.isLeaf?n?(s.value instanceof Date&&n.value instanceof Date&&s.value.getTime()!=n.value.getTime()||s.value!==n.value)&&u():u():n&&s.value instanceof Set&&n.value instanceof Set&&!Ht(s.value,n.value)&&u()}return X(t,s=>a(s,e)),X(e,s=>a(s,t)),Array.from(r.values())}function be(t,e,r){for(const a of e){const s=x(t,a,({parent:i,key:n,value:u})=>((u===void 0||typeof u!="object")&&(i[n]={}),i[n]));s&&(s.parent[s.key]=r)}}function gt(t,e){const a=Me(e).filter(s=>isNaN(parseInt(String(s)))).join(".");return{path:e,value:ye(t.form,e),errors:ye(t.errors,e),constraints:ye(t.constraints,a)}}function ye(t,e){const r=Me(e),a=we(t,s=>{const i=x(s,r);return i==null?void 0:i.value});return{subscribe(...s){const i=a.subscribe(...s);return()=>{i()}},update(s){t.update(i=>{const n=x(i,r);return n&&(n.parent[n.key]=s(n.value)),i})},set(s){t.update(i=>{const n=x(i,r);return n&&(n.parent[n.key]=s),i})}}}function de(t){return"structuredClone"in globalThis?structuredClone(t):pt(ht(t))}function Zt(t){const e=t;let r=!0,a=!1,s=!1,i=!1,n,u;for(;r;)t._def.typeName=="ZodNullable"?(a=!0,t=t.unwrap()):t._def.typeName=="ZodDefault"?(i=!0,u=t._def.defaultValue(),t=t._def.innerType):t._def.typeName=="ZodOptional"?(s=!0,t=t.unwrap()):t._def.typeName=="ZodEffects"?(n||(n=t),t=t._def.schema):t._def.typeName=="ZodPipeline"?t=t._def.out:r=!1;return{zodType:t,originalType:e,isNullable:a,isOptional:s,hasDefault:i,defaultValue:u,effects:n}}const Le=new WeakMap;function qe(t){return Le.has(t)||Le.set(t,$e(t)),Le.get(t)}function $e(t){const e=Zt(t).zodType;if(e._def.typeName=="ZodObject")return Object.fromEntries(Object.entries(e.shape).map(([r,a])=>[r,$e(a)]).filter(r=>r[1]!==void 0));if(e._def.typeName=="ZodArray")return $e(e._def.type)??{};if(e._def.typeName=="ZodRecord")return $e(e._def.valueType)??{};if(e._def.typeName=="ZodUnion")return e._def.options.reduce((a,s)=>{const i=$e(s);return i&&(a={...a??{},...i}),a},void 0)}function Ie(t,e,r=!0){const a={},s=Object.entries(t);if("_errors"in t&&t._errors.length){if(!e||!r)return t._errors;a._errors=t._errors}for(const[i,n]of s.filter(([u])=>u!=="_errors")){const u=!isNaN(parseInt(i,10));a[i]=Ie(n,e?u?e:e[i]:void 0,!!(e!=null&&e[i]))}return a}function qt(t){return yt(t,[])}function yt(t,e){return Object.entries(t).filter(([,a])=>a!==void 0).flatMap(([a,s])=>{if(Array.isArray(s)&&s.length>0){const i=e.concat([a]);return{path:Rt(i),messages:s}}else return yt(t[a],e.concat([a]))})}function vt(t,e){t.update(r=>(X(r,a=>{if(!(a.path.length==1&&a.path[0]=="_errors"&&!e.clearFormLevelErrors)&&Array.isArray(a.value))return a.set(void 0)}),e.undefinePath&&be(r,[e.undefinePath],void 0),r))}async function wt(t,e,r,a,s){return Wt(t.validators,e,r,a,s)}async function Wt(t,e,r,a,s){if(t){let i,n={};if("safeParseAsync"in t){const u=t,p=await u.safeParseAsync(e);i=p.success,p.success||(n=Ie(p.error.format(),qe(u)))}else{i=!0;const u=t,p=[];await Bt(e,async({value:d,path:y})=>{const h=y.filter(m=>isNaN(parseInt(m))),c=x(u,h);if(typeof(c==null?void 0:c.value)=="function"){const m=c.value;if(Array.isArray(d))for(const b in d){const f=await m(d[b]);f&&(i=!1,p.push({path:y.concat([b]),errors:typeof f=="string"?[f]:f??void 0}))}else{const b=await m(d);b&&(i=!1,p.push({path:y,errors:typeof b=="string"?[b]:b??void 0}))}}});for(const{path:d,errors:y}of p){const h=x(n,d,({parent:c,key:m,value:b})=>(b===void 0&&(c[m]={}),c[m]));if(h){const{parent:c,key:m}=h;c[m]=y}}}if(!i)return{valid:!1,posted:s,errors:n,data:e,constraints:a,message:void 0,id:r}}return{valid:!0,posted:s,errors:{},data:e,constraints:a,message:void 0,id:r}}async function Jt(t,e,r){if(typeof t.validators!="object"||!("safeParseAsync"in t.validators))return;const a=t.validators,s=await a.safeParseAsync(e);if(s.success)r.update(i=>(X(i,n=>{if(n.key=="_errors")return n.set(void 0)}),i));else{const i=Ie(s.error.format(),qe(a));r.update(n=>(X(n,u=>{if(u.key=="_errors")return u.set(void 0)}),X(i,u=>{if(u.key=="_errors")return be(n,[u.path],u.value)}),n))}}async function Re(t,e,r,a,s,i={}){function n(){vt(a,{undefinePath:t,clearFormLevelErrors:!0})}function u(d){return typeof d=="string"&&(d=[d]),(i.update===!0||i.update=="errors")&&a.update(y=>{const h=x(y,t,c=>{if(Ze(t,c))throw new R("Errors can only be added to form fields, not to arrays or objects in the schema. Path: "+c.path.slice(0,-1));return c.value===void 0?(c.parent[c.key]={},c.parent[c.key]):c.value});if(!h)throw new R("Error path could not be created: "+t);return h.parent[h.key]=d??void 0,y}),d??void 0}const p=await Gt(t,e.validators,r,a,s,i);if(p.validated)if(p.validated==="all"&&!p.errors)n();else return u(p.errors);else if(p.validated===!1&&e.defaultValidator=="clear")return u(void 0);return p.errors}async function Gt(t,e,r,a,s,i={}){i.update===void 0&&(i.update=!0),i.taint===void 0&&(i.taint=!1),typeof i.errors=="string"&&(i.errors=[i.errors]);const n={value:i.value,shouldUpdate:!0,currentData:void 0,validationPath:t.filter(c=>isNaN(parseInt(c)))};async function u(){return{validated:!1,errors:void 0}}function p(c,m){if(m===void 0)return!1;const b=x(m,c);return b?b.value===!0:!1}function d(c){a.update(c)}function y(){a.update(c=>(X(c,m=>{if(m.key=="_errors")return m.set(void 0)}),c))}function h(c,m){return Ie(c.format(),qe(m))}if("value"in i)i.update===!0||i.update==="value"?r.update(c=>(be(c,[t],n.value),n.currentData=c),{taint:i.taint}):n.shouldUpdate=!1;else{n.currentData=F(r);const c=x(n.currentData,t);n.value=c==null?void 0:c.value}if(typeof e!="object")return u();if("safeParseAsync"in e){n.shouldUpdate||(n.currentData=de(n.currentData??F(r)),be(n.currentData,[t],n.value));const c=await e.safeParseAsync(n.currentData);if(c.success)return y(),{validated:!0,errors:void 0};{const m=h(c.error,e);if(i.update===!0||i.update=="errors"){const f=F(s);d(l=>(X(l,_=>{if(_.key=="_errors")return _.set(void 0)}),X(m,_=>{if(_.key=="_errors")return be(l,[_.path],_.value);if(Array.isArray(_.value))return p(_.path,f)&&be(l,[_.path],_.value),"skip"}),l))}const b=x(m,t);return{validated:!0,errors:i.errors??(b==null?void 0:b.value)}}}else{const c=x(e,n.validationPath);if(c){if(c.value===void 0)return u();{const m=await c.value(n.value);return{validated:!0,errors:m&&(i.errors??m)}}}else throw new R("No Superforms validator found: "+t)}}function Ae(t){return Nt.apply_action(t)}function Yt(t){const e=JSON.parse(t);return e.data&&(e.data=pt(e.data)),e}function Qe(t){return HTMLElement.prototype.cloneNode.call(t)}function Kt(t,e=()=>{}){const r=async({action:s,result:i,reset:n})=>{i.type==="success"&&(n!==!1&&HTMLFormElement.prototype.reset.call(t),await _t()),(location.origin+location.pathname===s.origin+s.pathname||i.type==="redirect"||i.type==="error")&&Ae(i)};async function a(s){var b,f,l,_;if(((b=s.submitter)!=null&&b.hasAttribute("formmethod")?s.submitter.formMethod:Qe(t).method)!=="post")return;s.preventDefault();const n=new URL((f=s.submitter)!=null&&f.hasAttribute("formaction")?s.submitter.formAction:Qe(t).action),u=new FormData(t),p=(l=s.submitter)==null?void 0:l.getAttribute("name");p&&u.append(p,((_=s.submitter)==null?void 0:_.getAttribute("value"))??"");const d=new AbortController;let y=!1;const c=await e({action:n,cancel:()=>y=!0,controller:d,get data(){return u},formData:u,get form(){return t},formElement:t,submitter:s.submitter})??r;if(y)return;let m;try{const N=await fetch(n,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:u,signal:d.signal});m=Yt(await N.text()),m.type==="error"&&(m.status=N.status)}catch(N){if((N==null?void 0:N.name)==="AbortError")return;m={type:"error",error:N}}c({action:n,get data(){return u},formData:u,get form(){return t},formElement:t,update:N=>r({action:n,result:m,reset:N==null?void 0:N.reset}),result:m})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",a),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",a)}}}const Xt=(t,e=0)=>{const r=t.getBoundingClientRect();return r.top>=e&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth)},Qt=(t,e=1.125,r="smooth")=>{const i=t.getBoundingClientRect().top+window.pageYOffset-window.innerHeight/(2*e);window.scrollTo({left:0,top:i,behavior:r})};var L;(function(t){t[t.Idle=0]="Idle",t[t.Submitting=1]="Submitting",t[t.Delayed=2]="Delayed",t[t.Timeout=3]="Timeout"})(L||(L={}));function ze(t){!t.flashMessage||!bt||We(t)&&(document.cookie=`flash=; Max-Age=0; Path=${t.flashMessage.cookiePath??"/"};`)}function We(t){return!t.flashMessage||!bt?!1:t.syncFlashMessage}function zt(t,e,r,a,s,i,n,u,p,d,y,h,c,m,b,f,l){d();const _=s;async function N(w){await Re(w,n,u,_,m)}function v(w){return w&&(w instanceof HTMLSelectElement||w instanceof HTMLInputElement&&w.type=="radio")}async function A(w){if(!(n.validationMethod=="oninput"||n.validationMethod=="submit-only")){v(w.target)&&await new Promise(D=>setTimeout(D,0));for(const D of F(b))N(D);b.set([])}}t.addEventListener("focusout",A);const U=new Set;function pe(w){const D=w.target;n.selectErrorText&&D.select()}function he(w){w.querySelectorAll("input").forEach(D=>{D.addEventListener("invalid",pe)})}function W(w){w.querySelectorAll("input").forEach(D=>D.removeEventListener("invalid",pe))}Lt(w=>{w.type=="goto"&&B.completed(!0)}),rt(()=>{U.forEach(w=>W(w)),U.clear(),t.removeEventListener("focusout",A),B.completed(!0)});function Q(w){function D(){if(n.selectErrorText){const M=le();M&&w!==M&&(W(M),U.delete(M)),U.has(w)||(he(w),U.add(w))}z=w}let z;function le(){return z}function _e(M){return typeof n.autoFocusOnError=="boolean"?n.autoFocusOnError:!/iPhone|iPad|iPod|Android/i.test(M)}const ce=async()=>{if(n.scrollToError=="off")return;const M=n.errorSelector;if(!M)return;await nt();let T;if(T=z.querySelector(M),!T)return;T=T.querySelector(M)??T;const $=n.stickyNavbar?document.querySelector(n.stickyNavbar):null;if(typeof n.scrollToError!="string"?T.scrollIntoView(n.scrollToError):Xt(T,($==null?void 0:$.offsetHeight)??0)||Qt(T,void 0,n.scrollToError),!_e(navigator.userAgent))return;let k;if(k=T,["INPUT","SELECT","BUTTON","TEXTAREA"].includes(k.tagName)||(k=k.querySelector('input:not([type="hidden"]):not(.flatpickr-input), select, textarea')),k)try{k.focus({preventScroll:!0}),n.selectErrorText&&k.tagName=="INPUT"&&k.select()}catch{}};D();{let M=L.Idle,T,$;const k=C=>{M=C,e.set(M>=L.Submitting),r.set(M>=L.Delayed),a.set(M>=L.Timeout)};return{submitting:()=>{D(),k(M!=L.Delayed?L.Submitting:L.Delayed),T&&clearTimeout(T),$&&clearTimeout($),T=window.setTimeout(()=>{M==L.Submitting&&k(L.Delayed)},n.delayMs),$=window.setTimeout(()=>{M==L.Delayed&&k(L.Timeout)},n.timeoutMs)},completed:C=>{T&&clearTimeout(T),$&&clearTimeout($),T=$=0,k(L.Idle),C||setTimeout(ce)},scrollToFirstError:()=>setTimeout(ce),isSubmitting:()=>M===L.Submitting||M===L.Delayed}}}const B=Q(t);let V;return Kt(t,async w=>{var M;const D=w.cancel;let z=!1;function le(){return z=!0,D()}if(w.cancel=le,B.isSubmitting()&&n.multipleSubmits=="prevent")le();else{B.isSubmitting()&&n.multipleSubmits=="abort"&&V&&V.abort(),V=w.controller;for(const T of y.onSubmit)await T(w)}if(z)n.flashMessage&&ze(n);else{const T=await wt(n,F(u),F(h),F(c),F(l));if(!T.valid){le();const $={type:"failure",status:(typeof n.SPA=="boolean"||(M=n.SPA)==null?void 0:M.failStatus)??400,data:{form:T}};setTimeout(()=>ce({result:$}),0)}if(!z){switch(n.clearOnSubmit){case"errors-and-message":_.clear(),p.set(void 0);break;case"errors":_.clear();break;case"message":p.set(void 0);break}n.flashMessage&&(n.clearOnSubmit=="errors-and-message"||n.clearOnSubmit=="message")&&We(n)&&n.flashMessage.module.getFlash(Ee).set(void 0),B.submitting();const $="formData"in w?w.formData:w.data;if(n.SPA){le();const C={type:"success",status:200,data:{form:{valid:!0,posted:!0,errors:{},data:F(u),constraints:F(c),message:void 0,id:F(h)}}};setTimeout(()=>ce({result:C}),0)}else if(n.dataType==="json"){const k=F(u),C=_e(ht(k),n.jsonChunkSize??5e5);for(const j of C)$.append("__superform_json",j);Object.keys(k).forEach(j=>{typeof $.get(j)=="string"&&$.delete(j)})}if(!n.SPA&&!$.has("__superform_id")){const k=F(h);k!==void 0&&$.set("__superform_id",k)}}}function _e(T,$){const k=Math.ceil(T.length/$),C=new Array(k);for(let j=0,J=0;j<k;++j,J+=$)C[j]=T.substring(J,J+$);return C}async function ce(T){const $=T.result;V=null;let k=!1;const C={result:$,formEl:t,cancel:()=>k=!0};for(const j of y.onResult)await j(C);if(!k){if(($.type==="success"||$.type=="failure")&&$.data){const j=f($.data);if(!j.length)throw new R("No form data returned from ActionResult. Make sure you return { form } in the form actions.");for(const J of j){if(J.id!==F(h))continue;const Oe={form:J,formEl:t,cancel:()=>k=!0};for(const Se of y.onUpdate)await Se(Oe)}}if(!k){if($.type!=="error")$.type==="success"&&n.invalidateAll&&await _t(),n.applyAction?await Ae($):await i($);else{if(n.applyAction)if(n.onError=="apply")await Ae($);else{const j={type:"failure",status:Math.floor($.status||500),data:$};await Ae(j)}if(n.onError!=="apply"){const j={result:$,message:p};for(const J of y.onError)J!=="apply"&&await J(j)}}n.flashMessage&&$.type=="error"&&n.flashMessage.onError&&await n.flashMessage.onError({result:$,message:n.flashMessage.module.getFlash(Ee)})}}k&&n.flashMessage&&ze(n),(k||$.type!="redirect")&&B.completed(k)}return ce})}new TextEncoder;const er={applyAction:!0,invalidateAll:!0,resetForm:!1,autoFocusOnError:"detect",scrollToError:"smooth",errorSelector:'[aria-invalid="true"],[data-invalid]',selectErrorText:!1,stickyNavbar:void 0,taintedMessage:"Do you want to leave this page? Changes you made may not be saved.",onSubmit:void 0,onResult:void 0,onUpdate:void 0,onUpdated:void 0,onError:t=>{console.warn("Unhandled Superform error, use onError event to handle it:",t.result.error)},dataType:"form",validators:void 0,defaultValidator:"keep",clearOnSubmit:"errors-and-message",delayMs:500,timeoutMs:8e3,multipleSubmits:"prevent",validation:void 0,SPA:void 0,validateMethod:"auto"};function tr(t,e={}){var Se;e={...er,...e},e.SPA&&e.validators===void 0&&console.warn("No validators set for Superform in SPA mode. Add them to the validators option, or set it to false to disable this warning.");let r=e.id;!t||c(t)===!1?(((Se=e.warnings)==null?void 0:Se.noValidationAndConstraints)!==!1&&console.warn((t?"Form data sent directly to superForm instead of through superValidate. No initial data validation is made. ":"No form data sent to superForm, schema type safety cannot be guaranteed. ")+"Also, no constraints will exist for the form. Set the warnings.noValidationAndConstraints option to false to disable this warning."),t={valid:!1,posted:!1,errors:{},data:t??{},constraints:{}}):r===void 0&&(r=t.id);const a=F(Ee).form;if(a&&typeof a=="object"){for(const o of h(a).reverse())if(o.id===r){const g=t;t=o,t.valid&&e.resetForm&&(e.resetForm===!0||e.resetForm())&&(t=de(g),t.message=o.message);break}}const s=t,i=de(s);if(typeof i.valid!="boolean")throw new R("A non-validation object was passed to superForm. Check what's passed to its first parameter.");const n=G(s.errors),u=G(r),p={taintedMessage:e.taintedMessage,taintedFormState:de(i.data)};function d(o=8){return Math.random().toString(36).substring(2,o+2)}function y(o){p.taintedFormState=de(o)}function h(o){var E;const g=Object.values(o).filter(S=>c(S)!==!1);if(g.length>1&&((E=e.warnings)==null?void 0:E.duplicateId)!==!1){const S=new Set;for(const I of g)S.has(I.id)?console.warn(`Duplicate form id found: "${I.id}". Multiple forms will receive the same data. Use the id option to differentiate between them, or if this is intended, set warnings.duplicateId option to false to disable this message.`):S.add(I.id)}return g}function c(o){return!o||typeof o!="object"||!("valid"in o&&"errors"in o&&typeof o.valid=="boolean")?!1:"id"in o&&typeof o.id=="string"?o.id:void 0}function m(){e.taintedMessage=p.taintedMessage,r===void 0&&u.set(d())}function b(o){const g=G(o);return{subscribe:g.subscribe,set:(E,S={})=>(_e(E,p.taintedFormState,S.taint??!0),p.taintedFormState=de(E),g.set(E)),update:(E,S={})=>g.update(I=>{const ee=E(I);return _e(ee,p.taintedFormState,S.taint??!0),p.taintedFormState=de(I),ee})}}const f=[u.subscribe(o=>r=o)];function l(o){f.push(o)}function _(){f.forEach(o=>o())}const N=b(s.data);function v(o,g){if(!(!g||typeof g!="object")){if(Array.isArray(g))g.length>0&&v(o,g[0]);else if(!(g instanceof Date))throw new R(`Object found in form field "${o}". Set options.dataType = 'json' and use:enhance to use nested data structures.`)}}async function A(o,g){o.valid&&g&&e.resetForm&&(e.resetForm===!0||e.resetForm())?U(o.message):C(o,g),j.onUpdated.length&&await nt();for(const E of j.onUpdated)E({form:o})}function U(o,g,E){const S=de(i);S.data={...S.data,...g},E!==void 0&&(S.id=E),C(S,!0,o)}const pe=async(o,g)=>{if(o.type=="error")throw new R(`ActionResult of type "${o.type}" cannot be passed to update function.`);if(o.type=="redirect"){e.resetForm&&(e.resetForm===!0||e.resetForm())&&U();return}if(typeof o.data!="object")throw new R("Non-object validation data returned from ActionResult.");const E=h(o.data);if(!E.length)throw new R("No form data returned from ActionResult. Make sure you return { form } in the form actions.");for(const S of E)S.id===r&&await A(S,g??(o.status>=200&&o.status<300))},he=G([]),W=G(s.message),Q=G(s.constraints),B=G(!1),V={subscribe:n.subscribe,set:n.set,update:n.update,clear:()=>vt(n,{undefinePath:null,clearFormLevelErrors:!0})},w=G();function D(){return F(w)}function z(o){if(o===null)throw new R("$tainted store contained null");if(typeof o=="object"){for(const g of Object.values(o))if(z(g))return!0}return o===!0}async function le(o,g){if(e.validationMethod=="onblur"||e.validationMethod=="submit-only")return!1;let E=e.validationMethod==="oninput";if(!E){const S=F(V),I=S?Vt(S,o,{modifier:Ue=>{if(Ze(o,Ue))throw new R("Errors can only be added to form fields, not to arrays or objects in the schema. Path: "+Ue.path.slice(0,-1));return Ue.value}}):void 0;E=!!(I&&I.key in I.parent)}return E?(await Re(o,e,N,V,w,{taint:g}),!0):!1}async function _e(o,g,E){if(E===!1)return;if(E==="untaint-all"){w.set(void 0);return}let S=xt(o,g);if(typeof E=="object"&&(typeof E.fields=="string"&&(E.fields=[E.fields]),S=E.fields.map(I=>Me(I)),E=!0),E===!0&&he.set(S),S.length){w.update(ee=>(ee||(ee={}),be(ee,S,E===!0?!0:void 0),ee));let I=!1;for(const ee of S)I=I||await le(ee,E);I||await Jt(e,F(N),V)}}function ce(o,g){w.set(o),y(g)}const M=G(!1),T=G(!1),$=G(!1),k=we(V,o=>o?qt(o):[]);if(e.taintedMessage=void 0,rt(()=>{_();for(const o of Object.values(j))o.length=0}),e.dataType!=="json")for(const[o,g]of Object.entries(s.data))v(o,g);function C(o,g,E){if(g&&ce(typeof g=="boolean"?void 0:g,o.data),E=E??o.message,N.set(o.data,{taint:!1}),W.set(E),V.set(o.errors),u.set(o.id),B.set(o.posted),e.flashMessage&&We(e)){const S=e.flashMessage.module.getFlash(Ee);E&&F(S)===void 0&&S.set(E)}}const j={onSubmit:e.onSubmit?[e.onSubmit]:[],onResult:e.onResult?[e.onResult]:[],onUpdate:e.onUpdate?[e.onUpdate]:[],onUpdated:e.onUpdated?[e.onUpdated]:[],onError:e.onError?[e.onError]:[]};Dt(o=>{if(e.taintedMessage&&!F(M)){const g=D();g&&z(g)&&!window.confirm(e.taintedMessage)&&o.cancel()}}),l(Ee.subscribe(async o=>{if(!e.applyAction)return;function g(S){throw new R(`No form data found in ${S}. Make sure you return { form } in form actions and load functions.`)}const E=o.status>=200&&o.status<300;if(o.form&&typeof o.form=="object"){if(o.form.type=="error")return;const S=h(o.form);S.length||g("$page.form (ActionData)");for(const I of S)I.id===r&&await A(I,E)}else if(o.data&&typeof o.data=="object"){const S=h(o.data);for(const I of S)I.id===r&&C(I,E)}}));const J=Object.fromEntries(Object.keys(i.data).map(o=>[o,{name:o,value:ye(N,o),errors:ye(V,o),constraints:ye(Q,o)}]));function Oe(o,g){return o===void 0?wt(e,F(N),r,F(Q),!1):Re(Me(o),e,N,V,w,g)}return{form:N,formId:u,errors:V,message:W,constraints:Q,fields:J,tainted:w,submitting:we(M,o=>o),delayed:we(T,o=>o),timeout:we($,o=>o),options:e,capture:function(){return{valid:i.valid,posted:F(B),errors:F(V),data:F(N),constraints:F(Q),message:F(W),id:r,tainted:F(w)}},restore:function(o){return C(o,o.tainted??!0)},validate:Oe,enhance:(o,g)=>{if(g){if(g.onError){if(e.onError==="apply")throw new R('options.onError is set to "apply", cannot add any onError events.');if(g.onError==="apply")throw new R('Cannot add "apply" as onError event in use:enhance.');j.onError.push(g.onError)}g.onResult&&j.onResult.push(g.onResult),g.onSubmit&&j.onSubmit.push(g.onSubmit),g.onUpdate&&j.onUpdate.push(g.onUpdate),g.onUpdated&&j.onUpdated.push(g.onUpdated)}return zt(o,M,T,$,V,pe,e,N,W,m,j,u,Q,w,he,h,B)},allErrors:k,posted:B,reset:o=>U(o!=null&&o.keepMessage?F(W):void 0,o==null?void 0:o.data,o==null?void 0:o.id)}}function et(t){let e,r;return{c(){e=se("span"),r=oe(t[3]),this.h()},l(a){e=ie(a,"SPAN",{class:!0});var s=me(e);r=ue(s,t[3]),s.forEach(P),this.h()},h(){fe(e,"class","invalid svelte-1ch2xak")},m(a,s){O(a,e,s),H(e,r)},p(a,s){s&8&&lt(r,a[3])},d(a){a&&P(e)}}}function rr(t){let e,r,a,s,i,n,u,p,d,y=[{type:"checkbox"},{name:t[0]},{__value:"true"},t[5]],h={};for(let f=0;f<y.length;f+=1)h=ve(h,y[f]);const c=t[8].default,m=at(c,t,t[7],null);let b=t[3]&&et(t);return{c(){e=se("label"),r=se("input"),a=Y(),s=se("span"),m&&m.c(),i=Y(),b&&b.c(),n=Ne(),this.h()},l(f){e=ie(f,"LABEL",{class:!0});var l=me(e);r=ie(l,"INPUT",{type:!0,name:!0}),a=K(l),s=ie(l,"SPAN",{class:!0});var _=me(s);m&&m.l(_),_.forEach(P),l.forEach(P),i=K(f),b&&b.l(f),n=Ne(),this.h()},h(){Te(r,h),Fe(r,"svelte-1ch2xak",!0),fe(s,"class","display-name"),fe(e,"class","svelte-1ch2xak")},m(f,l){O(f,e,l),H(e,r),r.autofocus&&r.focus(),r.checked=t[2],H(e,a),H(e,s),m&&m.m(s,null),O(f,i,l),b&&b.m(f,l),O(f,n,l),u=!0,p||(d=st(r,"change",t[9]),p=!0)},p(f,[l]){Te(r,h=ct(y,[{type:"checkbox"},(!u||l&1)&&{name:f[0]},{__value:"true"},l&32&&f[5]])),l&4&&(r.checked=f[2]),Fe(r,"svelte-1ch2xak",!0),m&&m.p&&(!u||l&128)&&it(m,c,f,f[7],u?ut(c,f[7],l,null):ot(f[7]),null),f[3]?b?b.p(f,l):(b=et(f),b.c(),b.m(n.parentNode,n)):b&&(b.d(1),b=null)},i(f){u||(Z(m,f),u=!0)},o(f){q(m,f),u=!1},d(f){f&&(P(e),P(i),P(n)),m&&m.d(f),b&&b.d(f),p=!1,d()}}}function nr(t,e,r){let a;const s=["form","field"];let i=Pe(e,s),n,u=$t,p=()=>(u(),u=Et(a,_=>r(2,n=_)),a),d;t.$$.on_destroy.push(()=>u());let{$$slots:y={},$$scope:h}=e,{form:c}=e,{field:m}=e;const{value:b,errors:f}=gt(c,m);ke(t,f,_=>r(3,d=_));function l(){n=this.checked,a.set(n)}return t.$$set=_=>{e=ve(ve({},e),ft(_)),r(5,i=Pe(e,s)),"form"in _&&r(6,c=_.form),"field"in _&&r(0,m=_.field),"$$scope"in _&&r(7,h=_.$$scope)},p(r(1,a=b)),[m,a,n,d,f,i,c,h,y,l]}class ar extends Be{constructor(e){super(),He(this,e,nr,rr,Ve,{form:6,field:0})}}function tt(t){let e,r;return{c(){e=se("span"),r=oe(t[1]),this.h()},l(a){e=ie(a,"SPAN",{class:!0});var s=me(e);r=ue(s,t[1]),s.forEach(P),this.h()},h(){fe(e,"class","invalid svelte-h52x4k")},m(a,s){O(a,e,s),H(e,r)},p(a,s){s&2&&lt(r,a[1])},d(a){a&&P(e)}}}function sr(t){let e,r,a,s,i,n,u,p,d,y;const h=t[10].default,c=at(h,t,t[9],null);let m=[{name:t[0]},{type:"text"},{"aria-invalid":i=t[1]?"true":void 0},t[2],t[7]],b={};for(let l=0;l<m.length;l+=1)b=ve(b,m[l]);let f=t[1]&&tt(t);return{c(){e=se("label"),r=se("span"),c&&c.c(),a=Y(),s=se("input"),n=Y(),f&&f.c(),u=Ne(),this.h()},l(l){e=ie(l,"LABEL",{class:!0});var _=me(e);r=ie(_,"SPAN",{class:!0});var N=me(r);c&&c.l(N),N.forEach(P),a=K(_),s=ie(_,"INPUT",{name:!0,type:!0,"aria-invalid":!0}),_.forEach(P),n=K(l),f&&f.l(l),u=Ne(),this.h()},h(){fe(r,"class","display-name"),Te(s,b),Fe(s,"svelte-h52x4k",!0),fe(e,"class","svelte-h52x4k")},m(l,_){O(l,e,_),H(e,r),c&&c.m(r,null),H(e,a),H(e,s),s.autofocus&&s.focus(),Je(s,t[3]),O(l,n,_),f&&f.m(l,_),O(l,u,_),p=!0,d||(y=st(s,"input",t[11]),d=!0)},p(l,[_]){c&&c.p&&(!p||_&512)&&it(c,h,l,l[9],p?ut(h,l[9],_,null):ot(l[9]),null),Te(s,b=ct(m,[(!p||_&1)&&{name:l[0]},{type:"text"},(!p||_&2&&i!==(i=l[1]?"true":void 0))&&{"aria-invalid":i},_&4&&l[2],_&128&&l[7]])),_&8&&s.value!==l[3]&&Je(s,l[3]),Fe(s,"svelte-h52x4k",!0),l[1]?f?f.p(l,_):(f=tt(l),f.c(),f.m(u.parentNode,u)):f&&(f.d(1),f=null)},i(l){p||(Z(c,l),p=!0)},o(l){q(c,l),p=!1},d(l){l&&(P(e),P(n),P(u)),c&&c.d(l),f&&f.d(l),d=!1,y()}}}function ir(t,e,r){const a=["form","field"];let s=Pe(e,a),i,n,u,{$$slots:p={},$$scope:d}=e,{form:y}=e,{field:h}=e;const{value:c,errors:m,constraints:b}=gt(y,h);ke(t,c,l=>r(3,u=l)),ke(t,m,l=>r(1,i=l)),ke(t,b,l=>r(2,n=l));function f(){u=this.value,c.set(u)}return t.$$set=l=>{e=ve(ve({},e),ft(l)),r(7,s=Pe(e,a)),"form"in l&&r(8,y=l.form),"field"in l&&r(0,h=l.field),"$$scope"in l&&r(9,d=l.$$scope)},[h,i,n,u,c,m,b,s,y,d,p,f]}class or extends Be{constructor(e){super(),He(this,e,ir,sr,Ve,{form:8,field:0})}}function ur(t){let e;return{c(){e=oe("Username vergeben")},l(r){e=ue(r,"Username vergeben")},m(r,a){O(r,e,a)},d(r){r&&P(e)}}}function fr(t){let e;return{c(){e=oe("Schritt 1 von 3")},l(r){e=ue(r,"Schritt 1 von 3")},m(r,a){O(r,e,a)},d(r){r&&P(e)}}}function lr(t){let e;return{c(){e=oe(`Willkommen zum Online-Spiel The Hidden Threat*. Gleich geht es los. Nach der Vergabe des
    Usernamen werden Sie in die Lobby geleitet.`)},l(r){e=ue(r,`Willkommen zum Online-Spiel The Hidden Threat*. Gleich geht es los. Nach der Vergabe des
    Usernamen werden Sie in die Lobby geleitet.`)},m(r,a){O(r,e,a)},d(r){r&&P(e)}}}function cr(t){let e;return{c(){e=oe("Dein Username")},l(r){e=ue(r,"Dein Username")},m(r,a){O(r,e,a)},d(r){r&&P(e)}}}function dr(t){let e;return{c(){e=oe("Bitte gib Dir einen Username mit maximal 20 Buchstaben.")},l(r){e=ue(r,"Bitte gib Dir einen Username mit maximal 20 Buchstaben.")},m(r,a){O(r,e,a)},d(r){r&&P(e)}}}function mr(t){let e;return{c(){e=oe(`Hiermit stimme ich der Speicherung meiner eingegebenen Daten zu und bestätige dass ich
      mindestens 18 Jahre alt bin.*`)},l(r){e=ue(r,`Hiermit stimme ich der Speicherung meiner eingegebenen Daten zu und bestätige dass ich
      mindestens 18 Jahre alt bin.*`)},m(r,a){O(r,e,a)},d(r){r&&P(e)}}}function pr(t){let e;return{c(){e=oe("Abbrechen")},l(r){e=ue(r,"Abbrechen")},m(r,a){O(r,e,a)},d(r){r&&P(e)}}}function hr(t){let e;return{c(){e=oe("Start")},l(r){e=ue(r,"Start")},m(r,a){O(r,e,a)},d(r){r&&P(e)}}}function br(t){let e,r,a,s;return e=new Ye({props:{href:"/",$$slots:{default:[pr]},$$scope:{ctx:t}}}),a=new Ye({props:{type:"submit",primary:!0,$$slots:{default:[hr]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment),r=Y(),te(a.$$.fragment)},l(i){re(e.$$.fragment,i),r=K(i),re(a.$$.fragment,i)},m(i,n){ne(e,i,n),O(i,r,n),ne(a,i,n),s=!0},p(i,n){const u={};n&4&&(u.$$scope={dirty:n,ctx:i}),e.$set(u);const p={};n&4&&(p.$$scope={dirty:n,ctx:i}),a.$set(p)},i(i){s||(Z(e.$$.fragment,i),Z(a.$$.fragment,i),s=!0)},o(i){q(e.$$.fragment,i),q(a.$$.fragment,i),s=!1},d(i){i&&P(r),ae(e,i),ae(a,i)}}}function _r(t){let e,r,a,s,i,n,u,p,d,y,h,c,m,b,f,l,_,N;return e=new Ke({props:{separator:!0,$$slots:{info:[fr],default:[ur]},$$scope:{ctx:t}}}),a=new Ge({props:{$$slots:{default:[lr]},$$scope:{ctx:t}}}),u=new Ke({props:{centered:!0,$$slots:{default:[cr]},$$scope:{ctx:t}}}),d=new Ge({props:{$$slots:{default:[dr]},$$scope:{ctx:t}}}),h=new or({props:{form:t[0],field:"userName",placeholder:"z.B. Vor-und Nachname, Spitzname, Initalen, etc."}}),m=new ar({props:{form:t[0],field:"acceptedTos",$$slots:{default:[mr]},$$scope:{ctx:t}}}),f=new At({props:{$$slots:{default:[br]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment),r=Y(),te(a.$$.fragment),s=Y(),i=se("form"),n=se("div"),te(u.$$.fragment),p=Y(),te(d.$$.fragment),y=Y(),te(h.$$.fragment),c=Y(),te(m.$$.fragment),b=Y(),te(f.$$.fragment),this.h()},l(v){re(e.$$.fragment,v),r=K(v),re(a.$$.fragment,v),s=K(v),i=ie(v,"FORM",{method:!0,class:!0});var A=me(i);n=ie(A,"DIV",{class:!0});var U=me(n);re(u.$$.fragment,U),p=K(U),re(d.$$.fragment,U),y=K(U),re(h.$$.fragment,U),U.forEach(P),c=K(A),re(m.$$.fragment,A),b=K(A),re(f.$$.fragment,A),A.forEach(P),this.h()},h(){fe(n,"class","field svelte-fhfcdl"),fe(i,"method","post"),fe(i,"class","svelte-fhfcdl")},m(v,A){ne(e,v,A),O(v,r,A),ne(a,v,A),O(v,s,A),O(v,i,A),H(i,n),ne(u,n,null),H(n,p),ne(d,n,null),H(n,y),ne(h,n,null),H(i,c),ne(m,i,null),H(i,b),ne(f,i,null),l=!0,_||(N=St(t[0].enhance(i)),_=!0)},p(v,A){const U={};A&4&&(U.$$scope={dirty:A,ctx:v}),e.$set(U);const pe={};A&4&&(pe.$$scope={dirty:A,ctx:v}),a.$set(pe);const he={};A&4&&(he.$$scope={dirty:A,ctx:v}),u.$set(he);const W={};A&4&&(W.$$scope={dirty:A,ctx:v}),d.$set(W);const Q={};A&4&&(Q.$$scope={dirty:A,ctx:v}),m.$set(Q);const B={};A&4&&(B.$$scope={dirty:A,ctx:v}),f.$set(B)},i(v){l||(Z(e.$$.fragment,v),Z(a.$$.fragment,v),Z(u.$$.fragment,v),Z(d.$$.fragment,v),Z(h.$$.fragment,v),Z(m.$$.fragment,v),Z(f.$$.fragment,v),l=!0)},o(v){q(e.$$.fragment,v),q(a.$$.fragment,v),q(u.$$.fragment,v),q(d.$$.fragment,v),q(h.$$.fragment,v),q(m.$$.fragment,v),q(f.$$.fragment,v),l=!1},d(v){v&&(P(r),P(s),P(i)),ae(e,v),ae(a,v),ae(u),ae(d),ae(h),ae(m),ae(f),_=!1,N()}}}function gr(t){let e,r;return e=new kt({props:{paddedContent:!0,$$slots:{default:[_r]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},l(a){re(e.$$.fragment,a)},m(a,s){ne(e,a,s),r=!0},p(a,[s]){const i={};s&4&&(i.$$scope={dirty:s,ctx:a}),e.$set(i)},i(a){r||(Z(e.$$.fragment,a),r=!0)},o(a){q(e.$$.fragment,a),r=!1},d(a){ae(e,a)}}}function yr(t,e,r){let{data:a}=e;const s=tr(a);return t.$$set=i=>{"data"in i&&r(1,a=i.data)},[s,a]}class Fr extends Be{constructor(e){super(),He(this,e,yr,gr,Ve,{data:1})}}export{Fr as U};
