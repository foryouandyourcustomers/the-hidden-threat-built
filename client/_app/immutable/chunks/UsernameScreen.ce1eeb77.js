import{ac as F,a3 as tt,ab as rt,s as Ve,F as ve,x as nt,e as te,a as z,I as Ne,c as re,b as me,g as ee,f as j,ad as Te,D as Fe,m as oe,i as C,h as H,H as at,y as st,z as it,A as ot,ae as Pe,k as ke,a9 as ut,t as ue,d as le,j as lt,n as wt,q as $t,af as Je,ag as Et}from"./scheduler.9575fd4f.js";import{S as Be,i as He,t as J,b as G,c as ne,a as ae,m as se,d as ie}from"./index.ae3d3fc3.js";import{B as St}from"./Board.4ab8a511.js";import{P as Ge,A as kt,B as At}from"./Paragraph.f42cea57.js";import{g as ft,H as Ye}from"./Heading.db207678.js";import{j as xe,k as Nt}from"./singletons.a3c352ea.js";import{d as we,w as W}from"./index.a8ce1c85.js";import{U as ct,N as Tt,P as Ft,a as Pt,b as dt,H as Mt,p as mt}from"./parse.7d180a0f.js";import{p as Ee}from"./stores.2193f79a.js";const jt=!0;class Ce extends Error{constructor(e,r){super(e),this.name="DevalueError",this.path=r.join("")}}function Ke(t){return Object(t)!==t}const It=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ot(t){const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===It}function Ut(t){return Object.prototype.toString.call(t).slice(8,-1)}function Ct(t){switch(t){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return t<" "?`\\u${t.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}function _e(t){let e="",r=0;const n=t.length;for(let s=0;s<n;s+=1){const i=t[s],a=Ct(i);a&&(e+=t.slice(r,s)+a,r=s+1)}return`"${r===0?t:e+t.slice(r)}"`}function pt(t,e){const r=[],n=new Map,s=[];for(const d in e)s.push({key:d,fn:e[d]});const i=[];let a=0;function u(d){if(typeof d=="function")throw new Ce("Cannot stringify a function",i);if(n.has(d))return n.get(d);if(d===void 0)return ct;if(Number.isNaN(d))return Tt;if(d===1/0)return Ft;if(d===-1/0)return Pt;if(d===0&&1/d<0)return dt;const y=a++;n.set(d,y);for(const{key:c,fn:m}of s){const b=m(d);if(b)return r[y]=`["${c}",${u(b)}]`,y}let p="";if(Ke(d))p=De(d);else switch(Ut(d)){case"Number":case"String":case"Boolean":p=`["Object",${De(d)}]`;break;case"BigInt":p=`["BigInt",${d}]`;break;case"Date":p=`["Date","${d.toISOString()}"]`;break;case"RegExp":const{source:m,flags:b}=d;p=b?`["RegExp",${_e(m)},"${b}"]`:`["RegExp",${_e(m)}]`;break;case"Array":p="[";for(let l=0;l<d.length;l+=1)l>0&&(p+=","),l in d?(i.push(`[${l}]`),p+=u(d[l]),i.pop()):p+=Mt;p+="]";break;case"Set":p='["Set"';for(const l of d)p+=`,${u(l)}`;p+="]";break;case"Map":p='["Map"';for(const[l,f]of d)i.push(`.get(${Ke(l)?De(l):"..."})`),p+=`,${u(l)},${u(f)}`;p+="]";break;default:if(!Ot(d))throw new Ce("Cannot stringify arbitrary non-POJOs",i);if(Object.getOwnPropertySymbols(d).length>0)throw new Ce("Cannot stringify POJOs with symbolic keys",i);if(Object.getPrototypeOf(d)===null){p='["null"';for(const l in d)i.push(`.${l}`),p+=`,${_e(l)},${u(d[l])}`,i.pop();p+="]"}else{p="{";let l=!1;for(const f in d)l&&(p+=","),l=!0,i.push(`.${f}`),p+=`${_e(f)}:${u(d[f])}`,i.pop();p+="}"}}return r[y]=p,y}const h=u(t);return h<0?`${h}`:`[${r.join(",")}]`}function De(t){const e=typeof t;return e==="string"?_e(t):t instanceof String?_e(t.toString()):t===void 0?ct.toString():t===0&&1/t<0?dt.toString():e==="bigint"?`["BigInt","${t}"]`:String(t)}const ht=jt,bt=xe("invalidate_all"),Dt=xe("before_navigate"),Lt=xe("after_navigate");function Me(t){return t.toString().split(/[[\].]+/).filter(e=>e)}function Rt(t){return t.reduce((e,r)=>(typeof r=="number"||!isNaN(parseInt(String(r),10))?e+=`[${String(r)}]`:e?e+=`.${String(r)}`:e+=String(r),e),"")}class R extends Error{constructor(e){super(e),Object.setPrototypeOf(this,R.prototype)}}function je(t,e,r){return t[e]=r,"skip"}function Ze(t,e){return e.value!==void 0&&typeof e.value!="object"&&e.path.length<t.length}function Vt(t,e,r={}){r.modifier||(r.modifier=s=>Ze(e,s)?void 0:s.value);const n=x(t,e,r.modifier);if(n)return r.value===void 0||r.value(n.value)?n:void 0}function x(t,e,r){if(!e.length)return;const n=[e[0]];let s=t;for(;n.length<e.length;){const a=n[n.length-1],u=r?r({parent:s,key:String(a),value:s[a],path:n.map(h=>String(h)),isLeaf:!1,set:h=>je(s,a,h)}):s[a];if(u===void 0)return;s=u,n.push(e[n.length])}const i=e[e.length-1];return{parent:s,key:String(i),value:s[i],path:e.map(a=>String(a)),isLeaf:!0,set:a=>je(s,i,a)}}function Y(t,e,r=[]){for(const n in t){const s=t[n],i=s===null||typeof s!="object",a={parent:t,key:n,value:s,path:r.map(String).concat([n]),isLeaf:i,set:h=>je(t,n,h)},u=e(a);if(u==="abort")return u;if(u==="skip")continue;if(!i){const h=Y(s,e,a.path);if(h==="abort")return h}}}async function Bt(t,e,r=[]){for(const n in t){const s=t[n],i=s===null||typeof s!="object",a={parent:t,key:n,value:s,path:r.map(String).concat([n]),isLeaf:i,set:h=>je(t,n,h)},u=await e(a);if(u==="abort")return u;if(u==="skip")break;if(!i){const h=Y(s,e,a.path);if(h==="abort")return h}}}function Ht(t,e){return t===e||t.size===e.size&&[...t].every(r=>e.has(r))}function xt(t,e){const r=new Map;function n(s,i){const a=x(i,s.path);function u(){r.set(s.path.join(" "),s.path)}s.isLeaf?a?(s.value instanceof Date&&a.value instanceof Date&&s.value.getTime()!=a.value.getTime()||s.value!==a.value)&&u():u():a&&s.value instanceof Set&&a.value instanceof Set&&!Ht(s.value,a.value)&&u()}return Y(t,s=>n(s,e)),Y(e,s=>n(s,t)),Array.from(r.values())}function be(t,e,r){for(const n of e){const s=x(t,n,({parent:i,key:a,value:u})=>((u===void 0||typeof u!="object")&&(i[a]={}),i[a]));s&&(s.parent[s.key]=r)}}function gt(t,e){const n=Me(e).filter(s=>isNaN(parseInt(String(s)))).join(".");return{path:e,value:ye(t.form,e),errors:ye(t.errors,e),constraints:ye(t.constraints,n)}}function ye(t,e){const r=Me(e),n=we(t,s=>{const i=x(s,r);return i==null?void 0:i.value});return{subscribe(...s){const i=n.subscribe(...s);return()=>{i()}},update(s){t.update(i=>{const a=x(i,r);return a&&(a.parent[a.key]=s(a.value)),i})},set(s){t.update(i=>{const a=x(i,r);return a&&(a.parent[a.key]=s),i})}}}function de(t){return"structuredClone"in globalThis?structuredClone(t):mt(pt(t))}function Zt(t){const e=t;let r=!0,n=!1,s=!1,i=!1,a,u;for(;r;)t._def.typeName=="ZodNullable"?(n=!0,t=t.unwrap()):t._def.typeName=="ZodDefault"?(i=!0,u=t._def.defaultValue(),t=t._def.innerType):t._def.typeName=="ZodOptional"?(s=!0,t=t.unwrap()):t._def.typeName=="ZodEffects"?(a||(a=t),t=t._def.schema):t._def.typeName=="ZodPipeline"?t=t._def.out:r=!1;return{zodType:t,originalType:e,isNullable:n,isOptional:s,hasDefault:i,defaultValue:u,effects:a}}const Le=new WeakMap;function qe(t){return Le.has(t)||Le.set(t,$e(t)),Le.get(t)}function $e(t){const e=Zt(t).zodType;if(e._def.typeName=="ZodObject")return Object.fromEntries(Object.entries(e.shape).map(([r,n])=>[r,$e(n)]).filter(r=>r[1]!==void 0));if(e._def.typeName=="ZodArray")return $e(e._def.type)??{};if(e._def.typeName=="ZodRecord")return $e(e._def.valueType)??{};if(e._def.typeName=="ZodUnion")return e._def.options.reduce((n,s)=>{const i=$e(s);return i&&(n={...n??{},...i}),n},void 0)}function Ie(t,e,r=!0){const n={},s=Object.entries(t);if("_errors"in t&&t._errors.length){if(!e||!r)return t._errors;n._errors=t._errors}for(const[i,a]of s.filter(([u])=>u!=="_errors")){const u=!isNaN(parseInt(i,10));n[i]=Ie(a,e?u?e:e[i]:void 0,!!(e!=null&&e[i]))}return n}function qt(t){return _t(t,[])}function _t(t,e){return Object.entries(t).filter(([,n])=>n!==void 0).flatMap(([n,s])=>{if(Array.isArray(s)&&s.length>0){const i=e.concat([n]);return{path:Rt(i),messages:s}}else return _t(t[n],e.concat([n]))})}function yt(t,e){t.update(r=>(Y(r,n=>{if(!(n.path.length==1&&n.path[0]=="_errors"&&!e.clearFormLevelErrors)&&Array.isArray(n.value))return n.set(void 0)}),e.undefinePath&&be(r,[e.undefinePath],void 0),r))}async function vt(t,e,r,n,s){return Wt(t.validators,e,r,n,s)}async function Wt(t,e,r,n,s){if(t){let i,a={};if("safeParseAsync"in t){const u=t,h=await u.safeParseAsync(e);i=h.success,h.success||(a=Ie(h.error.format(),qe(u)))}else{i=!0;const u=t,h=[];await Bt(e,async({value:d,path:y})=>{const p=y.filter(m=>isNaN(parseInt(m))),c=x(u,p);if(typeof(c==null?void 0:c.value)=="function"){const m=c.value;if(Array.isArray(d))for(const b in d){const l=await m(d[b]);l&&(i=!1,h.push({path:y.concat([b]),errors:typeof l=="string"?[l]:l??void 0}))}else{const b=await m(d);b&&(i=!1,h.push({path:y,errors:typeof b=="string"?[b]:b??void 0}))}}});for(const{path:d,errors:y}of h){const p=x(a,d,({parent:c,key:m,value:b})=>(b===void 0&&(c[m]={}),c[m]));if(p){const{parent:c,key:m}=p;c[m]=y}}}if(!i)return{valid:!1,posted:s,errors:a,data:e,constraints:n,message:void 0,id:r}}return{valid:!0,posted:s,errors:{},data:e,constraints:n,message:void 0,id:r}}async function Jt(t,e,r){if(typeof t.validators!="object"||!("safeParseAsync"in t.validators))return;const n=t.validators,s=await n.safeParseAsync(e);if(s.success)r.update(i=>(Y(i,a=>{if(a.key=="_errors")return a.set(void 0)}),i));else{const i=Ie(s.error.format(),qe(n));r.update(a=>(Y(a,u=>{if(u.key=="_errors")return u.set(void 0)}),Y(i,u=>{if(u.key=="_errors")return be(a,[u.path],u.value)}),a))}}async function Re(t,e,r,n,s,i={}){function a(){yt(n,{undefinePath:t,clearFormLevelErrors:!0})}function u(d){return typeof d=="string"&&(d=[d]),(i.update===!0||i.update=="errors")&&n.update(y=>{const p=x(y,t,c=>{if(Ze(t,c))throw new R("Errors can only be added to form fields, not to arrays or objects in the schema. Path: "+c.path.slice(0,-1));return c.value===void 0?(c.parent[c.key]={},c.parent[c.key]):c.value});if(!p)throw new R("Error path could not be created: "+t);return p.parent[p.key]=d??void 0,y}),d??void 0}const h=await Gt(t,e.validators,r,n,s,i);if(h.validated)if(h.validated==="all"&&!h.errors)a();else return u(h.errors);else if(h.validated===!1&&e.defaultValidator=="clear")return u(void 0);return h.errors}async function Gt(t,e,r,n,s,i={}){i.update===void 0&&(i.update=!0),i.taint===void 0&&(i.taint=!1),typeof i.errors=="string"&&(i.errors=[i.errors]);const a={value:i.value,shouldUpdate:!0,currentData:void 0,validationPath:t.filter(c=>isNaN(parseInt(c)))};async function u(){return{validated:!1,errors:void 0}}function h(c,m){if(m===void 0)return!1;const b=x(m,c);return b?b.value===!0:!1}function d(c){n.update(c)}function y(){n.update(c=>(Y(c,m=>{if(m.key=="_errors")return m.set(void 0)}),c))}function p(c,m){return Ie(c.format(),qe(m))}if("value"in i)i.update===!0||i.update==="value"?r.update(c=>(be(c,[t],a.value),a.currentData=c),{taint:i.taint}):a.shouldUpdate=!1;else{a.currentData=F(r);const c=x(a.currentData,t);a.value=c==null?void 0:c.value}if(typeof e!="object")return u();if("safeParseAsync"in e){a.shouldUpdate||(a.currentData=de(a.currentData??F(r)),be(a.currentData,[t],a.value));const c=await e.safeParseAsync(a.currentData);if(c.success)return y(),{validated:!0,errors:void 0};{const m=p(c.error,e);if(i.update===!0||i.update=="errors"){const l=F(s);d(f=>(Y(f,g=>{if(g.key=="_errors")return g.set(void 0)}),Y(m,g=>{if(g.key=="_errors")return be(f,[g.path],g.value);if(Array.isArray(g.value))return h(g.path,l)&&be(f,[g.path],g.value),"skip"}),f))}const b=x(m,t);return{validated:!0,errors:i.errors??(b==null?void 0:b.value)}}}else{const c=x(e,a.validationPath);if(c){if(c.value===void 0)return u();{const m=await c.value(a.value);return{validated:!0,errors:m&&(i.errors??m)}}}else throw new R("No Superforms validator found: "+t)}}function Ae(t){return Nt.apply_action(t)}function Yt(t){const e=JSON.parse(t);return e.data&&(e.data=mt(e.data)),e}function Xe(t){return HTMLElement.prototype.cloneNode.call(t)}function Kt(t,e=()=>{}){const r=async({action:s,result:i,reset:a})=>{i.type==="success"&&(a!==!1&&HTMLFormElement.prototype.reset.call(t),await bt()),(location.origin+location.pathname===s.origin+s.pathname||i.type==="redirect"||i.type==="error")&&Ae(i)};async function n(s){var b,l,f,g;if(((b=s.submitter)!=null&&b.hasAttribute("formmethod")?s.submitter.formMethod:Xe(t).method)!=="post")return;s.preventDefault();const a=new URL((l=s.submitter)!=null&&l.hasAttribute("formaction")?s.submitter.formAction:Xe(t).action),u=new FormData(t),h=(f=s.submitter)==null?void 0:f.getAttribute("name");h&&u.append(h,((g=s.submitter)==null?void 0:g.getAttribute("value"))??"");const d=new AbortController;let y=!1;const c=await e({action:a,cancel:()=>y=!0,controller:d,get data(){return u},formData:u,get form(){return t},formElement:t,submitter:s.submitter})??r;if(y)return;let m;try{const N=await fetch(a,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:u,signal:d.signal});m=Yt(await N.text()),m.type==="error"&&(m.status=N.status)}catch(N){if((N==null?void 0:N.name)==="AbortError")return;m={type:"error",error:N}}c({action:a,get data(){return u},formData:u,get form(){return t},formElement:t,update:N=>r({action:a,result:m,reset:N==null?void 0:N.reset}),result:m})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",n),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",n)}}}const Xt=(t,e=0)=>{const r=t.getBoundingClientRect();return r.top>=e&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth)},Qt=(t,e=1.125,r="smooth")=>{const i=t.getBoundingClientRect().top+window.pageYOffset-window.innerHeight/(2*e);window.scrollTo({left:0,top:i,behavior:r})};var L;(function(t){t[t.Idle=0]="Idle",t[t.Submitting=1]="Submitting",t[t.Delayed=2]="Delayed",t[t.Timeout=3]="Timeout"})(L||(L={}));function Qe(t){!t.flashMessage||!ht||We(t)&&(document.cookie=`flash=; Max-Age=0; Path=${t.flashMessage.cookiePath??"/"};`)}function We(t){return!t.flashMessage||!ht?!1:t.syncFlashMessage}function zt(t,e,r,n,s,i,a,u,h,d,y,p,c,m,b,l,f){d();const g=s;async function N(w){await Re(w,a,u,g,m)}function v(w){return w&&(w instanceof HTMLSelectElement||w instanceof HTMLInputElement&&w.type=="radio")}async function A(w){if(!(a.validationMethod=="oninput"||a.validationMethod=="submit-only")){v(w.target)&&await new Promise(D=>setTimeout(D,0));for(const D of F(b))N(D);b.set([])}}t.addEventListener("focusout",A);const O=new Set;function pe(w){const D=w.target;a.selectErrorText&&D.select()}function he(w){w.querySelectorAll("input").forEach(D=>{D.addEventListener("invalid",pe)})}function Z(w){w.querySelectorAll("input").forEach(D=>D.removeEventListener("invalid",pe))}Lt(w=>{w.type=="goto"&&B.completed(!0)}),tt(()=>{O.forEach(w=>Z(w)),O.clear(),t.removeEventListener("focusout",A),B.completed(!0)});function K(w){function D(){if(a.selectErrorText){const P=fe();P&&w!==P&&(Z(P),O.delete(P)),O.has(w)||(he(w),O.add(w))}X=w}let X;function fe(){return X}function ge(P){return typeof a.autoFocusOnError=="boolean"?a.autoFocusOnError:!/iPhone|iPad|iPod|Android/i.test(P)}const ce=async()=>{if(a.scrollToError=="off")return;const P=a.errorSelector;if(!P)return;await rt();let T;if(T=X.querySelector(P),!T)return;T=T.querySelector(P)??T;const $=a.stickyNavbar?document.querySelector(a.stickyNavbar):null;if(typeof a.scrollToError!="string"?T.scrollIntoView(a.scrollToError):Xt(T,($==null?void 0:$.offsetHeight)??0)||Qt(T,void 0,a.scrollToError),!ge(navigator.userAgent))return;let k;if(k=T,["INPUT","SELECT","BUTTON","TEXTAREA"].includes(k.tagName)||(k=k.querySelector('input:not([type="hidden"]):not(.flatpickr-input), select, textarea')),k)try{k.focus({preventScroll:!0}),a.selectErrorText&&k.tagName=="INPUT"&&k.select()}catch{}};D();{let P=L.Idle,T,$;const k=U=>{P=U,e.set(P>=L.Submitting),r.set(P>=L.Delayed),n.set(P>=L.Timeout)};return{submitting:()=>{D(),k(P!=L.Delayed?L.Submitting:L.Delayed),T&&clearTimeout(T),$&&clearTimeout($),T=window.setTimeout(()=>{P==L.Submitting&&k(L.Delayed)},a.delayMs),$=window.setTimeout(()=>{P==L.Delayed&&k(L.Timeout)},a.timeoutMs)},completed:U=>{T&&clearTimeout(T),$&&clearTimeout($),T=$=0,k(L.Idle),U||setTimeout(ce)},scrollToFirstError:()=>setTimeout(ce),isSubmitting:()=>P===L.Submitting||P===L.Delayed}}}const B=K(t);let V;return Kt(t,async w=>{var P;const D=w.cancel;let X=!1;function fe(){return X=!0,D()}if(w.cancel=fe,B.isSubmitting()&&a.multipleSubmits=="prevent")fe();else{B.isSubmitting()&&a.multipleSubmits=="abort"&&V&&V.abort(),V=w.controller;for(const T of y.onSubmit)await T(w)}if(X)a.flashMessage&&Qe(a);else{const T=await vt(a,F(u),F(p),F(c),F(f));if(!T.valid){fe();const $={type:"failure",status:(typeof a.SPA=="boolean"||(P=a.SPA)==null?void 0:P.failStatus)??400,data:{form:T}};setTimeout(()=>ce({result:$}),0)}if(!X){switch(a.clearOnSubmit){case"errors-and-message":g.clear(),h.set(void 0);break;case"errors":g.clear();break;case"message":h.set(void 0);break}a.flashMessage&&(a.clearOnSubmit=="errors-and-message"||a.clearOnSubmit=="message")&&We(a)&&a.flashMessage.module.getFlash(Ee).set(void 0),B.submitting();const $="formData"in w?w.formData:w.data;if(a.SPA){fe();const U={type:"success",status:200,data:{form:{valid:!0,posted:!0,errors:{},data:F(u),constraints:F(c),message:void 0,id:F(p)}}};setTimeout(()=>ce({result:U}),0)}else if(a.dataType==="json"){const k=F(u),U=ge(pt(k),a.jsonChunkSize??5e5);for(const M of U)$.append("__superform_json",M);Object.keys(k).forEach(M=>{typeof $.get(M)=="string"&&$.delete(M)})}if(!a.SPA&&!$.has("__superform_id")){const k=F(p);k!==void 0&&$.set("__superform_id",k)}}}function ge(T,$){const k=Math.ceil(T.length/$),U=new Array(k);for(let M=0,q=0;M<k;++M,q+=$)U[M]=T.substring(q,q+$);return U}async function ce(T){const $=T.result;V=null;let k=!1;const U={result:$,formEl:t,cancel:()=>k=!0};for(const M of y.onResult)await M(U);if(!k){if(($.type==="success"||$.type=="failure")&&$.data){const M=l($.data);if(!M.length)throw new R("No form data returned from ActionResult. Make sure you return { form } in the form actions.");for(const q of M){if(q.id!==F(p))continue;const Oe={form:q,formEl:t,cancel:()=>k=!0};for(const Se of y.onUpdate)await Se(Oe)}}if(!k){if($.type!=="error")$.type==="success"&&a.invalidateAll&&await bt(),a.applyAction?await Ae($):await i($);else{if(a.applyAction)if(a.onError=="apply")await Ae($);else{const M={type:"failure",status:Math.floor($.status||500),data:$};await Ae(M)}if(a.onError!=="apply"){const M={result:$,message:h};for(const q of y.onError)q!=="apply"&&await q(M)}}a.flashMessage&&$.type=="error"&&a.flashMessage.onError&&await a.flashMessage.onError({result:$,message:a.flashMessage.module.getFlash(Ee)})}}k&&a.flashMessage&&Qe(a),(k||$.type!="redirect")&&B.completed(k)}return ce})}new TextEncoder;const er={applyAction:!0,invalidateAll:!0,resetForm:!1,autoFocusOnError:"detect",scrollToError:"smooth",errorSelector:'[aria-invalid="true"],[data-invalid]',selectErrorText:!1,stickyNavbar:void 0,taintedMessage:"Do you want to leave this page? Changes you made may not be saved.",onSubmit:void 0,onResult:void 0,onUpdate:void 0,onUpdated:void 0,onError:t=>{console.warn("Unhandled Superform error, use onError event to handle it:",t.result.error)},dataType:"form",validators:void 0,defaultValidator:"keep",clearOnSubmit:"errors-and-message",delayMs:500,timeoutMs:8e3,multipleSubmits:"prevent",validation:void 0,SPA:void 0,validateMethod:"auto"};function tr(t,e={}){var Se;e={...er,...e},e.SPA&&e.validators===void 0&&console.warn("No validators set for Superform in SPA mode. Add them to the validators option, or set it to false to disable this warning.");let r=e.id;!t||c(t)===!1?(((Se=e.warnings)==null?void 0:Se.noValidationAndConstraints)!==!1&&console.warn((t?"Form data sent directly to superForm instead of through superValidate. No initial data validation is made. ":"No form data sent to superForm, schema type safety cannot be guaranteed. ")+"Also, no constraints will exist for the form. Set the warnings.noValidationAndConstraints option to false to disable this warning."),t={valid:!1,posted:!1,errors:{},data:t??{},constraints:{}}):r===void 0&&(r=t.id);const n=F(Ee).form;if(n&&typeof n=="object"){for(const o of p(n).reverse())if(o.id===r){const _=t;t=o,t.valid&&e.resetForm&&(e.resetForm===!0||e.resetForm())&&(t=de(_),t.message=o.message);break}}const s=t,i=de(s);if(typeof i.valid!="boolean")throw new R("A non-validation object was passed to superForm. Check what's passed to its first parameter.");const a=W(s.errors),u=W(r),h={taintedMessage:e.taintedMessage,taintedFormState:de(i.data)};function d(o=8){return Math.random().toString(36).substring(2,o+2)}function y(o){h.taintedFormState=de(o)}function p(o){var E;const _=Object.values(o).filter(S=>c(S)!==!1);if(_.length>1&&((E=e.warnings)==null?void 0:E.duplicateId)!==!1){const S=new Set;for(const I of _)S.has(I.id)?console.warn(`Duplicate form id found: "${I.id}". Multiple forms will receive the same data. Use the id option to differentiate between them, or if this is intended, set warnings.duplicateId option to false to disable this message.`):S.add(I.id)}return _}function c(o){return!o||typeof o!="object"||!("valid"in o&&"errors"in o&&typeof o.valid=="boolean")?!1:"id"in o&&typeof o.id=="string"?o.id:void 0}function m(){e.taintedMessage=h.taintedMessage,r===void 0&&u.set(d())}function b(o){const _=W(o);return{subscribe:_.subscribe,set:(E,S={})=>(ge(E,h.taintedFormState,S.taint??!0),h.taintedFormState=de(E),_.set(E)),update:(E,S={})=>_.update(I=>{const Q=E(I);return ge(Q,h.taintedFormState,S.taint??!0),h.taintedFormState=de(I),Q})}}const l=[u.subscribe(o=>r=o)];function f(o){l.push(o)}function g(){l.forEach(o=>o())}const N=b(s.data);function v(o,_){if(!(!_||typeof _!="object")){if(Array.isArray(_))_.length>0&&v(o,_[0]);else if(!(_ instanceof Date))throw new R(`Object found in form field "${o}". Set options.dataType = 'json' and use:enhance to use nested data structures.`)}}async function A(o,_){o.valid&&_&&e.resetForm&&(e.resetForm===!0||e.resetForm())?O(o.message):U(o,_),M.onUpdated.length&&await rt();for(const E of M.onUpdated)E({form:o})}function O(o,_,E){const S=de(i);S.data={...S.data,..._},E!==void 0&&(S.id=E),U(S,!0,o)}const pe=async(o,_)=>{if(o.type=="error")throw new R(`ActionResult of type "${o.type}" cannot be passed to update function.`);if(o.type=="redirect"){e.resetForm&&(e.resetForm===!0||e.resetForm())&&O();return}if(typeof o.data!="object")throw new R("Non-object validation data returned from ActionResult.");const E=p(o.data);if(!E.length)throw new R("No form data returned from ActionResult. Make sure you return { form } in the form actions.");for(const S of E)S.id===r&&await A(S,_??(o.status>=200&&o.status<300))},he=W([]),Z=W(s.message),K=W(s.constraints),B=W(!1),V={subscribe:a.subscribe,set:a.set,update:a.update,clear:()=>yt(a,{undefinePath:null,clearFormLevelErrors:!0})},w=W();function D(){return F(w)}function X(o){if(o===null)throw new R("$tainted store contained null");if(typeof o=="object"){for(const _ of Object.values(o))if(X(_))return!0}return o===!0}async function fe(o,_){if(e.validationMethod=="onblur"||e.validationMethod=="submit-only")return!1;let E=e.validationMethod==="oninput";if(!E){const S=F(V),I=S?Vt(S,o,{modifier:Ue=>{if(Ze(o,Ue))throw new R("Errors can only be added to form fields, not to arrays or objects in the schema. Path: "+Ue.path.slice(0,-1));return Ue.value}}):void 0;E=!!(I&&I.key in I.parent)}return E?(await Re(o,e,N,V,w,{taint:_}),!0):!1}async function ge(o,_,E){if(E===!1)return;if(E==="untaint-all"){w.set(void 0);return}let S=xt(o,_);if(typeof E=="object"&&(typeof E.fields=="string"&&(E.fields=[E.fields]),S=E.fields.map(I=>Me(I)),E=!0),E===!0&&he.set(S),S.length){w.update(Q=>(Q||(Q={}),be(Q,S,E===!0?!0:void 0),Q));let I=!1;for(const Q of S)I=I||await fe(Q,E);I||await Jt(e,F(N),V)}}function ce(o,_){w.set(o),y(_)}const P=W(!1),T=W(!1),$=W(!1),k=we(V,o=>o?qt(o):[]);if(e.taintedMessage=void 0,tt(()=>{g();for(const o of Object.values(M))o.length=0}),e.dataType!=="json")for(const[o,_]of Object.entries(s.data))v(o,_);function U(o,_,E){if(_&&ce(typeof _=="boolean"?void 0:_,o.data),E=E??o.message,N.set(o.data,{taint:!1}),Z.set(E),V.set(o.errors),u.set(o.id),B.set(o.posted),e.flashMessage&&We(e)){const S=e.flashMessage.module.getFlash(Ee);E&&F(S)===void 0&&S.set(E)}}const M={onSubmit:e.onSubmit?[e.onSubmit]:[],onResult:e.onResult?[e.onResult]:[],onUpdate:e.onUpdate?[e.onUpdate]:[],onUpdated:e.onUpdated?[e.onUpdated]:[],onError:e.onError?[e.onError]:[]};Dt(o=>{if(e.taintedMessage&&!F(P)){const _=D();_&&X(_)&&!window.confirm(e.taintedMessage)&&o.cancel()}}),f(Ee.subscribe(async o=>{if(!e.applyAction)return;function _(S){throw new R(`No form data found in ${S}. Make sure you return { form } in form actions and load functions.`)}const E=o.status>=200&&o.status<300;if(o.form&&typeof o.form=="object"){if(o.form.type=="error")return;const S=p(o.form);S.length||_("$page.form (ActionData)");for(const I of S)I.id===r&&await A(I,E)}else if(o.data&&typeof o.data=="object"){const S=p(o.data);for(const I of S)I.id===r&&U(I,E)}}));const q=Object.fromEntries(Object.keys(i.data).map(o=>[o,{name:o,value:ye(N,o),errors:ye(V,o),constraints:ye(K,o)}]));function Oe(o,_){return o===void 0?vt(e,F(N),r,F(K),!1):Re(Me(o),e,N,V,w,_)}return{form:N,formId:u,errors:V,message:Z,constraints:K,fields:q,tainted:w,submitting:we(P,o=>o),delayed:we(T,o=>o),timeout:we($,o=>o),options:e,capture:function(){return{valid:i.valid,posted:F(B),errors:F(V),data:F(N),constraints:F(K),message:F(Z),id:r,tainted:F(w)}},restore:function(o){return U(o,o.tainted??!0)},validate:Oe,enhance:(o,_)=>{if(_){if(_.onError){if(e.onError==="apply")throw new R('options.onError is set to "apply", cannot add any onError events.');if(_.onError==="apply")throw new R('Cannot add "apply" as onError event in use:enhance.');M.onError.push(_.onError)}_.onResult&&M.onResult.push(_.onResult),_.onSubmit&&M.onSubmit.push(_.onSubmit),_.onUpdate&&M.onUpdate.push(_.onUpdate),_.onUpdated&&M.onUpdated.push(_.onUpdated)}return zt(o,P,T,$,V,pe,e,N,Z,m,M,u,K,w,he,p,B)},allErrors:k,posted:B,reset:o=>O(o!=null&&o.keepMessage?F(Z):void 0,o==null?void 0:o.data,o==null?void 0:o.id)}}function ze(t){let e,r;return{c(){e=te("span"),r=ue(t[3]),this.h()},l(n){e=re(n,"SPAN",{class:!0});var s=me(e);r=le(s,t[3]),s.forEach(j),this.h()},h(){oe(e,"class","invalid svelte-1ch2xak")},m(n,s){C(n,e,s),H(e,r)},p(n,s){s&8&&lt(r,n[3])},d(n){n&&j(e)}}}function rr(t){let e,r,n,s,i,a,u,h,d,y=[{type:"checkbox"},{name:t[0]},{__value:"true"},t[5]],p={};for(let l=0;l<y.length;l+=1)p=ve(p,y[l]);const c=t[8].default,m=nt(c,t,t[7],null);let b=t[3]&&ze(t);return{c(){e=te("label"),r=te("input"),n=z(),s=te("span"),m&&m.c(),i=z(),b&&b.c(),a=Ne(),this.h()},l(l){e=re(l,"LABEL",{class:!0});var f=me(e);r=re(f,"INPUT",{type:!0,name:!0}),n=ee(f),s=re(f,"SPAN",{class:!0});var g=me(s);m&&m.l(g),g.forEach(j),f.forEach(j),i=ee(l),b&&b.l(l),a=Ne(),this.h()},h(){Te(r,p),Fe(r,"svelte-1ch2xak",!0),oe(s,"class","display-name"),oe(e,"class","svelte-1ch2xak")},m(l,f){C(l,e,f),H(e,r),r.autofocus&&r.focus(),r.checked=t[2],H(e,n),H(e,s),m&&m.m(s,null),C(l,i,f),b&&b.m(l,f),C(l,a,f),u=!0,h||(d=at(r,"change",t[9]),h=!0)},p(l,[f]){Te(r,p=ft(y,[{type:"checkbox"},(!u||f&1)&&{name:l[0]},{__value:"true"},f&32&&l[5]])),f&4&&(r.checked=l[2]),Fe(r,"svelte-1ch2xak",!0),m&&m.p&&(!u||f&128)&&st(m,c,l,l[7],u?ot(c,l[7],f,null):it(l[7]),null),l[3]?b?b.p(l,f):(b=ze(l),b.c(),b.m(a.parentNode,a)):b&&(b.d(1),b=null)},i(l){u||(J(m,l),u=!0)},o(l){G(m,l),u=!1},d(l){l&&(j(e),j(i),j(a)),m&&m.d(l),b&&b.d(l),h=!1,d()}}}function nr(t,e,r){let n;const s=["form","field"];let i=Pe(e,s),a,u=wt,h=()=>(u(),u=$t(n,g=>r(2,a=g)),n),d;t.$$.on_destroy.push(()=>u());let{$$slots:y={},$$scope:p}=e,{form:c}=e,{field:m}=e;const{value:b,errors:l}=gt(c,m);ke(t,l,g=>r(3,d=g));function f(){a=this.checked,n.set(a)}return t.$$set=g=>{e=ve(ve({},e),ut(g)),r(5,i=Pe(e,s)),"form"in g&&r(6,c=g.form),"field"in g&&r(0,m=g.field),"$$scope"in g&&r(7,p=g.$$scope)},h(r(1,n=b)),[m,n,a,d,l,i,c,p,y,f]}class ar extends Be{constructor(e){super(),He(this,e,nr,rr,Ve,{form:6,field:0})}}function et(t){let e,r;return{c(){e=te("span"),r=ue(t[1]),this.h()},l(n){e=re(n,"SPAN",{class:!0});var s=me(e);r=le(s,t[1]),s.forEach(j),this.h()},h(){oe(e,"class","invalid svelte-hpvgb9")},m(n,s){C(n,e,s),H(e,r)},p(n,s){s&2&&lt(r,n[1])},d(n){n&&j(e)}}}function sr(t){let e,r,n,s,i,a,u,h,d,y;const p=t[10].default,c=nt(p,t,t[9],null);let m=[{name:t[0]},{type:"text"},{"aria-invalid":i=t[1]?"true":void 0},t[2],t[7]],b={};for(let f=0;f<m.length;f+=1)b=ve(b,m[f]);let l=t[1]&&et(t);return{c(){e=te("label"),r=te("span"),c&&c.c(),n=z(),s=te("input"),a=z(),l&&l.c(),u=Ne(),this.h()},l(f){e=re(f,"LABEL",{class:!0});var g=me(e);r=re(g,"SPAN",{class:!0});var N=me(r);c&&c.l(N),N.forEach(j),n=ee(g),s=re(g,"INPUT",{name:!0,type:!0,"aria-invalid":!0}),g.forEach(j),a=ee(f),l&&l.l(f),u=Ne(),this.h()},h(){oe(r,"class","display-name"),Te(s,b),Fe(s,"svelte-hpvgb9",!0),oe(e,"class","svelte-hpvgb9")},m(f,g){C(f,e,g),H(e,r),c&&c.m(r,null),H(e,n),H(e,s),s.autofocus&&s.focus(),Je(s,t[3]),C(f,a,g),l&&l.m(f,g),C(f,u,g),h=!0,d||(y=at(s,"input",t[11]),d=!0)},p(f,[g]){c&&c.p&&(!h||g&512)&&st(c,p,f,f[9],h?ot(p,f[9],g,null):it(f[9]),null),Te(s,b=ft(m,[(!h||g&1)&&{name:f[0]},{type:"text"},(!h||g&2&&i!==(i=f[1]?"true":void 0))&&{"aria-invalid":i},g&4&&f[2],g&128&&f[7]])),g&8&&s.value!==f[3]&&Je(s,f[3]),Fe(s,"svelte-hpvgb9",!0),f[1]?l?l.p(f,g):(l=et(f),l.c(),l.m(u.parentNode,u)):l&&(l.d(1),l=null)},i(f){h||(J(c,f),h=!0)},o(f){G(c,f),h=!1},d(f){f&&(j(e),j(a),j(u)),c&&c.d(f),l&&l.d(f),d=!1,y()}}}function ir(t,e,r){const n=["form","field"];let s=Pe(e,n),i,a,u,{$$slots:h={},$$scope:d}=e,{form:y}=e,{field:p}=e;const{value:c,errors:m,constraints:b}=gt(y,p);ke(t,c,f=>r(3,u=f)),ke(t,m,f=>r(1,i=f)),ke(t,b,f=>r(2,a=f));function l(){u=this.value,c.set(u)}return t.$$set=f=>{e=ve(ve({},e),ut(f)),r(7,s=Pe(e,n)),"form"in f&&r(8,y=f.form),"field"in f&&r(0,p=f.field),"$$scope"in f&&r(9,d=f.$$scope)},[p,i,a,u,c,m,b,s,y,d,h,l]}class or extends Be{constructor(e){super(),He(this,e,ir,sr,Ve,{form:8,field:0})}}function ur(t){let e;return{c(){e=ue("Username vergeben")},l(r){e=le(r,"Username vergeben")},m(r,n){C(r,e,n)},d(r){r&&j(e)}}}function lr(t){let e;return{c(){e=ue("Schritt 1 von 3")},l(r){e=le(r,"Schritt 1 von 3")},m(r,n){C(r,e,n)},d(r){r&&j(e)}}}function fr(t){let e;return{c(){e=ue(`Willkommen zum Online-Spiel The Hidden Threat*. Gleich geht es los. Nach der Vergabe des
    Usernamen werden Sie in die Lobby geleitet.`)},l(r){e=le(r,`Willkommen zum Online-Spiel The Hidden Threat*. Gleich geht es los. Nach der Vergabe des
    Usernamen werden Sie in die Lobby geleitet.`)},m(r,n){C(r,e,n)},d(r){r&&j(e)}}}function cr(t){let e;return{c(){e=ue("Dein Username")},l(r){e=le(r,"Dein Username")},m(r,n){C(r,e,n)},d(r){r&&j(e)}}}function dr(t){let e;return{c(){e=ue("Bitte gib Dir einen Username mit maximal 20 Buchstaben.")},l(r){e=le(r,"Bitte gib Dir einen Username mit maximal 20 Buchstaben.")},m(r,n){C(r,e,n)},d(r){r&&j(e)}}}function mr(t){let e;return{c(){e=ue(`Hiermit stimme ich der Speicherung meiner eingegebenen Daten zu und bestätige dass ich
      mindestens 18 Jahre alt bin.*`)},l(r){e=le(r,`Hiermit stimme ich der Speicherung meiner eingegebenen Daten zu und bestätige dass ich
      mindestens 18 Jahre alt bin.*`)},m(r,n){C(r,e,n)},d(r){r&&j(e)}}}function pr(t){let e;return{c(){e=ue("Bestätigen und weiter")},l(r){e=le(r,"Bestätigen und weiter")},m(r,n){C(r,e,n)},d(r){r&&j(e)}}}function hr(t){let e,r;return e=new At({props:{type:"submit",primary:!0,$$slots:{default:[pr]},$$scope:{ctx:t}}}),{c(){ne(e.$$.fragment)},l(n){ae(e.$$.fragment,n)},m(n,s){se(e,n,s),r=!0},p(n,s){const i={};s&4&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){r||(J(e.$$.fragment,n),r=!0)},o(n){G(e.$$.fragment,n),r=!1},d(n){ie(e,n)}}}function br(t){let e,r,n,s,i,a,u,h,d,y,p,c,m,b,l,f,g,N;return e=new Ye({props:{separator:!0,$$slots:{info:[lr],default:[ur]},$$scope:{ctx:t}}}),n=new Ge({props:{$$slots:{default:[fr]},$$scope:{ctx:t}}}),u=new Ye({props:{centered:!0,$$slots:{default:[cr]},$$scope:{ctx:t}}}),d=new Ge({props:{$$slots:{default:[dr]},$$scope:{ctx:t}}}),p=new or({props:{form:t[0],field:"userName",placeholder:"z.B. Vor-und Nachname, Spitzname, Initalen, etc."}}),m=new ar({props:{form:t[0],field:"acceptedTos",$$slots:{default:[mr]},$$scope:{ctx:t}}}),l=new kt({props:{$$slots:{default:[hr]},$$scope:{ctx:t}}}),{c(){ne(e.$$.fragment),r=z(),ne(n.$$.fragment),s=z(),i=te("form"),a=te("div"),ne(u.$$.fragment),h=z(),ne(d.$$.fragment),y=z(),ne(p.$$.fragment),c=z(),ne(m.$$.fragment),b=z(),ne(l.$$.fragment),this.h()},l(v){ae(e.$$.fragment,v),r=ee(v),ae(n.$$.fragment,v),s=ee(v),i=re(v,"FORM",{method:!0,class:!0});var A=me(i);a=re(A,"DIV",{class:!0});var O=me(a);ae(u.$$.fragment,O),h=ee(O),ae(d.$$.fragment,O),y=ee(O),ae(p.$$.fragment,O),O.forEach(j),c=ee(A),ae(m.$$.fragment,A),b=ee(A),ae(l.$$.fragment,A),A.forEach(j),this.h()},h(){oe(a,"class","field svelte-1cansdw"),oe(i,"method","post"),oe(i,"class","svelte-1cansdw")},m(v,A){se(e,v,A),C(v,r,A),se(n,v,A),C(v,s,A),C(v,i,A),H(i,a),se(u,a,null),H(a,h),se(d,a,null),H(a,y),se(p,a,null),H(i,c),se(m,i,null),H(i,b),se(l,i,null),f=!0,g||(N=Et(t[0].enhance(i)),g=!0)},p(v,A){const O={};A&4&&(O.$$scope={dirty:A,ctx:v}),e.$set(O);const pe={};A&4&&(pe.$$scope={dirty:A,ctx:v}),n.$set(pe);const he={};A&4&&(he.$$scope={dirty:A,ctx:v}),u.$set(he);const Z={};A&4&&(Z.$$scope={dirty:A,ctx:v}),d.$set(Z);const K={};A&4&&(K.$$scope={dirty:A,ctx:v}),m.$set(K);const B={};A&4&&(B.$$scope={dirty:A,ctx:v}),l.$set(B)},i(v){f||(J(e.$$.fragment,v),J(n.$$.fragment,v),J(u.$$.fragment,v),J(d.$$.fragment,v),J(p.$$.fragment,v),J(m.$$.fragment,v),J(l.$$.fragment,v),f=!0)},o(v){G(e.$$.fragment,v),G(n.$$.fragment,v),G(u.$$.fragment,v),G(d.$$.fragment,v),G(p.$$.fragment,v),G(m.$$.fragment,v),G(l.$$.fragment,v),f=!1},d(v){v&&(j(r),j(s),j(i)),ie(e,v),ie(n,v),ie(u),ie(d),ie(p),ie(m),ie(l),g=!1,N()}}}function gr(t){let e,r;return e=new St({props:{paddedContent:!0,$$slots:{default:[br]},$$scope:{ctx:t}}}),{c(){ne(e.$$.fragment)},l(n){ae(e.$$.fragment,n)},m(n,s){se(e,n,s),r=!0},p(n,[s]){const i={};s&4&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){r||(J(e.$$.fragment,n),r=!0)},o(n){G(e.$$.fragment,n),r=!1},d(n){ie(e,n)}}}function _r(t,e,r){let{data:n}=e;const s=tr(n);return t.$$set=i=>{"data"in i&&r(1,n=i.data)},[s,n]}class Tr extends Be{constructor(e){super(),He(this,e,_r,gr,Ve,{data:1})}}export{Tr as U};
