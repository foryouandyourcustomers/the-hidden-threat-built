import{$ as Z,a0 as $,s as J,l as D,e as M,a as T,c as S,b as E,q as x,g as q,f as w,m as C,i as K,h as k,u as V,o as P,p as W,N as G,C as I,I as N,a1 as ee,a2 as A,x as se,k as te,H as ne,J as oe}from"./scheduler.919cf977.js";import{S as L,i as R,t as y,b as z,c as ae,a as le,m as re,d as ie}from"./index.6a811cc0.js";import{r as de}from"./index.5157fae5.js";function ue(e,t){return e===t}const fe=(e,t,s=ue)=>{let o,a=t(e.getSnapshot());return de(a,h=>{const i=d=>{const r=t(d);s(a,r)||(a=r,h(r))};return i(e.getSnapshot()),o=e.subscribe(i),()=>{o.unsubscribe()}})},X={},ye=e=>{Z(X,e)},ce=()=>$(X),j=(e,t)=>{const s=t.users.find(o=>o.id===e);if(!s)throw new Error(`The user with id ${e} was not found.`);return s},ze=(e,t)=>j(e,t).isAdmin,_e=e=>j(e.userId,e);function he(e){let t,s,o="The hidden threat",a,l;const h=e[1].default,i=D(h,e,e[0],null);return{c(){t=M("div"),s=M("div"),s.textContent=o,a=T(),i&&i.c(),this.h()},l(d){t=S(d,"DIV",{class:!0});var r=E(t);s=S(r,"DIV",{class:!0,"data-svelte-h":!0}),x(s)!=="svelte-xbe4by"&&(s.textContent=o),a=q(r),i&&i.l(r),r.forEach(w),this.h()},h(){C(s,"class","title svelte-1d60vr1"),C(t,"class","header svelte-1d60vr1")},m(d,r){K(d,t,r),k(t,s),k(t,a),i&&i.m(t,null),l=!0},p(d,[r]){i&&i.p&&(!l||r&1)&&V(i,h,d,d[0],l?W(h,d[0],r,null):P(d[0]),null)},i(d){l||(y(i,d),l=!0)},o(d){z(i,d),l=!1},d(d){d&&w(t),i&&i.d(d)}}}function me(e,t,s){let{$$slots:o={},$$scope:a}=t;return e.$$set=l=>{"$$scope"in l&&s(0,a=l.$$scope)},[a,o]}class pe extends L{constructor(t){super(),R(this,t,me,he,J,{})}}const ve=e=>({}),U=e=>({}),ge=e=>({}),Y=e=>({});function be(e){let t;const s=e[13].header,o=D(s,e,e[17],Y);return{c(){o&&o.c()},l(a){o&&o.l(a)},m(a,l){o&&o.m(a,l),t=!0},p(a,l){o&&o.p&&(!t||l&131072)&&V(o,s,a,a[17],t?W(s,a[17],l,ge):P(a[17]),Y)},i(a){t||(y(o,a),t=!0)},o(a){z(o,a),t=!1},d(a){o&&o.d(a)}}}function we(e){let t,s,o,a,l,h,i,d,r,b,v;G(e[14]),o=new pe({props:{$$slots:{default:[be]},$$scope:{ctx:e}}});const p=e[13].default,u=D(p,e,e[17],null),g=e[13].overlays,c=D(g,e,e[17],U);return{c(){t=M("div"),s=M("div"),ae(o.$$.fragment),a=T(),l=M("div"),u&&u.c(),h=T(),c&&c.c(),this.h()},l(n){t=S(n,"DIV",{class:!0});var _=E(t);s=S(_,"DIV",{class:!0});var m=E(s);le(o.$$.fragment,m),a=q(m),l=S(m,"DIV",{class:!0});var B=E(l);u&&u.l(B),B.forEach(w),h=q(m),c&&c.l(m),m.forEach(w),_.forEach(w),this.h()},h(){C(l,"class","content svelte-ovklwv"),I(l,"padded",e[1]),C(s,"class",i="board "+(e[8]?`side-${e[8]}`:"")+" svelte-ovklwv"),G(()=>e[16].call(s)),I(s,"backdrop",e[0]),C(t,"class","board-wrapper svelte-ovklwv"),N(t,"--board-scale",e[7])},m(n,_){K(n,t,_),k(t,s),re(o,s,null),k(s,a),k(s,l),u&&u.m(l,null),k(s,h),c&&c.m(s,null),e[15](s),d=ee(s,e[16].bind(s)),r=!0,b||(v=[A(window,"resize",e[11]),A(window,"resize",e[14]),A(s,"mousemove",e[10])],b=!0)},p(n,[_]){const m={};_&131072&&(m.$$scope={dirty:_,ctx:n}),o.$set(m),u&&u.p&&(!r||_&131072)&&V(u,p,n,n[17],r?W(p,n[17],_,null):P(n[17]),null),(!r||_&2)&&I(l,"padded",n[1]),c&&c.p&&(!r||_&131072)&&V(c,g,n,n[17],r?W(g,n[17],_,ve):P(n[17]),U),(!r||_&256&&i!==(i="board "+(n[8]?`side-${n[8]}`:"")+" svelte-ovklwv"))&&C(s,"class",i),(!r||_&257)&&I(s,"backdrop",n[0]),_&128&&N(t,"--board-scale",n[7])},i(n){r||(y(o.$$.fragment,n),y(u,n),y(c,n),r=!0)},o(n){z(o.$$.fragment,n),z(u,n),z(c,n),r=!1},d(n){n&&w(t),ie(o),u&&u.d(n),c&&c.d(n),e[15](null),d(),b=!1,se(v)}}}function Ce(e,t,s){let o,{$$slots:a={},$$scope:l}=t,{reportMousePosition:h=void 0}=t,{showBackdrop:i=!1}=t,{paddedContent:d=!1}=t;const{machine:r}=ce(),b=fe(r.service,({context:f})=>{const H=_e(f);if(H.isAdmin)return H.side});te(e,b,f=>s(8,o=f));let v,p=1,u=1,g=1,c=1,n=1;const _=f=>{if(!h)return;const H=(f.clientX-v.offsetLeft)/p,Q=(f.clientY-v.offsetTop)/u;h([(H-(1-n)/2)/n,(Q-(1-n)/2)/n])},m=()=>{s(7,n=Math.min(g/(p+20),c/(u+20))),n>=1.3?s(7,n=1.3):s(7,n=Math.min(n,1))};ne(m);function B(){s(5,g=window.innerWidth),s(6,c=window.innerHeight)}function F(f){oe[f?"unshift":"push"](()=>{v=f,s(2,v)})}function O(){p=this.clientWidth,u=this.clientHeight,s(3,p),s(4,u)}return e.$$set=f=>{"reportMousePosition"in f&&s(12,h=f.reportMousePosition),"showBackdrop"in f&&s(0,i=f.showBackdrop),"paddedContent"in f&&s(1,d=f.paddedContent),"$$scope"in f&&s(17,l=f.$$scope)},[i,d,v,p,u,g,c,n,o,b,_,m,h,a,B,F,O,l]}class Be extends L{constructor(t){super(),R(this,t,Ce,we,J,{reportMousePosition:12,showBackdrop:0,paddedContent:1})}}export{Be as B,ce as a,fe as b,j as c,_e as g,ye as s,ze as u};
