import{S as Ce,i as Oe,s as je,m as Le,e as W,c as J,b as re,f as j,A as ne,h as Y,u as Re,o as Ue,p as De,q as Ve,r as qe,W as A,X as Xe,V as Qe,G as oe,a as _e,E as ve,g as ge,Y as we,I as Ee,j as z,J as $e,K as ze,Z as Se,l as be,_ as et,t as tt,d as rt,k as nt,n as yt,v as pt,$ as We}from"./index.b40a0fed.js";import{p as ce}from"./stores.015e57d6.js";import{d as le,w as q}from"./index.721ce0c9.js";import{D as Te,U as at,N as bt,P as ht,a as _t,b as st,i as Je,g as vt,c as gt,s as se,H as wt,p as it}from"./parse.1d2978b5.js";import{j as G}from"./singletons.5b28a2eb.js";const Et=!0;function ot(t,e){const a=[],i=new Map,r=[];for(const d in e)r.push({key:d,fn:e[d]});const s=[];let n=0;function f(d){if(typeof d=="function")throw new Te("Cannot stringify a function",s);if(i.has(d))return i.get(d);if(d===void 0)return at;if(Number.isNaN(d))return bt;if(d===1/0)return ht;if(d===-1/0)return _t;if(d===0&&1/d<0)return st;const w=n++;i.set(d,w);for(const{key:c,fn:p}of r){const b=p(d);if(b)return a[w]=`["${c}",${f(b)}]`,w}let y="";if(Je(d))y=Pe(d);else switch(vt(d)){case"Number":case"String":case"Boolean":y=`["Object",${Pe(d)}]`;break;case"BigInt":y=`["BigInt",${d}]`;break;case"Date":y=`["Date","${d.toISOString()}"]`;break;case"RegExp":const{source:p,flags:b}=d;y=b?`["RegExp",${se(p)},"${b}"]`:`["RegExp",${se(p)}]`;break;case"Array":y="[";for(let l=0;l<d.length;l+=1)l>0&&(y+=","),l in d?(s.push(`[${l}]`),y+=f(d[l]),s.pop()):y+=wt;y+="]";break;case"Set":y='["Set"';for(const l of d)y+=`,${f(l)}`;y+="]";break;case"Map":y='["Map"';for(const[l,u]of d)s.push(`.get(${Je(l)?Pe(l):"..."})`),y+=`,${f(l)},${f(u)}`;y+="]";break;default:if(!gt(d))throw new Te("Cannot stringify arbitrary non-POJOs",s);if(Object.getOwnPropertySymbols(d).length>0)throw new Te("Cannot stringify POJOs with symbolic keys",s);if(Object.getPrototypeOf(d)===null){y='["null"';for(const l in d)s.push(`.${l}`),y+=`,${se(l)},${f(d[l])}`,s.pop();y+="]"}else{y="{";let l=!1;for(const u in d)l&&(y+=","),l=!0,s.push(`.${u}`),y+=`${se(u)}:${f(d[u])}`,s.pop();y+="}"}}return a[w]=y,w}const m=f(t);return m<0?`${m}`:`[${a.join(",")}]`}function Pe(t){const e=typeof t;return e==="string"?se(t):t instanceof String?se(t.toString()):t===void 0?at.toString():t===0&&1/t<0?st.toString():e==="bigint"?`["BigInt","${t}"]`:String(t)}const ut=Et;function St(t){let e,a;const i=t[1].default,r=Le(i,t,t[0],null);return{c(){e=W("div"),r&&r.c(),this.h()},l(s){e=J(s,"DIV",{class:!0});var n=re(e);r&&r.l(n),n.forEach(j),this.h()},h(){ne(e,"class","centered svelte-1m2gxp2")},m(s,n){Y(s,e,n),r&&r.m(e,null),a=!0},p(s,[n]){r&&r.p&&(!a||n&1)&&Re(r,i,s,s[0],a?De(i,s[0],n,null):Ue(s[0]),null)},i(s){a||(Ve(r,s),a=!0)},o(s){qe(r,s),a=!1},d(s){s&&j(e),r&&r.d(s)}}}function kt(t,e,a){let{$$slots:i={},$$scope:r}=e;return t.$$set=s=>{"$$scope"in s&&a(0,r=s.$$scope)},[r,i]}class Qt extends Ce{constructor(e){super(),Oe(this,e,kt,St,je,{})}}G.disable_scroll_handling;G.goto;G.invalidate;const lt=G.invalidateAll;G.preload_data;G.preload_code;const At=G.before_navigate,Ft=G.after_navigate;function Ze(t){return t.toString().split(/[[\].]+/).filter(e=>e)}function Nt(t){return t.reduce((e,a)=>(typeof a=="number"||!isNaN(parseInt(String(a),10))?e+=`[${String(a)}]`:e?e+=`.${String(a)}`:e+=String(a),e),"")}class O extends Error{constructor(e){super(e),Object.setPrototypeOf(this,O.prototype)}}function ke(t,e,a){return t[e]=a,"skip"}function He(t,e){return e.value!==void 0&&typeof e.value!="object"&&e.path.length<t.length}function Tt(t,e,a={}){a.modifier||(a.modifier=r=>He(e,r)?void 0:r.value);const i=U(t,e,a.modifier);if(i)return a.value===void 0||a.value(i.value)?i:void 0}function U(t,e,a){if(!e.length)return;const i=[e[0]];let r=t;for(;i.length<e.length;){const n=i[i.length-1],f=a?a({parent:r,key:String(n),value:r[n],path:i.map(m=>String(m)),isLeaf:!1,set:m=>ke(r,n,m)}):r[n];if(f===void 0)return;r=f,i.push(e[i.length])}const s=e[e.length-1];return{parent:r,key:String(s),value:r[s],path:e.map(n=>String(n)),isLeaf:!0,set:n=>ke(r,s,n)}}function B(t,e,a=[]){for(const i in t){const r=t[i],s=r===null||typeof r!="object",n={parent:t,key:i,value:r,path:a.map(String).concat([i]),isLeaf:s,set:m=>ke(t,i,m)},f=e(n);if(f==="abort")return f;if(f==="skip")continue;if(!s){const m=B(r,e,n.path);if(m==="abort")return m}}}async function Pt(t,e,a=[]){for(const i in t){const r=t[i],s=r===null||typeof r!="object",n={parent:t,key:i,value:r,path:a.map(String).concat([i]),isLeaf:s,set:m=>ke(t,i,m)},f=await e(n);if(f==="abort")return f;if(f==="skip")break;if(!s){const m=B(r,e,n.path);if(m==="abort")return m}}}function Mt(t,e){const a=new Map;function i(r,s){if(r.isLeaf){const n=U(s,r.path);n?(r.value instanceof Date&&n.value instanceof Date&&r.value.getTime()!=n.value.getTime()||r.value!==n.value)&&a.set(r.path.join(" "),r.path):a.set(r.path.join(" "),r.path)}}return B(t,r=>i(r,e)),B(e,r=>i(r,t)),Array.from(a.values())}function te(t,e,a){for(const i of e){const r=U(t,i,({parent:s,key:n,value:f})=>((f===void 0||typeof f!="object")&&(s[n]={}),s[n]));r&&(r.parent[r.key]=a)}}function ft(t,e){const i=Ze(e).filter(r=>isNaN(parseInt(String(r)))).join(".");return{path:e,value:ie(t.form,e),errors:ie(t.errors,e),constraints:ie(t.constraints,i)}}function ie(t,e){const a=Ze(e),i=le(t,r=>{const s=U(r,a);return s==null?void 0:s.value});return{subscribe(...r){const s=i.subscribe(...r);return()=>{s()}},update(r){t.update(s=>{const n=U(s,a);return n&&(n.parent[n.key]=r(n.value)),s})},set(r){t.update(s=>{const n=U(s,a);return n&&(n.parent[n.key]=r),s})}}}function $(t){return"structuredClone"in globalThis?structuredClone(t):it(ot(t))}function It(t){const e=t;let a=!0,i=!1,r=!1,s=!1,n,f;for(;a;)t._def.typeName=="ZodNullable"?(i=!0,t=t.unwrap()):t._def.typeName=="ZodDefault"?(s=!0,f=t._def.defaultValue(),t=t._def.innerType):t._def.typeName=="ZodOptional"?(r=!0,t=t.unwrap()):t._def.typeName=="ZodEffects"?(n||(n=t),t=t._def.schema):t._def.typeName=="ZodPipeline"?t=t._def.out:a=!1;return{zodType:t,originalType:e,isNullable:i,isOptional:r,hasDefault:s,defaultValue:f,effects:n}}const Me=new WeakMap;function Be(t){return Me.has(t)||Me.set(t,fe(t)),Me.get(t)}function fe(t){const e=It(t).zodType;if(e._def.typeName=="ZodObject")return Object.fromEntries(Object.entries(e.shape).map(([a,i])=>[a,fe(i)]).filter(a=>a[1]!==void 0));if(e._def.typeName=="ZodArray")return fe(e._def.type)??{};if(e._def.typeName=="ZodRecord")return fe(e._def.valueType)??{};if(e._def.typeName=="ZodUnion")return e._def.options.reduce((i,r)=>{const s=fe(r);return s&&(i={...i??{},...s}),i},void 0)}function Ae(t,e,a=!0){const i={},r=Object.entries(t);if("_errors"in t&&t._errors.length){if(!e||!a)return t._errors;i._errors=t._errors}for(const[s,n]of r.filter(([f])=>f!=="_errors")){const f=!isNaN(parseInt(s,10));i[s]=Ae(n,e?f?e:e[s]:void 0,!!(e!=null&&e[s]))}return i}function Ct(t){return ct(t,[])}function ct(t,e){return Object.entries(t).filter(([,i])=>i!==void 0).flatMap(([i,r])=>{if(Array.isArray(r)&&r.length>0){const s=e.concat([i]);return{path:Nt(s),messages:r}}else return ct(t[i],e.concat([i]))})}function dt(t,e){t.update(a=>(B(a,i=>{if(!(i.path.length==1&&i.path[0]=="_errors"&&!e.clearFormLevelErrors)&&Array.isArray(i.value))return i.set(void 0)}),e.undefinePath&&te(a,[e.undefinePath],void 0),a))}async function mt(t,e,a,i,r){return Ot(t.validators,e,a,i,r)}async function Ot(t,e,a,i,r){if(t){let s,n={};if("safeParseAsync"in t){const f=t,m=await f.safeParseAsync(e);s=m.success,m.success||(n=Ae(m.error.format(),Be(f)))}else{s=!0;const f=t,m=[];await Pt(e,async({value:d,path:w})=>{const y=w.filter(p=>isNaN(parseInt(p))),c=U(f,y);if(typeof(c==null?void 0:c.value)=="function"){const p=c.value;if(Array.isArray(d))for(const b in d){const l=await p(d[b]);l&&(s=!1,m.push({path:w.concat([b]),errors:typeof l=="string"?[l]:l??void 0}))}else{const b=await p(d);b&&(s=!1,m.push({path:w,errors:typeof b=="string"?[b]:b??void 0}))}}});for(const{path:d,errors:w}of m){const y=U(n,d,({parent:c,key:p,value:b})=>(b===void 0&&(c[p]={}),c[p]));if(y){const{parent:c,key:p}=y;c[p]=w}}}if(!s)return{valid:!1,posted:r,errors:n,data:e,constraints:i,message:void 0,id:a}}return{valid:!0,posted:r,errors:{},data:e,constraints:i,message:void 0,id:a}}async function jt(t,e,a){if(typeof t.validators!="object"||!("safeParseAsync"in t.validators))return;const i=t.validators,r=await i.safeParseAsync(e);if(r.success)a.update(s=>(B(s,n=>{if(n.key=="_errors")return n.set(void 0)}),s));else{const s=Ae(r.error.format(),Be(i));a.update(n=>(B(n,f=>{if(f.key=="_errors")return f.set(void 0)}),B(s,f=>{if(f.key=="_errors")return te(n,[f.path],f.value)}),n))}}async function Ie(t,e,a,i,r,s={}){function n(){dt(i,{undefinePath:t,clearFormLevelErrors:!0})}function f(d){return typeof d=="string"&&(d=[d]),(s.update===!0||s.update=="errors")&&i.update(w=>{const y=U(w,t,c=>{if(He(t,c))throw new O("Errors can only be added to form fields, not to arrays or objects in the schema. Path: "+c.path.slice(0,-1));return c.value===void 0?(c.parent[c.key]={},c.parent[c.key]):c.value});if(!y)throw new O("Error path could not be created: "+t);return y.parent[y.key]=d??void 0,w}),d??void 0}const m=await Lt(t,e.validators,a,i,r,s);if(m.validated)if(m.validated==="all"&&!m.errors)n();else return f(m.errors);else if(m.validated===!1&&e.defaultValidator=="clear")return f(void 0);return m.errors}async function Lt(t,e,a,i,r,s={}){s.update===void 0&&(s.update=!0),s.taint===void 0&&(s.taint=!1),typeof s.errors=="string"&&(s.errors=[s.errors]);const n={value:s.value,shouldUpdate:!0,currentData:void 0,validationPath:t.filter(c=>isNaN(parseInt(c)))};async function f(){return{validated:!1,errors:void 0}}function m(c,p){if(p===void 0)return!1;const b=U(p,c);return b?b.value===!0:!1}function d(c){i.update(c)}function w(){i.update(c=>(c._errors=void 0,c))}function y(c,p){return Ae(c.format(),Be(p))}if("value"in s)s.update===!0||s.update==="value"?a.update(c=>(te(c,[t],n.value),n.currentData=c),{taint:s.taint}):n.shouldUpdate=!1;else{n.currentData=A(a);const c=U(n.currentData,t);n.value=c==null?void 0:c.value}if(typeof e!="object")return f();if("safeParseAsync"in e){n.shouldUpdate||(n.currentData=$(n.currentData??A(a)),te(n.currentData,[t],n.value));const c=await e.safeParseAsync(n.currentData);if(c.success)return w(),{validated:!0,errors:void 0};{const p=y(c.error,e);if(s.update===!0||s.update=="errors"){const l=A(r);d(u=>(B(u,_=>{if(_.key=="_errors")return _.set(void 0)}),B(p,_=>{if(_.key=="_errors")return te(u,[_.path],_.value);if(Array.isArray(_.value))return m(_.path,l)&&te(u,[_.path],_.value),"skip"}),u))}const b=U(p,t);return{validated:!0,errors:s.errors??(b==null?void 0:b.value)}}}else{const c=U(e,n.validationPath);if(c){if(c.value===void 0)return f();{const p=await c.value(n.value);return{validated:!0,errors:p&&(s.errors??p)}}}else throw new O("No Superforms validator found: "+t)}}const he=G.apply_action;function Rt(t){const e=JSON.parse(t);return e.data&&(e.data=it(e.data)),e}function Ut(t,e=()=>{}){const a=async({action:r,result:s,reset:n})=>{s.type==="success"&&(n!==!1&&HTMLFormElement.prototype.reset.call(t),await lt()),(location.origin+location.pathname===r.origin+r.pathname||s.type==="redirect"||s.type==="error")&&he(s)};async function i(r){var p,b,l;r.preventDefault();const s=new URL((p=r.submitter)!=null&&p.hasAttribute("formaction")?r.submitter.formAction:HTMLFormElement.prototype.cloneNode.call(t).action),n=new FormData(t),f=(b=r.submitter)==null?void 0:b.getAttribute("name");f&&n.append(f,((l=r.submitter)==null?void 0:l.getAttribute("value"))??"");const m=new AbortController;let d=!1;const y=await e({action:s,cancel:()=>d=!0,controller:m,data:n,form:t,submitter:r.submitter})??a;if(d)return;let c;try{const u=await fetch(s,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:n,signal:m.signal});c=Rt(await u.text()),c.type==="error"&&(c.status=u.status)}catch(u){if((u==null?void 0:u.name)==="AbortError")return;c={type:"error",error:u}}y({action:s,data:n,form:t,update:u=>a({action:s,result:c,reset:u==null?void 0:u.reset}),result:c})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",i),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",i)}}}const Dt=(t,e=0)=>{const a=t.getBoundingClientRect();return a.top>=e&&a.left>=0&&a.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&a.right<=(window.innerWidth||document.documentElement.clientWidth)},Vt=(t,e=1.125,a="smooth")=>{const s=t.getBoundingClientRect().top+window.pageYOffset-window.innerHeight/(2*e);window.scrollTo({left:0,top:s,behavior:a})};var C;(function(t){t[t.Idle=0]="Idle",t[t.Submitting=1]="Submitting",t[t.Delayed=2]="Delayed",t[t.Timeout=3]="Timeout"})(C||(C={}));function Ye(t){!t.flashMessage||!ut||xe(t)&&(document.cookie=`flash=; Max-Age=0; Path=${t.flashMessage.cookiePath??"/"};`)}function xe(t){return!t.flashMessage||!ut?!1:t.syncFlashMessage}function qt(t,e,a,i,r,s,n,f,m,d,w,y,c,p,b,l,u){d();const _=r;async function R(g){await Ie(g,n,f,_,p)}function de(g){return g&&(g instanceof HTMLSelectElement||g instanceof HTMLInputElement&&g.type=="radio")}async function ue(g){if(!(n.validationMethod=="oninput"||n.validationMethod=="submit-only")){de(g.target)&&await new Promise(I=>setTimeout(I,0));for(const I of A(b))R(I);b.set([])}}t.addEventListener("focusout",ue);const x=new Set;function me(g){const I=g.target;n.selectErrorText&&I.select()}function ye(g){g.querySelectorAll("input").forEach(I=>{I.addEventListener("invalid",me)})}function K(g){g.querySelectorAll("input").forEach(I=>I.removeEventListener("invalid",me))}Ft(g=>{g.type=="goto"&&D.completed(!0)}),Xe(()=>{x.forEach(g=>K(g)),x.clear(),t.removeEventListener("focusout",ue),D.completed(!0)});function ee(g){function I(){if(n.selectErrorText){const N=X();N&&g!==N&&(K(N),x.delete(N)),x.has(g)||(ye(g),x.add(g))}Z=g}let Z;function X(){return Z}function ae(N){return typeof n.autoFocusOnError=="boolean"?n.autoFocusOnError:!/iPhone|iPad|iPod|Android/i.test(N)}const Q=async()=>{if(n.scrollToError=="off")return;const N=n.errorSelector;if(!N)return;await Qe();let F;if(F=Z.querySelector(N),!F)return;F=F.querySelector(N)??F;const v=n.stickyNavbar?document.querySelector(n.stickyNavbar):null;if(Dt(F,(v==null?void 0:v.offsetHeight)??0)||Vt(F,void 0,n.scrollToError),!ae(navigator.userAgent))return;let k;if(k=F,["INPUT","SELECT","BUTTON","TEXTAREA"].includes(k.tagName)||(k=k.querySelector('input:not([type="hidden"]):not(.flatpickr-input), select, textarea')),k)try{k.focus({preventScroll:!0}),n.selectErrorText&&k.tagName=="INPUT"&&k.select()}catch{}};I();{let N=C.Idle,F,v;const k=M=>{N=M,e.set(N>=C.Submitting),a.set(N>=C.Delayed),i.set(N>=C.Timeout)};return{submitting:()=>{I(),k(N!=C.Delayed?C.Submitting:C.Delayed),F&&clearTimeout(F),v&&clearTimeout(v),F=window.setTimeout(()=>{N==C.Submitting&&k(C.Delayed)},n.delayMs),v=window.setTimeout(()=>{N==C.Delayed&&k(C.Timeout)},n.timeoutMs)},completed:M=>{F&&clearTimeout(F),v&&clearTimeout(v),F=v=0,k(C.Idle),M||setTimeout(Q)},scrollToFirstError:()=>setTimeout(Q),isSubmitting:()=>N===C.Submitting||N===C.Delayed}}}const D=ee(t);let L;return Ut(t,async g=>{var N;const I=g.cancel;let Z=!1;function X(){return Z=!0,I()}if(g.cancel=X,D.isSubmitting()&&n.multipleSubmits=="prevent")X();else{D.isSubmitting()&&n.multipleSubmits=="abort"&&L&&L.abort(),L=g.controller;for(const F of w.onSubmit)await F(g)}if(Z)n.flashMessage&&Ye(n);else{const F=await mt(n,A(f),A(y),A(c),A(u));if(!F.valid){X();const v={type:"failure",status:(typeof n.SPA=="boolean"||(N=n.SPA)==null?void 0:N.failStatus)??400,data:{form:F}};setTimeout(()=>Q({result:v}),0)}if(!Z){switch(n.clearOnSubmit){case"errors-and-message":_.clear(),m.set(void 0);break;case"errors":_.clear();break;case"message":m.set(void 0);break}n.flashMessage&&(n.clearOnSubmit=="errors-and-message"||n.clearOnSubmit=="message")&&xe(n)&&n.flashMessage.module.getFlash(ce).set(void 0),D.submitting();const v=g.formData??g.data;if(n.SPA){X();const M={type:"success",status:200,data:{form:{valid:!0,posted:!0,errors:{},data:A(f),constraints:A(c),message:void 0,id:A(y)}}};setTimeout(()=>Q({result:M}),0)}else if(n.dataType==="json"){const k=A(f),M=ae(ot(k),n.jsonChunkSize??5e5);for(const T of M)v.append("__superform_json",T);Object.keys(k).forEach(T=>{typeof v.get(T)=="string"&&v.delete(T)})}if(!n.SPA&&!v.has("__superform_id")){const k=A(y);k!==void 0&&v.set("__superform_id",k)}}}function ae(F,v){const k=Math.ceil(F.length/v),M=new Array(k);for(let T=0,V=0;T<k;++T,V+=v)M[T]=F.substring(V,V+v);return M}async function Q(F){const v=F.result;L=null;let k=!1;const M={result:v,formEl:t,cancel:()=>k=!0};for(const T of w.onResult)await T(M);if(!k){if((v.type==="success"||v.type=="failure")&&v.data){const T=l(v.data);if(!T.length)throw new O("No form data returned from ActionResult. Make sure you return { form } in the form actions.");for(const V of T){if(V.id!==A(y))continue;const Fe={form:V,formEl:t,cancel:()=>k=!0};for(const pe of w.onUpdate)await pe(Fe)}}if(!k){if(v.type!=="error")v.type==="success"&&n.invalidateAll&&await lt(),n.applyAction?await he(v):await s(v);else{if(n.applyAction)if(n.onError=="apply")await he(v);else{const T={type:"failure",status:Math.floor(v.status||500),data:v};await he(T)}if(n.onError!=="apply"){const T={result:v,message:m};for(const V of w.onError)V!=="apply"&&await V(T)}}n.flashMessage&&v.type=="error"&&n.flashMessage.onError&&await n.flashMessage.onError({result:v,message:n.flashMessage.module.getFlash(ce)})}}k&&n.flashMessage&&Ye(n),(k||v.type!="redirect")&&D.completed(k)}return Q})}new TextEncoder;const Zt={applyAction:!0,invalidateAll:!0,resetForm:!1,autoFocusOnError:"detect",scrollToError:"smooth",errorSelector:'[aria-invalid="true"],[data-invalid]',selectErrorText:!1,stickyNavbar:void 0,taintedMessage:"Do you want to leave this page? Changes you made may not be saved.",onSubmit:void 0,onResult:void 0,onUpdate:void 0,onUpdated:void 0,onError:t=>{console.warn("Unhandled Superform error, use onError event to handle it:",t.result.error)},dataType:"form",validators:void 0,defaultValidator:"keep",clearOnSubmit:"errors-and-message",delayMs:500,timeoutMs:8e3,multipleSubmits:"prevent",validation:void 0,SPA:void 0,validateMethod:"auto"};function $t(t,e={}){var pe;e={...Zt,...e},e.SPA&&e.validators===void 0&&console.warn("No validators set for Superform in SPA mode. Add them to the validators option, or set it to false to disable this warning.");let a=e.id;!t||c(t)===!1?(((pe=e.warnings)==null?void 0:pe.noValidationAndConstraints)!==!1&&console.warn((t?"Form data sent directly to superForm instead of through superValidate. No initial data validation is made. ":"No form data sent to superForm, schema type safety cannot be guaranteed. ")+"Also, no constraints will exist for the form. Set the warnings.noValidationAndConstraints option to false to disable this warning."),t={valid:!1,posted:!1,errors:{},data:t??{},constraints:{}}):a===void 0&&(a=t.id);const i=A(ce).form;if(i&&typeof i=="object"){for(const o of y(i).reverse())if(o.id===a){const h=t;t=o,t.valid&&e.resetForm&&(e.resetForm===!0||e.resetForm())&&(t=$(h),t.message=o.message);break}}const r=t,s=$(r);if(typeof s.valid!="boolean")throw new O("A non-validation object was passed to superForm. Check what's passed to its first parameter.");const n=q(r.errors),f=q(a),m={taintedMessage:e.taintedMessage,taintedFormState:$(s.data)};function d(o=8){return Math.random().toString(36).substring(2,o+2)}function w(o){m.taintedFormState=$(o)}function y(o){var E;const h=Object.values(o).filter(S=>c(S)!==!1);if(h.length>1&&((E=e.warnings)==null?void 0:E.duplicateId)!==!1){const S=new Set;for(const P of h)if(S.has(P.id)){console.warn(`Duplicate form id found: "${P.id}". Multiple forms will receive the same data. Use the id option to differentiate between them, or if this is intended, set warnings.duplicateId option to false to disable this message.`);break}else S.add(P.id)}return h}function c(o){return!o||typeof o!="object"||!("valid"in o&&"errors"in o&&typeof o.valid=="boolean")?!1:"id"in o&&typeof o.id=="string"?o.id:void 0}function p(){e.taintedMessage=m.taintedMessage,a===void 0&&f.set(d())}function b(o){const h=q(o);return{subscribe:h.subscribe,set:(E,S={})=>(ae(E,m.taintedFormState,S.taint??!0),m.taintedFormState=$(E),h.set(E)),update:(E,S={})=>h.update(P=>{const H=E(P);return ae(H,m.taintedFormState,S.taint??!0),m.taintedFormState=$(P),H})}}const l=[f.subscribe(o=>a=o)];function u(o){l.push(o)}function _(){l.forEach(o=>o())}const R=b(r.data);function de(o,h){if(!(!h||typeof h!="object")){if(Array.isArray(h))h.length>0&&de(o,h[0]);else if(!(h instanceof Date))throw new O(`Object found in form field "${o}". Set options.dataType = 'json' and use:enhance to use nested data structures.`)}}async function ue(o,h){o.valid&&e.resetForm&&(e.resetForm===!0||e.resetForm())?x(o.message):M(o,h),T.onUpdated.length&&await Qe();for(const E of T.onUpdated)E({form:o})}function x(o,h,E){const S=$(s);S.data={...S.data,...h},E!==void 0&&(S.id=E),M(S,!0,o)}const me=async(o,h)=>{if(o.type=="error")throw new O(`ActionResult of type "${o.type}" cannot be passed to update function.`);if(o.type=="redirect"){e.resetForm&&(e.resetForm===!0||e.resetForm())&&x();return}if(typeof o.data!="object")throw new O("Non-object validation data returned from ActionResult.");const E=y(o.data);if(!E.length)throw new O("No form data returned from ActionResult. Make sure you return { form } in the form actions.");for(const S of E)S.id===a&&await ue(S,h??(o.status>=200&&o.status<300))},ye=q([]),K=q(r.message),ee=q(r.constraints),D=q(!1),L={subscribe:n.subscribe,set:n.set,update:n.update,clear:()=>dt(n,{undefinePath:null,clearFormLevelErrors:!0})},g=q();function I(){return A(g)}function Z(o){if(o===null)throw new O("$tainted store contained null");if(typeof o=="object"){for(const h of Object.values(o))if(Z(h))return!0}return o===!0}async function X(o,h){if(e.validationMethod=="onblur"||e.validationMethod=="submit-only")return!1;let E=e.validationMethod==="oninput";if(!E){const S=A(L),P=S?Tt(S,o,{modifier:Ne=>{if(He(o,Ne))throw new O("Errors can only be added to form fields, not to arrays or objects in the schema. Path: "+Ne.path.slice(0,-1));return Ne.value}}):void 0;E=!!(P&&P.key in P.parent)}return E?(await Ie(o,e,R,L,g,{taint:h}),!0):!1}async function ae(o,h,E){if(E===!1)return;if(E==="untaint-all"){g.set(void 0);return}const S=Mt(o,h);if(E===!0&&ye.set(S),S.length){g.update(H=>(H||(H={}),te(H,S,E===!0?!0:void 0),H));let P=!1;for(const H of S)P=P||await X(H,E);P||await jt(e,A(R),L)}}function Q(o,h){g.set(o),w(h)}const N=q(!1),F=q(!1),v=q(!1),k=le(L,o=>o?Ct(o):[]);if(e.taintedMessage=void 0,Xe(()=>{_();for(const o of Object.values(T))o.length=0}),e.dataType!=="json")for(const[o,h]of Object.entries(r.data))de(o,h);function M(o,h,E){if(h&&Q(typeof h=="boolean"?void 0:h,o.data),E=E??o.message,R.set(o.data,{taint:!1}),K.set(E),L.set(o.errors),f.set(o.id),D.set(o.posted),e.flashMessage&&xe(e)){const S=e.flashMessage.module.getFlash(ce);E&&A(S)===void 0&&S.set(E)}}const T={onSubmit:e.onSubmit?[e.onSubmit]:[],onResult:e.onResult?[e.onResult]:[],onUpdate:e.onUpdate?[e.onUpdate]:[],onUpdated:e.onUpdated?[e.onUpdated]:[],onError:e.onError?[e.onError]:[]};At(o=>{if(e.taintedMessage&&!A(N)){const h=I();h&&Z(h)&&!window.confirm(e.taintedMessage)&&o.cancel()}}),u(ce.subscribe(async o=>{if(!e.applyAction)return;function h(S){throw new O(`No form data found in ${S}. Make sure you return { form } in form actions and load functions.`)}const E=o.status>=200&&o.status<300;if(o.form&&typeof o.form=="object"){if(o.form.type=="error")return;const S=y(o.form);S.length||h("$page.form (ActionData)");for(const P of S)P.id===a&&await ue(P,E)}else if(o.data&&typeof o.data=="object"){const S=y(o.data);for(const P of S)P.id===a&&M(P,E)}}));const V=Object.fromEntries(Object.keys(s.data).map(o=>[o,{name:o,value:ie(R,o),errors:ie(L,o),constraints:ie(ee,o)}]));function Fe(o,h){return o===void 0?mt(e,A(R),a,A(ee),!1):Ie(Ze(o),e,R,L,g,h)}return{form:R,formId:f,errors:L,message:K,constraints:ee,fields:V,tainted:g,submitting:le(N,o=>o),delayed:le(F,o=>o),timeout:le(v,o=>o),options:e,capture:function(){return{valid:s.valid,posted:A(D),errors:A(L),data:A(R),constraints:A(ee),message:A(K),id:a,tainted:A(g)}},restore:function(o){return M(o,o.tainted??!0)},validate:Fe,enhance:(o,h)=>{if(h){if(h.onError){if(e.onError==="apply")throw new O('options.onError is set to "apply", cannot add any onError events.');if(h.onError==="apply")throw new O('Cannot add "apply" as onError event in use:enhance.');T.onError.push(h.onError)}h.onResult&&T.onResult.push(h.onResult),h.onSubmit&&T.onSubmit.push(h.onSubmit),h.onUpdate&&T.onUpdate.push(h.onUpdate),h.onUpdated&&T.onUpdated.push(h.onUpdated)}return qt(o,N,F,v,L,me,e,R,K,p,T,f,ee,g,ye,y,D)},allErrors:k,posted:D,reset:o=>x(o!=null&&o.keepMessage?A(K):void 0,o==null?void 0:o.data,o==null?void 0:o.id)}}function Ge(t){let e,a;return{c(){e=W("span"),a=tt(t[3]),this.h()},l(i){e=J(i,"SPAN",{class:!0});var r=re(e);a=rt(r,t[3]),r.forEach(j),this.h()},h(){ne(e,"class","invalid svelte-1mqqb42")},m(i,r){Y(i,e,r),z(e,a)},p(i,r){r&8&&nt(a,i[3])},d(i){i&&j(e)}}}function Ht(t){let e,a,i,r,s,n,f,m,d,w=[{type:"checkbox"},{name:t[0]},{__value:"true"},t[5]],y={};for(let l=0;l<w.length;l+=1)y=oe(y,w[l]);const c=t[8].default,p=Le(c,t,t[7],null);let b=t[3]&&Ge(t);return{c(){e=W("label"),a=W("input"),i=_e(),r=W("span"),p&&p.c(),s=_e(),b&&b.c(),n=ve(),this.h()},l(l){e=J(l,"LABEL",{class:!0});var u=re(e);a=J(u,"INPUT",{type:!0,name:!0}),i=ge(u),r=J(u,"SPAN",{class:!0});var _=re(r);p&&p.l(_),_.forEach(j),u.forEach(j),s=ge(l),b&&b.l(l),n=ve(),this.h()},h(){we(a,y),Ee(a,"svelte-1mqqb42",!0),ne(r,"class","display-name"),ne(e,"class","svelte-1mqqb42")},m(l,u){Y(l,e,u),z(e,a),a.autofocus&&a.focus(),a.checked=t[2],z(e,i),z(e,r),p&&p.m(r,null),Y(l,s,u),b&&b.m(l,u),Y(l,n,u),f=!0,m||(d=$e(a,"change",t[9]),m=!0)},p(l,[u]){we(a,y=ze(w,[{type:"checkbox"},(!f||u&1)&&{name:l[0]},{__value:"true"},u&32&&l[5]])),u&4&&(a.checked=l[2]),Ee(a,"svelte-1mqqb42",!0),p&&p.p&&(!f||u&128)&&Re(p,c,l,l[7],f?De(c,l[7],u,null):Ue(l[7]),null),l[3]?b?b.p(l,u):(b=Ge(l),b.c(),b.m(n.parentNode,n)):b&&(b.d(1),b=null)},i(l){f||(Ve(p,l),f=!0)},o(l){qe(p,l),f=!1},d(l){l&&j(e),p&&p.d(l),l&&j(s),b&&b.d(l),l&&j(n),m=!1,d()}}}function Bt(t,e,a){let i;const r=["form","field"];let s=Se(e,r),n,f=yt,m=()=>(f(),f=pt(i,_=>a(2,n=_)),i),d;t.$$.on_destroy.push(()=>f());let{$$slots:w={},$$scope:y}=e,{form:c}=e,{field:p}=e;const{value:b,errors:l}=ft(c,p);be(t,l,_=>a(3,d=_));function u(){n=this.checked,i.set(n)}return t.$$set=_=>{e=oe(oe({},e),et(_)),a(5,s=Se(e,r)),"form"in _&&a(6,c=_.form),"field"in _&&a(0,p=_.field),"$$scope"in _&&a(7,y=_.$$scope)},m(a(1,i=b)),[p,i,n,d,l,s,c,y,w,u]}class zt extends Ce{constructor(e){super(),Oe(this,e,Bt,Ht,je,{form:6,field:0})}}function Ke(t){let e,a;return{c(){e=W("span"),a=tt(t[1]),this.h()},l(i){e=J(i,"SPAN",{class:!0});var r=re(e);a=rt(r,t[1]),r.forEach(j),this.h()},h(){ne(e,"class","invalid svelte-9gemke")},m(i,r){Y(i,e,r),z(e,a)},p(i,r){r&2&&nt(a,i[1])},d(i){i&&j(e)}}}function xt(t){let e,a,i,r,s,n,f,m,d,w;const y=t[10].default,c=Le(y,t,t[9],null);let p=[{name:t[0]},{type:"text"},{"aria-invalid":s=t[1]?"true":void 0},t[2],t[7]],b={};for(let u=0;u<p.length;u+=1)b=oe(b,p[u]);let l=t[1]&&Ke(t);return{c(){e=W("label"),a=W("span"),c&&c.c(),i=_e(),r=W("input"),n=_e(),l&&l.c(),f=ve(),this.h()},l(u){e=J(u,"LABEL",{class:!0});var _=re(e);a=J(_,"SPAN",{class:!0});var R=re(a);c&&c.l(R),R.forEach(j),i=ge(_),r=J(_,"INPUT",{name:!0,type:!0,"aria-invalid":!0}),_.forEach(j),n=ge(u),l&&l.l(u),f=ve(),this.h()},h(){ne(a,"class","display-name"),we(r,b),Ee(r,"svelte-9gemke",!0),ne(e,"class","svelte-9gemke")},m(u,_){Y(u,e,_),z(e,a),c&&c.m(a,null),z(e,i),z(e,r),r.autofocus&&r.focus(),We(r,t[3]),Y(u,n,_),l&&l.m(u,_),Y(u,f,_),m=!0,d||(w=$e(r,"input",t[11]),d=!0)},p(u,[_]){c&&c.p&&(!m||_&512)&&Re(c,y,u,u[9],m?De(y,u[9],_,null):Ue(u[9]),null),we(r,b=ze(p,[(!m||_&1)&&{name:u[0]},{type:"text"},(!m||_&2&&s!==(s=u[1]?"true":void 0))&&{"aria-invalid":s},_&4&&u[2],_&128&&u[7]])),_&8&&r.value!==u[3]&&We(r,u[3]),Ee(r,"svelte-9gemke",!0),u[1]?l?l.p(u,_):(l=Ke(u),l.c(),l.m(f.parentNode,f)):l&&(l.d(1),l=null)},i(u){m||(Ve(c,u),m=!0)},o(u){qe(c,u),m=!1},d(u){u&&j(e),c&&c.d(u),u&&j(n),l&&l.d(u),u&&j(f),d=!1,w()}}}function Wt(t,e,a){const i=["form","field"];let r=Se(e,i),s,n,f,{$$slots:m={},$$scope:d}=e,{form:w}=e,{field:y}=e;const{value:c,errors:p,constraints:b}=ft(w,y);be(t,c,u=>a(3,f=u)),be(t,p,u=>a(1,s=u)),be(t,b,u=>a(2,n=u));function l(){f=this.value,c.set(f)}return t.$$set=u=>{e=oe(oe({},e),et(u)),a(7,r=Se(e,i)),"form"in u&&a(8,w=u.form),"field"in u&&a(0,y=u.field),"$$scope"in u&&a(9,d=u.$$scope)},[y,s,n,f,c,p,b,r,w,d,m,l]}class er extends Ce{constructor(e){super(),Oe(this,e,Wt,xt,je,{form:8,field:0})}}export{Qt as C,er as T,zt as a,$t as s};
