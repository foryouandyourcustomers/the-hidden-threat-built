import{s as R,v as A,e as B,a as z,c as I,b as F,l as U,g as V,f as H,m as D,i as N,h as M,w as P,x as T,y as W,O as j,D as y,L as q,P as oe,H as Z,r as le,k as re,K as ie,M as ae}from"./scheduler.036a2d74.js";import{S as X,i as Y,t as k,b as C,c as J,a as Q,m as $,g as de,e as fe,d as x}from"./index.e2632973.js";import{r as ee}from"./index.07541d6e.js";import{g as ue}from"./game-context.fd63b07d.js";import{F as ce}from"./FooterNav.5db6a55f.js";function _e(s,t){return s===t}const he=(s,t,e=_e)=>{let o,n=t(s.getSnapshot());return ee(n,p=>{const v=m=>{const g=t(m);e(n,g)||(n=g,p(g))};return v(s.getSnapshot()),o=s.subscribe(v),()=>{o.unsubscribe()}})},te=(s,t)=>{const e=t.users.find(o=>o.id===s);if(!e)throw new Error(`The user with id ${s} was not found.`);return e},ye=(s,t)=>te(s,t).isAdmin,me=s=>te(s.userId,s);function pe(s){let t,e,o='<svg width="346" height="53" viewBox="0 0 346 53" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M45 0H0l54 53-9-53Z" fill="#F03A50"></path><path d="M45 0h33L54 53 45 0Z" fill="#A40224"></path><path d="M346 38 330 0H78L54 53l292-15Z" fill="#D32746"></path></svg>',n,r,p="The hidden threat",v,m;const g=s[1].default,a=A(g,s,s[0],null);return{c(){t=B("div"),e=B("div"),e.innerHTML=o,n=z(),r=B("div"),r.textContent=p,v=z(),a&&a.c(),this.h()},l(d){t=I(d,"DIV",{class:!0});var f=F(t);e=I(f,"DIV",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-17ojy9"&&(e.innerHTML=o),n=V(f),r=I(f,"DIV",{class:!0,"data-svelte-h":!0}),U(r)!=="svelte-xbe4by"&&(r.textContent=p),v=V(f),a&&a.l(f),f.forEach(H),this.h()},h(){D(e,"class","backdrop svelte-kbs536"),D(r,"class","title svelte-kbs536"),D(t,"class","header svelte-kbs536")},m(d,f){N(d,t,f),M(t,e),M(t,n),M(t,r),M(t,v),a&&a.m(t,null),m=!0},p(d,[f]){a&&a.p&&(!m||f&1)&&P(a,g,d,d[0],m?W(g,d[0],f,null):T(d[0]),null)},i(d){m||(k(a,d),m=!0)},o(d){C(a,d),m=!1},d(d){d&&H(t),a&&a.d(d)}}}function ve(s,t,e){let{$$slots:o={},$$scope:n}=t;return s.$$set=r=>{"$$scope"in r&&e(0,n=r.$$scope)},[n,o]}class ge extends X{constructor(t){super(),Y(this,t,ve,pe,R,{})}}const we=s=>({}),G=s=>({}),be=s=>({}),K=s=>({});function ke(s){let t;const e=s[14].header,o=A(e,s,s[18],K);return{c(){o&&o.c()},l(n){o&&o.l(n)},m(n,r){o&&o.m(n,r),t=!0},p(n,r){o&&o.p&&(!t||r&262144)&&P(o,e,n,n[18],t?W(e,n[18],r,be):T(n[18]),K)},i(n){t||(k(o,n),t=!0)},o(n){C(o,n),t=!1},d(n){o&&o.d(n)}}}function O(s){let t,e,o;return e=new ce({}),{c(){t=B("div"),J(e.$$.fragment),this.h()},l(n){t=I(n,"DIV",{class:!0});var r=F(t);Q(e.$$.fragment,r),r.forEach(H),this.h()},h(){D(t,"class","footer svelte-18ll0tp")},m(n,r){N(n,t,r),$(e,t,null),o=!0},i(n){o||(k(e.$$.fragment,n),o=!0)},o(n){C(e.$$.fragment,n),o=!1},d(n){n&&H(t),x(e)}}}function Me(s){let t,e,o,n,r,p,v,m,g,a,d,f;j(s[15]),o=new ge({props:{$$slots:{default:[ke]},$$scope:{ctx:s}}});const b=s[14].default,_=A(b,s,s[18],null),S=s[14].overlays,h=A(S,s,s[18],G);let i=s[1]&&O();return{c(){t=B("div"),e=B("div"),J(o.$$.fragment),n=z(),r=B("div"),_&&_.c(),p=z(),h&&h.c(),v=z(),i&&i.c(),this.h()},l(l){t=I(l,"DIV",{class:!0});var u=F(t);e=I(u,"DIV",{class:!0});var w=F(e);Q(o.$$.fragment,w),n=V(w),r=I(w,"DIV",{class:!0});var E=F(r);_&&_.l(E),E.forEach(H),p=V(w),h&&h.l(w),v=V(w),i&&i.l(w),w.forEach(H),u.forEach(H),this.h()},h(){D(r,"class","content svelte-18ll0tp"),y(r,"padded",s[2]),D(e,"class",m="board "+(s[9]?`side-${s[9]}`:"")+" svelte-18ll0tp"),j(()=>s[17].call(e)),y(e,"backdrop",s[0]),y(e,"with-footer",s[1]),D(t,"class","board-wrapper svelte-18ll0tp"),q(t,"--board-scale",s[8])},m(l,u){N(l,t,u),M(t,e),$(o,e,null),M(e,n),M(e,r),_&&_.m(r,null),M(e,p),h&&h.m(e,null),M(e,v),i&&i.m(e,null),s[16](e),g=oe(e,s[17].bind(e)),a=!0,d||(f=[Z(window,"resize",s[12]),Z(window,"resize",s[15]),Z(e,"mousemove",s[11])],d=!0)},p(l,[u]){const w={};u&262144&&(w.$$scope={dirty:u,ctx:l}),o.$set(w),_&&_.p&&(!a||u&262144)&&P(_,b,l,l[18],a?W(b,l[18],u,null):T(l[18]),null),(!a||u&4)&&y(r,"padded",l[2]),h&&h.p&&(!a||u&262144)&&P(h,S,l,l[18],a?W(S,l[18],u,we):T(l[18]),G),l[1]?i?u&2&&k(i,1):(i=O(),i.c(),k(i,1),i.m(e,null)):i&&(de(),C(i,1,1,()=>{i=null}),fe()),(!a||u&512&&m!==(m="board "+(l[9]?`side-${l[9]}`:"")+" svelte-18ll0tp"))&&D(e,"class",m),(!a||u&513)&&y(e,"backdrop",l[0]),(!a||u&514)&&y(e,"with-footer",l[1]),u&256&&q(t,"--board-scale",l[8])},i(l){a||(k(o.$$.fragment,l),k(_,l),k(h,l),k(i),a=!0)},o(l){C(o.$$.fragment,l),C(_,l),C(h,l),C(i),a=!1},d(l){l&&H(t),x(o),_&&_.d(l),h&&h.d(l),i&&i.d(),s[16](null),g(),d=!1,le(f)}}}function Ce(s,t,e){let o,{$$slots:n={},$$scope:r}=t,{reportMousePosition:p=void 0}=t,{showBackdrop:v=!1}=t,{showFooter:m=!1}=t,{paddedContent:g=!1}=t;const a=ue(),d=a?he(a.machine.service,({context:c})=>{const L=me(c);if(L.isAdmin)return L.side}):ee(void 0);re(s,d,c=>e(9,o=c));let f,b=1,_=1,S=1,h=1,i=1;const l=c=>{if(!p)return;const L=(c.clientX-f.offsetLeft)/b,ne=(c.clientY-f.offsetTop)/_;p([(L-(1-i)/2)/i,(ne-(1-i)/2)/i])},u=()=>{e(8,i=Math.min(S/(b+20),h/(_+20))),i>=1.3?e(8,i=1.3):e(8,i=Math.min(i,1))};ie(u);function w(){e(6,S=window.innerWidth),e(7,h=window.innerHeight)}function E(c){ae[c?"unshift":"push"](()=>{f=c,e(3,f)})}function se(){b=this.clientWidth,_=this.clientHeight,e(4,b),e(5,_)}return s.$$set=c=>{"reportMousePosition"in c&&e(13,p=c.reportMousePosition),"showBackdrop"in c&&e(0,v=c.showBackdrop),"showFooter"in c&&e(1,m=c.showFooter),"paddedContent"in c&&e(2,g=c.paddedContent),"$$scope"in c&&e(18,r=c.$$scope)},[v,m,g,f,b,_,S,h,i,o,d,l,u,p,n,w,E,se,r]}class ze extends X{constructor(t){super(),Y(this,t,Ce,Me,R,{reportMousePosition:13,showBackdrop:0,showFooter:1,paddedContent:2})}}export{ze as B,he as a,te as b,me as g,ye as u};
